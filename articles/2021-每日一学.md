#### 2021å¹´01æœˆ08æ—¥ å‘¨äº” ç¬¬02å‘¨

(1)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šé˜Ÿåˆ—ä»»åŠ¡-ä»£ç æ“ä½œ

#### 2021å¹´01æœˆ11æ—¥ å‘¨ä¸€ ç¬¬03å‘¨

(1) React æºç æ·±åº¦è§£æï¼š memo ç»„ä»¶çš„æ›´æ–° & completeUnitWorkçš„æ•´ä½“æµç¨‹å’Œæ„ä¹‰ã€‚

* æ ¹æ®æ˜¯å¦ä¸­æ–­è°ƒç”¨ä¸åŒçš„æ–¹æ³•ï¼›
* åˆ¤æ–­æ˜¯å¦æœ‰å…„å¼ŸèŠ‚ç‚¹æ¥æ‰§è¡Œä¸åŒçš„æ“ä½œï¼›
* å®ŒæˆèŠ‚ç‚¹ä¹‹åèµ‹å€¼ effect é“¾ï¼›

(2)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šä»»åŠ¡é˜Ÿåˆ—ä»£ç å®æ“

```js
export default (tasks, n) => {
    // å£°æ˜ä¸€ä¸ªå˜é‡è®°å½•æœ€ç»ˆä»»åŠ¡çš„é¡ºåº
    let q = ''
    // ä»»åŠ¡åˆ†ç±»
    let Q = {}
    tasks.forEach(item => {
        if (Q[item]) {
            Q[item]++
        } else {
            Q[item] = 1
        }
    });
    while (1) {
        let keys = Object.keys(Q)
        if (!keys[0]) {
            break
        }
        // n+1 ä¸ºä¸€ç»„
        let tmp = []
        for (let i = 0; i <= n; i++) {
            let max = 0
            let key
            let pos
            // ä»æ‰€æœ‰çš„ä»»åŠ¡ä¸­æ‰¾åˆ°æœªå¤„ç†æ•°æœ€å¤§çš„ä¼˜å…ˆå®‰æ’
            keys.forEach((item, idx) => {
                if (Q[item] > max) {
                    max = Q[item]
                    key = item
                    pos = idx
                }
            })
            if (key) {
                tmp.push(key)
                keys.splice(pos, 1)
                Q[key]--
                if (Q[key] < 1) {
                    delete Q[key]
                }
            } else {
                break
            }
        }
        q += tmp.join('').padEnd(n + 1, '-')
    }
    // A--A--A-- æ›¿æ¢ä¸º A--A--A
    q = q.replace(/-+$/g, '')
    return q.length
}
```

(3) æ•°æ®ç»“æ„ï¼šæ’åºé“¾è¡¨ & ç¯å½¢é“¾è¡¨ï¼Œé‡ç‚¹æ˜¯ï¼šå¦‚ä½•æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªé“¾è¡¨çš„æ•°æ®ç»“æ„ï¼›çŸ¥é“é“¾è¡¨å¦‚ä½•æ’åºï¼›å¦‚ä½•æ£€æµ‹é“¾è¡¨æ˜¯é—­ç¯çš„ã€‚

æ’åºé“¾è¡¨ï¼šåœ¨O(n log n) æ—¶é—´å¤æ‚åº¦å’Œå¸¸æ•°çº§ç©ºé—´å¤æ‚åº¦ä¸‹ï¼Œå¯¹é“¾è¡¨è¿›è¡Œæ’åºã€‚

ç¤ºä¾‹1ï¼š

```html
è¾“å…¥: 4->2->1->3
è¾“å‡º: 1->2->3->4
```

ç¤ºä¾‹2ï¼š

```html
è¾“å…¥: -1->5->3->4->0
è¾“å‡º: -1->0->3->4->5
```

å¿«é€Ÿæ’åºçš„æœ¬è´¨ï¼šåœ¨éå†æ—¶é€‰æ‹©ä¸€ä¸ªåŸºå‡†å…ƒç´ ï¼Œæ’åºä¸­çš„ä»»ä½•ä¸€ä¸ªå…ƒç´ éƒ½å¯ä»¥ä½œä¸ºåŸºå‡†å…ƒç´ ï¼Œé€šå¸¸æƒ…å†µä¸‹é€‰ç¬¬ä¸€ä¸ªå°±å¯ä»¥ã€‚æŠŠæ‰€æœ‰å°äºåŸºå‡†å…ƒç´ çš„å…ƒç´ ï¼Œæ”¾åœ¨åŸºå‡†å…ƒç´ çš„å·¦è¾¹ï¼›å¤§äºåŸºå‡†å…ƒç´ çš„å…ƒç´ ï¼Œæ”¾åœ¨åŸºå‡†å…ƒç´ çš„å³è¾¹ï¼›ç„¶åé€’å½’å·¦è¾¹å’Œå³è¾¹çš„æ‰€æœ‰å…ƒç´ ã€‚

é“¾è¡¨åªä¼šæš´éœ²ä¸€ä¸ªå¤´æŒ‡é’ˆï¼Œæ‰€æœ‰çš„å…ƒç´ æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®åˆ°çš„ï¼Œå¿…é¡»é€šè¿‡å¤´æŒ‡é’ˆä¸æ–­åœ°è®¿é—® next å¯¹è±¡ï¼Œæ‰èƒ½æ‹¿åˆ°å…·ä½“çš„å…ƒç´ ã€‚è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆp, qï¼Œéƒ½æ˜¯æŒ‡å‘å¤´å…ƒç´ ï¼Œp æŒ‡é’ˆå·¦ä¾§çš„å…ƒç´ æ˜¯å°äºåŸºå‡†å…ƒç´ çš„ï¼Œp ä¸ q ä¹‹é—´çš„å…ƒç´ æ˜¯å¤§äºåŸºå‡†å…ƒç´ çš„ã€‚

#### 2021å¹´01æœˆ12æ—¥ å‘¨äºŒ ç¬¬03å‘¨

(1) é«˜ä»¿ç»„ä»¶åº“:

> å‚è€ƒç½‘ç«™ï¼šhttp://vikingship.xyz

* vikingship æ˜¯æ•™å­¦ç»„ä»¶åº“ï¼Œä½¿ç”¨ React Hooks å’Œ typescript ï¼›
* learning-typescript ä¸ºç¬¬äºŒç«  Typescript å…¥é—¨æºä»£ç ï¼Œåªé’ˆå¯¹ç¬¬äºŒç« ï¼›
* react-with-ts ä¸ºè¯¾ç¨‹ç¬¬ä¸‰ç« ï¼Œç¥å¥‡çš„ React æºä»£ç ï¼›

#### 2021å¹´01æœˆ13æ—¥ å‘¨ä¸‰ ç¬¬03å‘¨

(1)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šé“¾è¡¨çš„å¿«é€Ÿæ’åºæ¯”å †æ’åºä½¿ç”¨çš„åœºæ™¯æ›´å¤šã€‚

(2)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šç¯å½¢é“¾è¡¨-åŸç†è®²è§£

ç¯å½¢é“¾è¡¨ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰å¾ªç¯ã€‚ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° `pos` æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœ `pos` æ˜¯ `-1` ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚

ç¤ºä¾‹1ï¼š

```
è¾“å…¥ï¼šhead = [3,2,0,-4],pos = 1
è¾“å‡ºï¼štrue
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚
```

(3) ç¯å½¢é“¾è¡¨-ä»£ç å®æ“

#### 2021å¹´01æœˆ14æ—¥ å‘¨å›› ç¬¬03å‘¨

(1) æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šèºæ—‹çŸ©é˜µ & æ—‹è½¬å›¾åƒ

ç»™å®šä¸€ä¸ªåŒ…å« m x n ä¸ªå…ƒç´ çš„çŸ©é˜µï¼ˆmè¡Œï¼Œnåˆ—ï¼‰ï¼Œè¯·æŒ‰ç…§é¡ºæ—¶é’ˆèºæ—‹é¡ºåºï¼Œè¿”å›çŸ©é˜µä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚

ç¤ºä¾‹1ï¼š

```
è¾“å…¥ï¼š
[
	[1,2,3],
	[4,5,6],
	[7,8,9]
]
è¾“å‡ºï¼š[1,2,3,6,9,8,7,4,5]
```

(2) æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šæ—‹è½¬å›¾åƒ

ç»™å®šä¸€ä¸ª n x n çš„äºŒç»´çŸ©é˜µè¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚è¯´æ˜ï¼šä½ å¿…é¡»åœ¨åŸåœ°æ—‹è½¬å›¾åƒï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦ç›´æ¥ä¿®æ”¹è¾“å…¥çš„äºŒç»´çŸ©é˜µã€‚è¯·ä¸è¦ä½¿ç”¨å¦ä¸€ä¸ªçŸ©é˜µæ¥æ—‹è½¬å›¾åƒã€‚

ç¤ºä¾‹1ï¼š

```
ç»™å®š matrix = 
[
	[1,2,3],
	[4,5,6],
	[7,8,9]
]
åŸåœ°æ—‹è½¬è¾“å…¥çŸ©é˜µï¼Œä½¿å…¶å˜ä¸ºï¼š
[
	[7,4,1],
	[8,5,2],
	[9,6,3]
]
```

ç¤ºä¾‹2ï¼š

```
ç»™å®š matrix = 
[
 [5,1,9,11],
 [2,4,8,10],
 [13,3,6,7],
 [15,14,12,16]
]
åŸåœ°æ—‹è½¬è¾“å…¥çŸ©é˜µï¼Œä½¿å…¶å˜ä¸ºï¼š
[
	[15,13,2,5],
	[14,3,4,1],
	[12,6,8,9],
	[16,7,10,11]
]
```

#### 2021å¹´01æœˆ15æ—¥ å‘¨äº” ç¬¬03å‘¨

(1)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šæ—‹è½¬å›¾åƒ-ä»£ç å®æ“

```js
export default (arr) => {
    // è·å– n çš„ç»´åº¦
    let vecor = arr.length;
    // å‚ç›´ç¿»è½¬
    for (let i = 0, len = vecor / 2; i < len; i++) {
        for (let j = 0, tmp; j < vecor; j++) {
            tmp = arr[i][j];
            arr[i][j] = arr[vecor - i - 1][j];
            arr[vecor - i - 1][j] = tmp;
        }
    }
    // å¯¹è§’çº¿ç¿»è½¬
    for (let i = 0; i < vecor; i++) {
        for (let j = 0, tmp; j < i; j++) {
            let tmp = arr[i][j];
            arr[i][j] = arr[j][i];
            arr[j][i] = tmp;
        }
    }
    return arr;
};
```

(2)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šå¯¹ç§°äºŒå‰æ ‘-åŸç†è®²è§£ï¼ŒäºŒå‰æ ‘æ˜¯å‡ºç°é¢‘ç‡å¾ˆé«˜ï¼Œéš¾åº¦æœ€å¤§çš„æ•°æ®ç»“æ„ã€‚äºŒå‰æ ‘çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯ä¸€ä¸ªèŠ‚ç‚¹åªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œå·¦èŠ‚ç‚¹å’Œå³èŠ‚ç‚¹ã€‚

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦æ˜¯é•œåƒå¯¹ç§°ã€‚ä¾‹å¦‚ï¼ŒäºŒå‰æ ‘ `[1,2,2,3,4,4,3] ` æ˜¯å¯¹ç§°çš„ã€‚

```
	    1
	  /	 \
   2 		2
 /  \   / \
3   4  4   3
```

ä½†æ˜¯ä¸‹é¢è¿™ä¸ª `[1,2,2,null,3,null,3] ` åˆ™ä¸æ˜¯é•œåƒå¯¹ç§°çš„ï¼š

```
		1
	/		\
	2		2
	\ 	\
	3 	3
```

(3) æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šå¯¹ç§°äºŒå‰æ ‘-ä»£ç å®æ“

```js
// æ„é€ äºŒå‰æ ‘æ•°æ®ç»“æ„
// äºŒå‰æ ‘çš„èŠ‚ç‚¹
class Node {
    constructor(val) {
        this.val = val;
        this.left = this.right = undefined;
    }
}
// å£°æ˜ä¸€ä¸ªäºŒå‰æ ‘
class Tree {
    constructor(data) {
        // ä¸´æ—¶å­˜å‚¨æ‰€æœ‰èŠ‚ç‚¹ï¼Œæ–¹ä¾¿å¯»æ‰¾çˆ¶å­èŠ‚ç‚¹
        let nodeList = [];
        // é¡¶èŠ‚ç‚¹
        let root;
        for (let i = 0, len = data.length; i < len; i++) {
            let node = new Node(data[i]);
            nodeList.push(node);
            if (i > 0) {
                // è®¡ç®—å½“å‰èŠ‚ç‚¹å±äºå“ªä¸€å±‚
                let n = Math.floor(Math.sqrt(i + 1));
                // è®°å½•å½“å‰å±‚çš„èµ·å§‹ç‚¹
                let q = Math.pow(2, n) - 1;
                // è®°å½•ä¸Šä¸€å±‚çš„èµ·å§‹ç‚¹
                let p = Math.pow(2, n - 1) - 1;
                // æ‰¾åˆ°å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹
                let parent = nodeList[p + Math.floor((i - q) / 2)];
                // å°†å½“å‰èŠ‚ç‚¹å’Œä¸Šä¸€å±‚çš„çˆ¶èŠ‚ç‚¹åšå…³è”
                if (parent.left) {
                    parent.right = node;
                } else {
                    parent.left = node;
                }
            }
        }
        root = nodeList.shift();
        nodeList.length = 0;
        return root;
    }
    // åˆ¤æ–­æ˜¯å¦å¯¹ç§°çš„é™æ€æ–¹æ³•
    static isSymmetry(root) {
        if (!root) {
            return true;
        }
        let walk = (left, right) => {
            if (!left && !right) {
                return true;
            }
            if ((left && !right) || (!left && right) || left.val !== right.val) {
                return false;
            }
            return walk(left.left, right.right) && walk(left.right, right.left);
        };
        return walk(root.left, root.right);
    }
}

export default Tree;
export {
    Node
};
```

#### 2021å¹´01æœˆ16æ—¥ å‘¨å…­ ç¬¬03å‘¨

(1)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šéªŒè¯äºŒå‰æœç´¢æ ‘

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚å‡è®¾ä¸€ä¸ªäºŒå‰æœç´¢æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š

* èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å«å°äºå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚
* èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å«å¤§äºå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚
* æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚

ç¤ºä¾‹1ï¼š

```
è¾“å…¥ï¼š
 		2
 	/  \
 	1 	3
è¾“å‡ºï¼štrue
```

(2)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šéªŒè¯äºŒå‰æœç´¢æ ‘-ä»£ç å®æ“

```js
class Node {
    constructor(val) {
        this.val = val;
        this.left = this.right = undefined;
    }
}

class Tree {
    constructor(data) {
        let root = new Node(data.shift());
        //   éå†æ‰€æœ‰çš„æ•°æ®ï¼Œé€æ¸æ’å…¥åˆ°å½“å‰è¿™æ£µæœç´¢æ ‘ä¸Š
        data.forEach((item) => {
            this.insert(root, item);
        });
        return root;
    }
    insert(node, data) {
        if (node.val > data) {
            if (node.left === undefined) {
                node.left = new Node(data);
            } else {
                this.insert(node.left, data);
            }
        } else {
            if (node.right === undefined) {
                node.right = new Node(data);
            } else {
                this.insert(node.right, data);
            }
        }
    }
    static walk(root) {
        if (!root.left && !root.right) {
            return true;
        } else if (
            (root.left && root.val < root.left.val) ||
            (root.right && root.val > root.right.val)
        ) {
            return false;
        } else {
            return Tree.walk(root.left) && Tree.walk(root.right);
        }
    }
}

export default Tree;
export {
    Node
};
```

(3)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šå †æ’åº-åŸç†è®²è§£ï¼Œæ ¹æ®å­—ç¬¦ä¸²å‡ºç°é¢‘ç‡æ’åºï¼ˆæ’åºï¼‰ & è¶…çº§ä¸‘æ•°ï¼ˆæŸ¥æ‰¾ï¼‰

å †æ›´é è¿‘äºŒå‰æ ‘ï¼Œè€Œéå †æ ˆï¼›åº”ç”¨åœºæ™¯ï¼šåˆ©ç”¨å †çš„æ•°æ®ç»“æ„å»æ’åºå’ŒæŸ¥æ‰¾ã€‚

åŸºæœ¬æ¦‚å¿µï¼š

* å †å¿…é¡»æ˜¯å®Œå…¨äºŒå‰æ ‘ï¼ˆn-1å±‚æ˜¯æ»¡äºŒå‰æ ‘ï¼Œéƒ½æœ‰å·¦å³èŠ‚ç‚¹ï¼‰ï¼›

* ä»»ä¸€èŠ‚ç‚¹çš„å€¼æ˜¯å…¶å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼ã€‚

ä¾‹å¦‚ï¼š

```
		  	56(æœ€å¤§å †)
			 /   \
		 19     40
    / \     /
   18  9   3
```

```
		  	 5(æœ€å°å †)
			 /   \
		 16     30
    / \     /
   49  18  38
```

#### 2021å¹´01æœˆ17æ—¥ å‘¨æ—¥ ç¬¬03å‘¨

do nothing.

#### 2021å¹´01æœˆ18æ—¥ å‘¨ä¸€ ç¬¬04å‘¨

(1)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šå †æ’åº-ä»£ç æ¼”ç¤º

```js
class Heap {
    constructor(data) {
        this.data = data;
    }
    sort() {
        let iArr = this.data;
        let n = iArr.length;
        if (n <= 1) {
            return iArr;
        } else {
            for (let i = Math.floor(n / 2); i >= 0; i--) {
                Heap.maxHeapify(iArr, i, n);
            }
            for (let j = 0; j < n; j++) {
                Heap.swap(iArr, 0, n - 1 - j);
                Heap.maxHeapify(iArr, 0, n - 1 - j - 1);
            }
            return iArr;
        }
    }
    // äº¤æ¢ä¸¤ä¸ªå…ƒç´ çš„æ–¹æ³•
    static swap(arr, a, b) {
        if (a === b) {
            return "";
        }
        let c = arr[a];
        arr[a] = arr[b];
        arr[b] = c;
    }
    /**
     * æ„å»ºæœ€å¤§å †çš„è¿‡ç¨‹
     * @param {*} Arr æ•°ç»„
     * @param {*} i  å“ªä¸ªèŠ‚ç‚¹
     * @param {*} size æ•°ç»„æœ‰æ•ˆé•¿åº¦
     */
    static maxHeapify(Arr, i, size) {
        // å·¦èŠ‚ç‚¹ï¼ˆç´¢å¼•ï¼‰
        let l = i * 2 + 1;
        // å³èŠ‚ç‚¹ï¼ˆç´¢å¼•ï¼‰
        let r = i * 2 + 2;
        let largest = i;
        // çˆ¶èŠ‚ç‚¹iå’Œå·¦èŠ‚ç‚¹lä½œæ¯”è¾ƒå–æœ€å¤§å€¼
        if (l <= size && Arr[l] > Arr[largest]) {
            largest = l;
        }
        // å³èŠ‚ç‚¹å’Œæœ€å¤§å€¼æ¯”è¾ƒ
        if (r <= size && Arr[r] > Arr[largest]) {
            largest = r;
        }
        if (largest !== i) {
            Heap.swap(Arr, i, largest);
            Heap.maxHeapify(Arr, largest, size);
        }
    }
}

export default Heap;
```

(2)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šå †æ’åº-ä»£ç æ¼”ç¤º

æ ¹æ®å­—ç¬¦å‡ºç°é¢‘ç‡æ’åºï¼Œç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·å°†å­—ç¬¦ä¸²é‡Œçš„å­—ç¬¦æŒ‰ç…§å‡ºç°çš„é¢‘ç‡é™åºæ’åˆ—ã€‚

ç¤ºä¾‹1ï¼š

```
è¾“å…¥ï¼š"tree"
è¾“å‡ºï¼š"eert"
è§£é‡Šï¼š'e' å‡ºç°ä¸¤æ¬¡ï¼Œ'r'å’Œ't'éƒ½åªå‡ºç°ä¸€æ¬¡ã€‚å› æ­¤'e'å¿…é¡»å‡ºç°åœ¨'r'å’Œ't'ä¹‹å‰ã€‚æ­¤å¤–ï¼Œ"eetr"ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç­”æ¡ˆã€‚
```

ç¬¬ä¸€æ­¥ï¼šç»Ÿè®¡ï¼›ç¬¬äºŒæ­¥ï¼šæ’åºï¼›ç¬¬ä¸‰æ­¥ï¼šè¾“å‡ºï¼›

```js
class Heap {
    constructor(str) {
        let map = new Map();
        str.split("").forEach((item) => {
            if (map.has(item)) {
                map.set(item, map.get(item) + 1);
            } else {
                map.set(item, 1);
            }
        });
        this.map = map;
        this.data = Array.from(map.values());
    }
    sort() {
        let iArr = this.data;
        let n = iArr.length;
        if (n <= 1) {
            return iArr;
        } else {
            for (let i = Math.floor(n / 2); i >= 0; i--) {
                Heap.maxHeapify(iArr, i, n);
            }
            for (let j = 0; j < n; j++) {
                Heap.swap(iArr, 0, n - 1 - j);
                Heap.maxHeapify(iArr, 0, n - 1 - j - 1);
            }
            return iArr;
        }
    }
    toString() {
        let arr = this.sort();
        let str = [];
        while (arr.length) {
            let top = arr.pop();
            for (let [k, v] of this.map) {
                if (v === top) {
                    str.push(k.repeat(v));
                    this.map.delete(k);
                    break;
                }
            }
        }
        return str.join("");
    }
    // äº¤æ¢ä¸¤ä¸ªå…ƒç´ çš„æ–¹æ³•
    static swap(arr, a, b) {
        if (a === b) {
            return "";
        }
        let c = arr[a];
        arr[a] = arr[b];
        arr[b] = c;
    }
    /**
     * æ„å»ºæœ€å¤§å †çš„è¿‡ç¨‹
     * @param {*} Arr æ•°ç»„
     * @param {*} i  å“ªä¸ªèŠ‚ç‚¹
     * @param {*} size æ•°ç»„æœ‰æ•ˆé•¿åº¦
     */
    static maxHeapify(Arr, i, size) {
        // å·¦èŠ‚ç‚¹ï¼ˆç´¢å¼•ï¼‰
        let l = i * 2 + 1;
        // å³èŠ‚ç‚¹ï¼ˆç´¢å¼•ï¼‰
        let r = i * 2 + 2;
        let largest = i;
        // çˆ¶èŠ‚ç‚¹iå’Œå·¦èŠ‚ç‚¹lä½œæ¯”è¾ƒå–æœ€å¤§å€¼
        if (l <= size && Arr[l] > Arr[largest]) {
            largest = l;
        }
        // å³èŠ‚ç‚¹å’Œæœ€å¤§å€¼æ¯”è¾ƒ
        if (r <= size && Arr[r] > Arr[largest]) {
            largest = r;
        }
        if (largest !== i) {
            Heap.swap(Arr, i, largest);
            Heap.maxHeapify(Arr, largest, size);
        }
    }
}

export default Heap;
```

(3)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šè¶…çº§ä¸‘æ•°ï¼Œä¸‘æ•°ï¼Œè´¨å› æ•°ï¼Œè´¨æ•°ã€‚

ç¼–å†™ä¸€æ®µç¨‹åºæ¥æŸ¥æ‰¾ç¬¬ n ä¸ªè¶…çº§ä¸‘æ•°ã€‚è¶…çº§ä¸‘æ•°æ˜¯æŒ‡å…¶æ‰€æœ‰è´¨å› æ•°éƒ½æ˜¯é•¿åº¦ä¸º k çš„è´¨æ•°åˆ—è¡¨ `primes` ä¸­çš„æ­£æ•´æ•°ã€‚

ç¤ºä¾‹ï¼š

```
è¾“å…¥ï¼šn=12,primes=[2,7,13,19]
è¾“å‡ºï¼š32
è§£é‡Šï¼šç»™å®šé•¿åº¦ä¸º 4 çš„è´¨æ•°åˆ—è¡¨ primes=[2,7,13,19],å‰12ä¸ªè¶…çº§ä¸‘æ•°åˆ—è¡¨ä¸ºï¼š[1,2,4,7,8,13,14,16,19,26,28,32]ã€‚
```

è§£é¢˜æ€è·¯ï¼š

* æ±‚è§£ä»»æ„æ•´æ•°çš„è´¨å› æ•°
* è´¨å› æ•°æ˜¯å¦åœ¨æŒ‡å®šè´¨å› æ•°èŒƒå›´å†…
* æ˜¯å¦è¾¾åˆ°æŒ‡å®šä¸ªæ•° n

#### 2021å¹´01æœˆ20æ—¥ å‘¨ä¸‰ ç¬¬04å‘¨

(1) æ•°æ®ç»“æ„ä¸ç®—æ³•: è¶…çº§ä¸‘æ•°-ä»£ç æ¼”ç¤º(æ•°ç»„æŸ¥æ‰¾)

```js
class Ugly {
    constructor(n, primes) {
        this.n = n;
        this.primes = primes;
    }
    // è®¡ç®—è¶…çº§ä¸‘æ•°
    getAll() {
        // è¶…çº§ä¸‘æ•°åˆ—è¡¨
        let res = [1];
        let i = 2;
        let primes = this.primes;
        while (res.length < this.n) {
            let arr = Ugly.getPrimes(i);
            let k = 0;
            let l = arr.length;
            for (; k < l; k++) {
                if (!primes.find((item) => item === arr[k])) {
                    break;
                }
            }
            // k === l æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ç§å°±æ˜¯å½“å‰è¿™ä¸ªæ•°å‹æ ¹æ²¡æœ‰è´¨å› æ•°ï¼›ä¸€ç§æ˜¯æ‰€æœ‰è´¨å› æ•°éƒ½åœ¨æŒ‡å®šåˆ—è¡¨ä¸­
            if (k === l) {
                if (l === 0) {
                    if (primes.find((item) => item === i)) {
                        res.push(i);
                    }
                } else {
                    res.push(i);
                }
            }
            i++;
        }
        return res[this.n - 1];
    }
    // è®¡ç®—æŒ‡å®šæ­£æ•´æ•°nçš„è´¨å› æ•°
    static getPrimes(n) {
        //
        let prime = (n) => {
            // å­˜å‚¨æ‰€æœ‰çš„è´¨å› æ•°
            let arr = [];
            for (let i = 2; i < n / 2 + 1; i++) {
                if (n % i === 0 && !prime(i).length) {
                    arr.push(i);
                }
            }
            return arr;
        };
        return prime(n);
    }
}

export default Ugly;
```

(2) æ•°æ®ç»“æ„ä¸ç®—æ³•: è¶…çº§ä¸‘æ•°-ä»£ç æ¼”ç¤º(å †æŸ¥æ‰¾)

```js
class Ugly {
    constructor(n, primes) {
        this.n = n;
        this.primes = new Heap(primes);
    }
    // è®¡ç®—è¶…çº§ä¸‘æ•°
    getAll() {
        // è¶…çº§ä¸‘æ•°åˆ—è¡¨
        let res = [1];
        let i = 2;
        let primes = this.primes;
        while (res.length < this.n) {
            let arr = Ugly.getPrimes(i);
            let k = 0;
            let l = arr.length;
            for (; k < l; k++) {
                if (!primes.find(arr[k])) {
                    break;
                }
            }
            // k === l æœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€ç§å°±æ˜¯å½“å‰è¿™ä¸ªæ•°å‹æ ¹æ²¡æœ‰è´¨å› æ•°ï¼›ä¸€ç§æ˜¯æ‰€æœ‰è´¨å› æ•°éƒ½åœ¨æŒ‡å®šåˆ—è¡¨ä¸­
            if (k === l) {
                if (l === 0) {
                    if (primes.find(i)) {
                        res.push(i);
                    }
                } else {
                    res.push(i);
                }
            }
            i++;
        }
        return res[this.n - 1];
    }
    // è®¡ç®—æŒ‡å®šæ­£æ•´æ•°nçš„è´¨å› æ•°
    static getPrimes(n) {
        //
        let prime = (n) => {
            // å­˜å‚¨æ‰€æœ‰çš„è´¨å› æ•°
            let arr = [];
            for (let i = 2; i < n / 2 + 1; i++) {
                if (n % i === 0 && !prime(i).length) {
                    arr.push(i);
                }
            }
            return arr;
        };
        return prime(n);
    }
}

class Heap {
    constructor(arr) {
        this.data = arr;
        this.max = arr.length;
        this.sort();
    }
    find(val, i = 0) {
        let arr = this.data;
        if (val > arr[i] || i > this.max) {
            return false;
        } else if (val === arr[i]) {
            return val;
        } else {
            return this.find(val, i * 2 + 1) || this.find(val, i * 2 + 2);
        }
    }
    sort() {
        let iArr = this.data;
        let n = iArr.length;
        if (n <= 1) {
            return iArr;
        } else {
            for (let i = Math.floor(n / 2); i >= 0; i--) {
                Heap.maxHeapify(iArr, i, n);
            }
            return iArr;
        }
    }
    // äº¤æ¢ä¸¤ä¸ªå…ƒç´ çš„æ–¹æ³•
    static swap(arr, a, b) {
        if (a === b) {
            return "";
        }
        let c = arr[a];
        arr[a] = arr[b];
        arr[b] = c;
    }
    /**
     * æ„å»ºæœ€å¤§å †çš„è¿‡ç¨‹
     * @param {*} Arr æ•°ç»„
     * @param {*} i  å“ªä¸ªèŠ‚ç‚¹
     * @param {*} size æ•°ç»„æœ‰æ•ˆé•¿åº¦
     */
    static maxHeapify(Arr, i, size) {
        // å·¦èŠ‚ç‚¹ï¼ˆç´¢å¼•ï¼‰
        let l = i * 2 + 1;
        // å³èŠ‚ç‚¹ï¼ˆç´¢å¼•ï¼‰
        let r = i * 2 + 2;
        let largest = i;
        // çˆ¶èŠ‚ç‚¹iå’Œå·¦èŠ‚ç‚¹lä½œæ¯”è¾ƒå–æœ€å¤§å€¼
        if (l <= size && Arr[l] > Arr[largest]) {
            largest = l;
        }
        // å³èŠ‚ç‚¹å’Œæœ€å¤§å€¼æ¯”è¾ƒ
        if (r <= size && Arr[r] > Arr[largest]) {
            largest = r;
        }
        if (largest !== i) {
            Heap.swap(Arr, i, largest);
            Heap.maxHeapify(Arr, largest, size);
        }
    }
}
export default Ugly;
export {
    Heap
};
```

(3)è¿›é˜¶ç®—æ³•ï¼šè´ªå¿ƒç®—æ³•-ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº&æŸ æª¬æ°´æ‰¾é›¶

(4è¿›é˜¶ç®—æ³•: è´ªå¿ƒç®—æ³•ï¼ˆåˆç§°è´ªå©ªç®—æ³•ï¼‰ï¼Œæ˜¯æŒ‡åœ¨å¯¹**é—®é¢˜æ±‚è§£**æ—¶ï¼Œæ€»æ˜¯åšå‡ºåœ¨å½“å‰çœ‹æ¥æ˜¯æœ€å¥½çš„çš„é€‰æ‹©ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä»æ•´ç†æœ€ä¼˜ä¸ŠåŠ ä»¥è€ƒè™‘ï¼Œä»–æ‰€åšå‡ºçš„æ˜¯åœ¨æŸç§æ„ä¹‰ä¸Šçš„**å±€éƒ¨æœ€ä¼˜è§£**ã€‚

è´ªå¿ƒç®—æ³•ä¸æ˜¯å¯¹æ‰€æœ‰é—®é¢˜éƒ½èƒ½å¾—åˆ°æ•´ä½“æœ€ä¼˜è§£ï¼Œå…³é”®æ˜¯è´ªå¿ƒç­–ç•¥çš„é€‰æ‹©ï¼Œé€‰æ‹©çš„è´ªå¿ƒç­–ç•¥å¿…é¡»æ˜¯å…·å¤‡æ— åæ•ˆæ€§ï¼Œå³æŸä¸ªçŠ¶æ€ä»¥å‰çš„è¿‡ç¨‹ä¸ä¼šå½±å“ä»¥åçš„çŠ¶æ€ï¼Œåªä¸å½“å‰çŠ¶æ€æœ‰å…³ã€‚

**ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº II:** ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ i ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šè‚¡ç¥¨ç¬¬ i å¤©çš„ä»·æ ¼ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ å¯ä»¥å°½å¯èƒ½åœ°å®Œæˆæ›´å¤šçš„äº¤æ˜“ï¼ˆå¤šæ¬¡ä¹°å–ä¸€æ”¯è‚¡ç¥¨ï¼‰ã€‚

æ³¨æ„ï¼šä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚

ç¤ºä¾‹1ï¼š

```
è¾“å…¥ï¼š[7,1,5,3,6,4]
è¾“å‡ºï¼š7
è§£é‡Šï¼šåœ¨ç¬¬2å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼=1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬3å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼=5ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5-1=4ã€‚
éšåï¼Œåœ¨ç¬¬4å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼=3ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬5å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼=6ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 6-3=3ã€‚
```

ç¤ºä¾‹2ï¼š

```
è¾“å…¥ï¼š[1,2,3,4,5]
è¾“å‡ºï¼š4
è§£é‡Šï¼šåœ¨ç¬¬1å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼=1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬5å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼=5ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 5-1=4ã€‚
æ³¨æ„ä½ ä¸èƒ½åœ¨ç¬¬1å¤©å’Œç¬¬2å¤©æ¥è¿è´­ä¹°è‚¡ç¥¨ï¼Œä¹‹åå†å°†å®ƒä»¬å–å‡ºã€‚å› ä¸ºè¿™æ ·å±äºåŒæ—¶å‚ä¸äº†å¤šç¬”äº¤æ˜“ï¼Œä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ã€‚
```

ç¤ºä¾‹3ï¼š

```
è¾“å…¥ï¼š[7,6,4,3,1]
è¾“å‡ºï¼š0
è§£é‡Šï¼šåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ²¡æœ‰å®Œæˆäº¤æ˜“ï¼Œæ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º0ã€‚
```

è´ªå¿ƒç®—æ³•ï¼š

**é—®é¢˜ï¼šæœ€å¤§åˆ©æ¶¦**

**ç­–ç•¥1**ï¼šä»æœ€ä½ç‚¹ä¹°å…¥ï¼Œåœ¨æœ€é«˜ç‚¹å–å‡ºï¼ˆè¿½æ±‚å•æ¬¡åˆ©ç›Šï¼‰

**ç­–ç•¥2**ï¼šä»ä½ç‚¹ä¹°å…¥ï¼Œåªè¦å¯ä»¥èµšé’±å°±å–å‡ºï¼›ä¸æ–­ä¹°å–ï¼ˆè¿½æ±‚å¤šæ¬¡åˆ©ç›Šï¼Œå•æ¬¡åˆ©ç›Šä¸å¤Ÿï¼‰

**ç­–ç•¥3**ï¼šä»ä½ç‚¹ä¹°å…¥ï¼Œåˆ°ä»·æ ¼é«˜ç‚¹å–å‡ºï¼Œä¸æ–­ä¹°å–ï¼ˆåœ¨ä¿è¯å•æ¬¡åˆ©ç›Šçš„åŸºç¡€ä¸Šï¼Œå®ç°å¤šæ¬¡äº¤æ˜“ï¼‰

#### 2021å¹´01æœˆ21æ—¥ å‘¨å›› ç¬¬04å‘¨

(1) æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šä¹°å–è‚¡ç¥¨æœ€ä½³æ—¶æœº-ä»£ç å®æ“

```js
export default (prices) => {
    // ç”¨æ¥ä¿å­˜åˆ©æ¶¦
    let count = 0;
    for (let i = 0, len = prices.length; i < len; i++) {
        for (let j = i; j < len - 1; j++) {
            if (prices[j + 1] > prices[j]) {
                count += prices[j + 1] - prices[j];
                i = j;
            } else {
                i = j;
                break;
            }
        }
    }
    return count;
};
```

(2) æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šæŸ æª¬æ°´æ‰¾é›¶-åŸç†è®²è§£ï¼Œåœ¨æŸ æª¬æ°´æ‘Šä½ä¸Šï¼Œæ¯ä¸€æ¯æŸ æª¬æ°´çš„å”®ä»·ä¸º 5 ç¾å…ƒã€‚é¡¾å®¢æ’é˜Ÿè´­ä¹°ä½ çš„äº§å“ï¼Œï¼ˆæŒ‰è´¦å• bills æ”¯ä»˜çš„é¡ºåºï¼‰ä¸€æ¬¡è´­ä¹°ä¸€æ¯ã€‚

æ¯ä½é¡¾å®¢åªä¹°ä¸€æ¯æŸ æª¬æ°´ï¼Œç„¶åå‘ä½ æ”¯ä»˜5ç¾å…ƒã€10ç¾å…ƒæˆ–20ç¾å…ƒã€‚ä½ å¿…é¡»ç»™æ¯ä¸ªé¡¾å®¢æ­£ç¡®æ‰¾é›¶ï¼Œä¹Ÿå°±æ˜¯è¯´å‡€äº¤æ˜“æ˜¯æ¯ä½é¡¾å®¢å‘ä½ æ”¯ä»˜5ç¾å…ƒã€‚

æ³¨æ„ï¼Œä¸€å¼€å§‹ä½ æ‰‹å¤´æ²¡æœ‰ä»»ä½•é›¶é’±ã€‚

å¦‚æœä½ èƒ½ç»™æ¯ä½é¡¾å®¢æ­£ç¡®æ‰¾é›¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚

ç¤ºä¾‹1ï¼š

```
è¾“å…¥ï¼š[5,5,5,10,20]
è¾“å‡ºï¼štrue
è§£é‡Šï¼š
å‰3ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æŒ‰é¡ºåºæ”¶å–3å¼ 5ç¾å…ƒçš„é’ç¥¨ã€‚
ç¬¬4ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æ”¶å–ä¸€å¼ 10ç¾å…ƒçš„é’ç¥¨ï¼Œå¹¶è¿”å›5ç¾å…ƒã€‚
ç¬¬5ä½é¡¾å®¢é‚£é‡Œï¼Œæˆ‘ä»¬æ‰¾è¿˜ä¸€å¼ 10ç¾å…ƒçš„é’ç¥¨å’Œä¸€å¼ 5ç¾å…ƒçš„é’ç¥¨ã€‚
ç”±äºæ‰€æœ‰å®¢æˆ·éƒ½å¾—åˆ°äº†æ­£ç¡®çš„æ‰¾é›¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šè¾“å‡º trueã€‚
```

é—®é¢˜ï¼šæ‰¾é›¶é’±

ç­–ç•¥1ï¼šç»™é’±æ‰¾é›¶ï¼Œä¸åŒºåˆ†é‡‘é¢ç›´åˆ°æ‰¾åˆ°è¶³å¤Ÿçš„é›¶é’±ï¼ˆè¿½æ±‚å•è¯æ‰¾é›¶ï¼‰

ç­–ç•¥2ï¼šç»™é’±æ‰¾é›¶ï¼Œä¼˜å…ˆç»™é‡‘é¢å¤§çš„é›¶é’±ï¼Œå°½é‡æŠŠé›¶é’±æ”¾åœ¨æ‰‹é‡Œï¼ˆè¿½æ±‚å¤šæ¬¡æ‰¾é›¶ï¼‰

ç¤ºä¾‹2ï¼š

```
è¾“å…¥ï¼š[5,5,10]
è¾“å‡ºï¼štrue
```

ç¤ºä¾‹3ï¼š

```
è¾“å…¥ï¼š[10,10]
è¾“å‡ºï¼šfalse
```

ç¤ºä¾‹4ï¼š

```
è¾“å…¥ï¼š[5,5,10,10,20]
è¾“å‡ºï¼šfalse
```

(3)æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šæŸ æª¬æ°´æ‰¾é›¶-ä»£ç æ¼”ç¤º

```js
export default (input) => {
    // è¡¨ç¤ºè‡ªå·±çš„é’±ç®±ï¼ˆç”¨äºå­˜å‚¨é›¶é’±ï¼‰
    let hand = [];
    // åˆ¤æ–­æ˜¯å¦æœ‰é¡¾å®¢è¿˜åœ¨
    while (input.length) {
        // å–å‡ºå½“å‰æ’åœ¨æœ€å‰é¢é¡¾å®¢çš„é’±
        let money = input.shift();
        // è¿™ç§æƒ…å†µä¸éœ€è¦æ‰¾é›¶é’±
        if (money === 5) {
            hand.push(money);
        } else {
            // æ‰‹é‡Œçš„é›¶é’±è¦é™åºæ’åˆ—ï¼Œä¹Ÿå°±æ˜¯è¯´æœ€å¤§çš„é¢å€¼çš„é’±æ”¾åœ¨æœ€å‰é¢
            hand.sort((a, b) => b - a);
            // é¡¾å®¢çš„é’±å‡å»é¥®æ–™çš„é’±å°±æ˜¯éœ€è¦æ‰¾ç»™é¡¾å®¢çš„é›¶é’±
            let change = money - 5;
            for (let i = 0, len = hand.length; i < len; i++) {
                if (hand[i] <= change) {
                    change -= hand[i];
                    hand.splice(i, 1);
                    // åˆ é™¤äº†å…ƒç´ ï¼Œæ•°ç»„çš„é•¿åº¦å‘ç”Ÿäº†å˜åŒ–ï¼Œè¦ç»´æŒåˆšæ‰çš„iä¸å˜
                    i--;
                }
                if (change === 0) {
                    break;
                }
            }
            // æ²¡æœ‰è¶³å¤Ÿçš„é’±æ‰¾ç»™é¡¾å®¢
            if (change !== 0) {
                return false;
            } else {
                // é¡¾å®¢çš„é’±å­˜èµ·æ¥
                hand.push(money);
            }
        }
    }
    return true;
};
```

#### 2021å¹´01æœˆ22æ—¥ å‘¨äº” ç¬¬04å‘¨

(1) æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼šè¿›é˜¶ç®—æ³•-åŠ¨æ€è§„åˆ’ä¹‹ä¸åŒè·¯å¾„II å’Œ K ç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­

åŠ¨æ€è§„åˆ’ä¸‰ä¸ªé‡è¦æ¦‚å¿µï¼šåŠ¨æ€è½¬ç§»æ–¹ç¨‹ã€æœ€ä¼˜å­ç»“æ„ã€è¾¹ç•Œ

ä¸åŒè·¯å¾„IIï¼šä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª m x n ç½‘æ ¼çš„å·¦ä¸Šè§’ï¼ˆèµ·ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°çš„ Startï¼‰ã€‚æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾åˆ°è¾¾ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º Finishï¼‰ã€‚ç°åœ¨è€ƒè™‘ç½‘æ ¼ä¸­æœ‰éšœç¢ç‰©ã€‚é‚£ä¹ˆä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’å°†ä¼šæœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ

| Start |      |      |      |      |      |        |
| :---: | ---- | ---- | ---- | ---- | ---- | :----: |
|       |      |      |      |      |      |        |
|       |      |      |      |      |      | Finish |

ç½‘æ ¼ä¸­çš„éšœç¢ç‰©å’Œç©ºä½ç½®åˆ†åˆ«ç”¨1å’Œ0æ¥è¡¨ç¤ºã€‚

ç¤ºä¾‹1ï¼š

```
è¾“å…¥ï¼š
[
 [0,0,0],
 [0,1,0],
 [0,0,0]
]
è¾“å‡ºï¼š2
è§£é‡Šï¼š3x3 ç½‘æ ¼çš„æ­£ä¸­é—´æœ‰ä¸€ä¸ªéšœç¢ç‰©ã€‚ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’ä¸€å…±æœ‰2æ¡ä¸åŒçš„è·¯å¾„ï¼š
1.å‘å³ -> å‘å³ -> å‘ä¸‹ -> å‘ä¸‹
2.å‘ä¸‹ -> å‘ä¸‹ -> å‘å³ -> å‘å³
```

mxnï¼šmè¡Œnåˆ—çš„çŠ¶æ€æ–¹ç¨‹æ˜¯ F(mxn) = F(m-1xn) + F(mxn-1)

(2)ä¸åŒè·¯å¾„II-ä»£ç å®æ“ï¼š

```js
export default (arr, m, n) => {
    let dp = (m, n) => {
        // m=2,n=2 çš„è¾¹ç•Œ
        if (m === 2 && n === 2) {
            return arr[1][1] || arr[1][0] + arr[0][1] === 2 ?
                0 :
                arr[1][0] === 1 || arr[0][1] === 1 ?
                1 :
                2;
        } else if (m < 2 || n < 2) {
            if (m < 2) {
                // å•è¡Œæœ‰1å°±è¿”å›0ï¼Œæ²¡æœ‰1è¿”å›1
                return arr[m - 1].includes(1) ? 0 : 1;
            } else {
                // å•åˆ—ä¸èƒ½æœ‰éšœç¢ç‰©(1)æœ‰å®ƒè¿”å›0ï¼Œæ²¡æœ‰1è¿”å›1
                for (let i = 0; i < m; i++) {
                    if (arr[i][0] === 1) {
                        return 0;
                    }
                }
                return 1;
            }
        } else {
            return dp(m - 1, n) + dp(m, n - 1);
        }
    };
    return dp(m, n);
};
```

(3) Kç«™ä¸­è½¬å†…æœ€ä¾¿å®œçš„èˆªç­ï¼šæœ‰nä¸ªåŸå¸‚é€šè¿‡mä¸ªèˆªç­è¿æ¥ã€‚æ¯ä¸ªèˆªç­éƒ½ä»åŸå¸‚ u å¼€å§‹ï¼Œä»¥ä»·æ ¼ w æŠµè¾¾ vã€‚

ç°åœ¨ç»™å®šæ‰€æœ‰çš„åŸå¸‚å’Œèˆªç­ï¼Œä»¥åŠå‡ºå‘åŸå¸‚ src å’Œ ç›®çš„åœ° dstï¼Œä½ çš„ä»»åŠ¡æ˜¯æ‰¾åˆ°ä» src åˆ° dst æœ€å¤šç»è¿‡ k ç«™ä¸­è½¬çš„æœ€ä¾¿å®œçš„ä»·æ ¼ã€‚

å¦‚æœæ²¡æœ‰è¿™æ ·çš„è·¯çº¿ï¼Œåˆ™è¾“å‡º -1ã€‚

ç¤ºä¾‹1ï¼š

```
è¾“å…¥ï¼šn=3,edges=[[0,1,100],[1,2,100],[0,2,500]],src=0,dst=2,k=1
è¾“å‡ºï¼š200
è§£é‡Šï¼š0 -> 1 -> 2 200; 0 -> 2 500
```

ç¤ºä¾‹2ï¼š

```
è¾“å…¥ï¼šn=3,edges=[[0,1,100],[1,2,100],[0,2,500]],src=0,dst=2,k=0
è¾“å‡ºï¼š500
è§£é‡Šï¼š0 -> 1 -> 2 200; 0 -> 2 500
```

åŠ¨æ€è½¬ç§»æ–¹ç¨‹ï¼šF(src, dst, k) = Min(F(src, dst-1, k-1) + F(dst-1, dst, 1))

(4) kç«™ä¸­è½¬ç«™-ä»£ç å®æ“

```js
export default (src, dst, k) => {
    // å¯¹nä¸ªåŸå¸‚mä¸ªèˆªç­åšé£è¡Œè¯´æ˜
    let fights = [
        [0, 1, 100],
        [1, 2, 100],
        [0, 2, 500],
    ];
    let cheap = (src, dst, k) => {
        // æ‰¾åˆ° dst çš„å‰ä¸€ç«™
        let prev = fights.filter((item) => item[1] === dst);
        let min = Math.min.apply(
            null,
            prev.map((item) => {
                // ä» dst å¾€å‰æ‰¾ï¼Œæ‰¾åˆ°äº†èµ·å§‹åŸå¸‚
                if (item[0] === src && k > -1) {
                    return item[2];
                } else if (k === 0 && item[0] !== src) {
                    return Number.MAX_SAFE_INTEGER;
                } else {
                    return item[2] + cheap(src, item[0], k - 1);
                }
            })
        );
        return min;
    };
    return cheap(src, dst, k) || -1;
};
```

(5) è¯¾ç¨‹æ€»ç»“ï¼š

åŸºç¡€ç®—æ³•ï¼š

| å¸¸è§ç±»å‹ï¼šå­—ç¬¦ä¸²ã€æ•°ç»„ã€æ­£åˆ™ |
| ---------------------------- |
| å¸¸è§é¢˜å‹ï¼šæŸ¥é‡ã€æ’åºã€é€’å½’   |
| çŸ¥è¯†ç‚¹ï¼šåŸºç¡€APIã€å¸¸ç”¨æŠ€å·§    |

æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼š

| å¸¸è§ç»“æ„ï¼šæ ˆã€é˜Ÿåˆ—ã€é“¾è¡¨ã€çŸ©é˜µã€äºŒå‰æ ‘ã€å † |
| ------------------------------------------ |
| å¸¸è§é¢˜å‹ï¼šç»“æ„å®ç°ã€æŸ¥æ‰¾ã€æ’åºã€æ‹“å±•åº”ç”¨   |
| çŸ¥è¯†ç‚¹ï¼šåŸç†ã€å®ç°ã€å®æˆ˜æ€æƒ³               |

(6) å‰ç«¯äººçš„å±æœºå¦‚ä½•ç ´è§£é€‰

é€‰æ‹©å’Œè¢«é€‰æ‹©éƒ½æ˜¯ä¸€ç§èƒ½åŠ›ã€‚å¯ä»¥é€‰æ‹©æ˜¯ä¸€ç§èµ„æœ¬ï¼Œå¯ä»¥è¢«é€‰æ‹©æ˜¯ä¸€ç§èµ„å†ï¼Œæ— è®ºæ˜¯å“ªç§éƒ½å¯ä»¥æˆå°±ä¸€ç•ªäº‹ä¸šã€‚ä¸ç„¶å±æœºä¼šå¤§ä¸€äº›ã€é—æ†¾ä¹Ÿä¼šéšä¹‹è€Œæ¥ã€‚ç ´é™¤å±æœºï¼šç§¯ç´¯å¯ä»¥é€‰æ‹©çš„èµ„æœ¬ or å¢åŠ è¢«é€‰æ‹©çš„èµ„å†ã€‚

ä¼šå·¥ä½œ & ä¼šå­¦ä¹ ï¼šå…¥é—¨çº§ - å¦‚ä½•å­¦ä¹ ï¼Ÿå¦‚ä½•é¢è¯•ï¼Ÿå¦‚ä½•æå‡ï¼Ÿé£é™©æœ€é«˜ã€‚

å…¥é—¨çº§ï¼š

å¦‚ä½•å­¦ä¹ ï¼Ÿäººç¾¤ï¼šå­¦ç”Ÿã€è½¬è¡Œã€è‡ªå­¦ï¼›ç›®æ ‡ï¼šå­¦ä¹ åŸºç¡€çŸ¥è¯†ï¼›é€”å¾„ï¼šç½‘ç»œåšå®¢ã€è§†é¢‘è¯¾ç¨‹ã€åŸ¹è®­ç­ï¼›æ–¹æ³•ï¼šä¸´æ‘¹ï¼›è‡ªæµ‹ï¼šæ˜¯ä¸æ˜¯èƒ½å¤Ÿç‹¬ç«‹è§£å†³é—®é¢˜ï¼›å¿ƒæ€ï¼šè„šè¸å®åœ°ã€åˆ‡è«æŠ•æœºå–å·§ã€‚

å¦‚ä½•é¢è¯•ï¼Ÿç›®æ ‡ï¼šå·¥ä½œæœºä¼šï¼›å‡†å¤‡ï¼šåŸºç¡€çŸ¥è¯†+å®æˆ˜ç»éªŒï¼›æŠ€å·§ï¼šåŸºç¡€+èƒ½åŠ›+æ½œåŠ›ï¼›è‡ªæµ‹ï¼šåˆ·é¢˜+é¢ç»+æŠ€æœ¯åˆ†æã€‚åŸºç¡€çŸ¥è¯†å¥½ä¸ç­‰äºè¦æ‡‚æ‰€æœ‰çš„çŸ¥è¯†ï¼›æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„çŸ¥è¯†ç›²åŒºã€‚

å¦‚ä½•æå‡ï¼Ÿç›®æ ‡ï¼šæå‡è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼›æ–¹æ³•ï¼šå¤šçœ‹ã€å¤šå¬ã€å¤šåšã€å¤šæ€è€ƒï¼Œä¸æ”¾è¿‡ä»»ä½•ä¸€ä¸ªæœºä¼šï¼›å¿Œè®³ï¼šè‡ªè´Ÿã€å¤šé—®é¢˜ã€æ‡’æ•£ï¼›è‡ªæµ‹ï¼šæ˜¯å¦èƒ½ç‹¬ç«‹è§£å†³é—®é¢˜ã€‚

ä¸­é«˜çº§ï¼šå¦‚ä½•å­¦ä¹ ï¼Ÿå¦‚ä½•æˆé•¿ï¼Ÿå¦‚ä½•æ™‹å‡ï¼Ÿ

å¦‚ä½•å­¦ä¹ ï¼ŸèƒŒæ™¯ï¼šå­¦çš„å¾ˆç´¯ï¼›åŸåˆ™ï¼šå…ˆå°‘åå¤šã€å…ˆç²¾åå¹¿ï¼›æ–¹æ³•ï¼šå¹³è¡¡å­¦ä¹ ã€å·¥ä½œã€ç”Ÿæ´»çš„æ—¶é—´ï¼Œå¤šåˆ©ç”¨ç¤¾åŒºçš„åŠ›é‡ï¼›

å¦‚ä½•æˆé•¿ï¼Ÿå®šä¹‰ï¼šæŠ€æœ¯ã€åšäº‹ï¼›æ–¹æ³•ï¼šè‡ªé©±åŠ¨ã€æ•¢äºæŒ‘æˆ˜ã€æ‰¿æ‹…è´£ä»»ï¼›è‡ªæµ‹ï¼šæŠ€æœ¯æ¶æ„ã€ç‹¬ç«‹åšäº‹ã€å½¼æ­¤æˆå°±ã€‚

å¦‚ä½•æ™‹å‡ï¼Ÿç›®æ ‡ï¼šåŠ è–ªã€æ™‹çº§ï¼›æ–¹æ³•ï¼šå°‘è¯´ã€å¤šåšã€ä»»åŠ³ä»»æ€¨ã€æœ‰æ•ˆæ²Ÿé€šã€æ‹’ç»å¹³åº¸ã€å…¨é¢å‘å±•ï¼›å¿ƒæ€ï¼šå…ˆä»˜å‡ºå†å›æŠ¥ã€ä¸ªäººæœä»é›†ä½“ã€å­¦ä¼šå®šä½å’Œè¡¥ä½ã€è¶³å¤Ÿè€å¿ƒã€‚

(7) TS+Reactæ‰“é€ ç»„ä»¶åº“ï¼š

(8) WebRTCå­¦ä¹ ï¼š

ç‰¹ç‚¹ï¼šGoogleå¼€æºã€è·¨å¹³å°ã€ç”¨äºæµè§ˆå™¨ã€å®æ—¶ä¼ è¾“ã€éŸ³è§†é¢‘å¼•æ“ï¼›

åº”ç”¨é¢†åŸŸï¼šéŸ³è§†é¢‘ä¼šè®®åœ¨çº¿æ•™è‚²ã€ç…§ç›¸æœºã€éŸ³ä¹æ’­æ”¾å™¨ã€å…±äº«è¿œç¨‹æ¡Œé¢ã€å½•åˆ¶ã€å³æ—¶é€šè®¯å·¥å…·ã€P2Pç½‘ç»œåŠ é€Ÿã€æ–‡ä»¶ä¼ è¾“å·¥å…·ã€æ¸¸æˆã€å®æ—¶äººè„¸è¯†åˆ«ï¼›

#### 2021å¹´01æœˆ23æ—¥ å‘¨å…­ 04å‘¨

(1) WebRTCå­¦ä¹ ï¼šå­¦ä¹ æ”¶è·ï¼ŒWebRTC API çš„ä½¿ç”¨ï¼›WebRTC å·¥ä½œåŸç†ï¼›ä¿¡ä»¤æœåŠ¡å™¨çš„è®¾è®¡ä¸æ­å»ºï¼›å®ç°1:1å®æ—¶äº’åŠ¨ç›´æ’­ç³»ç»Ÿã€‚

(2) WebRTC å…¥é—¨ä¸å®æˆ˜ï¼šWebRTC ä»‹ç»

WebRTC æ¦‚è¿°ï¼š

* éŸ³è§†é¢‘å¤„ç†+å³æ—¶é€šè®¯çš„å¼€æºåº“ï¼›
* 2010å¹´ Google å°†å…¶å¼€æºï¼›
* å®ƒæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„å¤šåª’ä½“æ¡†æ¶ï¼Œè·¨å¹³å°ï¼›

WebRTCåº”ç”¨ï¼š

* éŸ³è§†é¢‘å®æ—¶äº’åŠ¨ï¼›æ¸¸æˆã€å³æ—¶é€šè®¯ã€æ–‡ä»¶ä¼ è¾“ç­‰ç­‰ï¼›å®ƒæ˜¯ä¸€ä¸ªç™¾å®ç®±ï¼Œä¼ è¾“ã€éŸ³è§†é¢‘å¤„ç†ï¼ˆå›éŸ³æ¶ˆé™¤ã€é™å™ªç­‰ï¼‰

èƒ½å­¦åˆ°ä»€ä¹ˆï¼š

* éŸ³è§†é¢‘è®¾å¤‡è®¿é—®ä¸ç®¡ç†ï¼›éŸ³è§†é¢‘æ•°æ®çš„é‡‡é›†ï¼›æ•°æ®çš„ä¼ è¾“ä¸å®æ—¶äº’åŠ¨ï¼›WebRTC çš„å·¥ä½œæœºåˆ¶ï¼›

(3) TS+Reactç»„ä»¶åº“ï¼šå®‰è£…å’Œåˆè¯•TypeScript

```bash
# å…¨å±€å®‰è£…
npm install -g typescript@3.7.2
# æŸ¥çœ‹ç‰ˆæœ¬å·
tsc -v 
```

ï¼ˆ4ï¼‰TS+Reactç»„ä»¶åº“ï¼šåŸºç¡€ç±»å‹ï¼Œ undefined å’Œ null æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹

ï¼ˆ5ï¼‰TS+Reactç»„ä»¶åº“ï¼šany ç±»å‹å’Œè”åˆç±»å‹ï¼Œå°½å¯èƒ½æ…ç”¨ï¼Œ

```typescript
//any ç±»
let notSure: any = 4
notSure = 'maybe it is a string'
notSure = true
notSure.myName
notSure.getName()
```

```typescript
// union ç±»å‹
let numberOrString: number | string = 234
numberOrString = 'abc'
```

ï¼ˆ6ï¼‰TS+Reactç»„ä»¶åº“ï¼šArray å’Œ Tuple(å…ƒç»„)

```typescript
// Array
let arrayOfNumber: number[] = [1, 2, 3, 4]
arrayOfNumber.push(5)
// Tuple å…ƒç»„æ˜¯é™å®šäº†æ•°æ®ç±»å‹çš„ä¸€ç§æ•°ç»„ï¼Œå¿…é¡»æ‰€æœ‰ç±»å‹éƒ½æœ‰
let user: [string, number] = ['viking', 1]
```

ï¼ˆ7ï¼‰TS+Reactç»„ä»¶åº“ï¼šInterfaceæ¥å£ï¼Œå®šä¹‰å¯¹è±¡çš„ç±»å‹ 

 - å¯¹å¯¹è±¡çš„å½¢çŠ¶ï¼ˆshapeï¼‰ è¿›è¡Œæè¿°
 - å¯¹ç±»ï¼ˆclassï¼‰ è¿›è¡ŒæŠ½è±¡
 - Duck Typingï¼ˆé¸­å­ç±»å‹ ï¼‰

```typescript
// interface
interface Person {
    readonly id: number;
    name: string;
    age?: number;
}
let viking: Person = {
    id: 1234,
    name: 'viking',
    age: 20
}
```

å¯é€‰å±æ€§ ï¼ŸåŠ åœ¨å±æ€§åé¢ï¼›å¯è¯»å±æ€§ï¼Œreadonly åŠ åœ¨å±æ€§å‰é¢ï¼Œreadonly ç”¨åœ¨å¯¹è±¡å±æ€§ä¸Šï¼Œè€Œ const  ç”¨åœ¨å˜é‡ä¸Šï¼›

ï¼ˆ8ï¼‰TS+Reactç»„ä»¶åº“ï¼šå‡½æ•°å’Œç±»å‹åˆ¤æ–­

```typescript
// å‡½æ•°å£°æ˜
function add(x: number, y: number, z?: number): number {
    if (typeof z === 'number') {
        return x + y + z
    } else {
        return x + y
    }
}
let result = add(2, 3, 5)
```

å¯é€‰å‚æ•°åä¸èƒ½åŠ ç¡®å®šçš„å‚æ•°ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼›ä¹Ÿå¯ä»¥æ·»åŠ é»˜è®¤å‚æ•°ã€‚

```typescript
// å‡½æ•°è¡¨è¾¾å¼
function add(x: number, y: number, z: number = 10): number {
    if (typeof z === 'number') {
        return x + y + z
    } else {
        return x + y
    }
}
let result = add(2, 3)
```

```typescript
// å‡½æ•°è¡¨è¾¾å¼,ç±»å‹æ¨æ–­
const add = function (x: number, y: number, z: number = 10): number {
    if (typeof z === 'number') {
        return x + y + z
    } else {
        return x + y
    }
}
const add2: (x: number, y: number, z?: number) => number = add 
```

typescript å¯ä»¥åœ¨æ²¡æœ‰æ˜ç¡®æŒ‡å®šç±»å‹æ—¶ï¼Œæ¨æ–­å‡ºè¦ä½¿ç”¨çš„ç±»å‹ã€‚

#### 2021å¹´01æœˆ24æ—¥ å‘¨æ—¥ 04å‘¨

(1) WebRTCå­¦ä¹ ï¼šWebRTC åŸç†ä¸æ¶æ„ï¼Œ ç½‘é¡µç«¯å’Œæµè§ˆå™¨ç«¯ã€‚å…¶ä¸­æµè§ˆå™¨ç«¯æœ‰åŒ…æ‹¬éŸ³é¢‘å¼•æ“ï¼ˆéŸ³é¢‘é‡‡é›†å’Œæ¸²æŸ“ï¼‰ã€è§†é¢‘å¼•æ“ï¼ˆè§†é¢‘é‡‡é›†ï¼‰ã€ä¼ è¾“å±‚ï¼ˆæ•°æ®çš„è¾“å…¥è¾“å‡ºï¼‰ã€‚

(2)  WebRTCå­¦ä¹ ï¼š WebRTCçš„ç›®å½•ç»“æ„

| ç¼–å· | ç›®å½•            | åŠŸèƒ½                                                   |
| ---- | --------------- | ------------------------------------------------------ |
| 01   | api             | webrtcæ¥å£å±‚ï¼Œæµè§ˆå™¨éƒ½æ˜¯é€šè¿‡è¯¥æ¥å£è°ƒç”¨webrtc           |
| 02   | call            | æ•°æ®æµçš„ç®¡ç†å±‚ï¼Œcallä»£è¡¨åŒä¸€ä¸ªç«¯ç‚¹çš„æ‰€æœ‰æ•°æ®çš„æµå…¥æµå‡º |
| 03   | video           | ä¸è§†é¢‘ç›¸å…³çš„é€»è¾‘                                       |
| 04   | audio           | ä¸éŸ³é¢‘ç›¸å…³çš„é€»è¾‘                                       |
| 05   | common_audio    | éŸ³é¢‘ç®—æ³•ç›¸å…³                                           |
| 06   | common_video    | è§†é¢‘ç®—æ³•ç›¸å…³                                           |
| 07   | media           | ä¸å¤šåª’ä½“ç›¸å…³çš„é€»è¾‘å¤„ç†ï¼Œå¦‚ç¼–è§£ç çš„é€»è¾‘å¤„ç†             |
| 08   | logging         | æ—¥å¿—ç›¸å…³                                               |
| 09   | module          | æœ€é‡è¦çš„ç›®å½•ï¼Œå­æ¨¡å—                                   |
| 10   | pc              | peer connection, è¿æ¥ç›¸å…³çš„é€»è¾‘å±‚                       |
| 11   | p2p             | ç«¯å¯¹ç«¯ç›¸å…³ä»£ç ï¼Œstunï¼Œturn                             |
| 12   | rtc_base        | åŸºç¡€ä»£ç ï¼Œå¦‚çº¿ç¨‹ã€é”ç›¸å…³çš„ç»Ÿä¸€æ¥å£ä»£ç                  |
| 13   | rtc_tool        | éŸ³è§†é¢‘åˆ†æç›¸å…³çš„å·¥å…·ä»£ç                                |
| 14   | tool_webrtc     | webrtcæµ‹è¯•ç›¸å…³çš„å·¥å…·ä»£ç ï¼Œå¦‚ç½‘ç»œæ¨¡æ‹Ÿå™¨                 |
| 15   | system_warppers | ä¸å…·ä½“æ“ä½œç³»ç»Ÿç›¸å…³çš„ä»£ç ã€‚å¦‚cpuç‰¹æ€§ï¼ŒåŸå­æ“ä½œç­‰        |
| 16   | stats           | å­˜æ”¾å„ç§æ•°æ®ç»Ÿè®¡ç›¸å…³çš„ç±»                               |
| 17   | sdk             | å­˜æ”¾androidå’Œioså±‚ä»£ç ã€‚å¦‚è§†é¢‘çš„é‡‡é›†ã€æ¸²æŸ“ç­‰ã€‚         |

webrtc modules ç›®å½•

| ç¼–å· | ç›®å½•                     | åŠŸèƒ½                                 |
| ---- | ------------------------ | ------------------------------------ |
| 01   | audio_coding             | éŸ³é¢‘ç¼–è§£ç ç›¸å…³ä»£ç                    |
| 02   | audio_device             | éŸ³é¢‘é‡‡é›†ä¸éŸ³é¢‘æ’­æ”¾ç›¸å…³ä»£ç            |
| 03   | audio_mixer              | æ··éŸ³ç›¸å…³ä»£ç                          |
| 04   | audio_processing         | éŸ³é¢‘å‰åå¤„ç†çš„ç›¸å…³ä»£ç                |
| 05   | bitrate_controller       | ç ç‡æ§åˆ¶ç›¸å…³çš„ä»£ç                    |
| 06   | congestion_controller    | æµæ§åˆ¶ç›¸å…³çš„ä»£ç                      |
| 07   | desktop_capture          | æ¡Œé¢é‡‡é›†ç›¸å…³çš„ä»£ç                    |
| 08   | pacing                   | ç ç‡æ¢æµ‹åŠå¹³æ»‘å¤„ç†ç›¸å…³çš„ä»£ç          |
| 09   | remote_bitrate_estimator | è¿œç«¯ç ç‡ä¼°ç®—ç›¸å…³çš„ä»£ç                |
| 10   | rtp_rtcp                 | rtp/rtcpåè®®ç›¸å…³çš„ä»£ç                |
| 11   | video_capture            | è§†é¢‘é‡‡é›†ç›¸å…³çš„ä»£ç                    |
| 12   | video_coding             | è§†é¢‘ç¼–è§£ç ç›¸å…³çš„ä»£ç                  |
| 13   | video_processing         | è§†é¢‘å‰åå¤„ç†ç›¸å…³çš„ä»£ç ï¼Œä¾‹å¦‚äººè„¸è¯†åˆ« |

(4)TS+Reactç»„ä»¶åº“ï¼šç±» Classï¼Œç¬¬ä¸€éƒ¨åˆ†

* ç±»(Class) : å®šä¹‰äº†ä¸€åˆ‡äº‹ç‰©çš„æŠ½è±¡ç‰¹ç‚¹
* å¯¹è±¡ï¼ˆObjectï¼‰: ç±»çš„å®ä¾‹
* é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€

```bash
# locally in your project
npm i -D ts-node
npm i -D typescript
# or globally with typescript
npm i -g ts-node
npm i -g typescript

# åœ¨æ§åˆ¶å°
ts-node class.ts
```

(5)TS+Reactç»„ä»¶åº“ï¼šç±» Classï¼Œç¬¬äºŒéƒ¨åˆ†ï¼Œä¿®é¥°ç¬¦ publicï¼ˆå…¬å…±å±æ€§ï¼‰ / privateï¼ˆç§æœ‰å±æ€§, å­ç±»æ— æ³•è®¿é—®ï¼‰ / protectedï¼ˆå—ä¿æŠ¤çš„å±æ€§ï¼Œå­ç±»å¯ä»¥è®¿é—®è¯¥å±æ€§ï¼‰; readonly ï¼ˆåªè¯»ä¸å¯å†™å±æ€§ï¼‰

 static è¡¨ç¤ºé™æ€å±æ€§æˆ–æ–¹æ³•ï¼Œæ— éœ€å®ä¾‹åŒ–å³å¯è®¿é—®ï¼Œä¸å®ä¾‹ä¹Ÿæ— å…³ç³»ã€‚

(6)TS+Reactç»„ä»¶åº“ï¼šç±»å’Œæ¥å£

```typescript
interface Radio {
    switchRadio(): void;
}
interface Battery {
    checkBatteryStatus();
}
interface RadioWithBattery extends Radio {
    checkBatteryStatus();
}
class Car implements Radio {
    switchRadio() {

    }
}
class Cellphone implements RadioWithBattery {
    switchRadio() {

    }
    checkBatteryStatus() {

    }
}
```

(7)TS+Reactç»„ä»¶åº“ï¼šæšä¸¾ï¼ˆEnumï¼‰

```typescript
enum Direction {
    Up = 10,
    Down,
    Left,
    Right,
}
console.log(Direction.Up)
console.log(Direction.Down)
console.log(Direction.Left)
console.log(Direction.Right)
console.log(Direction[10])
```

```typescript
enum Direction {
    Up = 'UP',
    Down = 'DOWN',
    Left = 'LEFT',
    Right = 'RIGHT',
}
const value = 'UP'
if (value === Direction.Up) {
    console.log('go up!')
}
```

ä½¿ç”¨å¸¸é‡æšä¸¾å¯ä»¥æå‡æ€§èƒ½ã€‚

```typescript
const enum Direction {
    Up = 'UP',
    Down = 'DOWN',
    Left = 'LEFT',
    Right = 'RIGHT',
}
const value = 'UP'
if (value === Direction.Up) {
    console.log('go up!')
}
```

(7)TS+Reactç»„ä»¶åº“ï¼šæ³›å‹ï¼Œç¬¬ä¸€éƒ¨åˆ†ã€‚æ³›å‹æ˜¯ TS ä¸­æœ€éš¾çš„éƒ¨åˆ†ã€‚

```typescript
function echo<T>(arg: T): T {
    return arg
}
// const str: string = 'str'
const result = echo(123)

function swap<T, U>(tuple: [T, U]): [U, T] {
    return [tuple[1], tuple[0]]
}
// const result2:[number,string]
const result2 = swap(['string', 123]) 
```

æ³›å‹å°±åƒä¸€ä¸ªå ä½ç¬¦æˆ–è€…æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå®šä¹‰å¥½çš„ç±»å‹ï¼Œåƒå‚æ•°ä¸€æ ·ä¼ å…¥ï¼Œç„¶åå®ƒå¯ä»¥åŸå°ä¸å˜çš„è¾“å‡ºã€‚

#### 2021å¹´01æœˆ25æ—¥ å‘¨ä¸€ 05å‘¨

(1) WebRTCå­¦ä¹ ï¼šWebRTCè¿è¡Œæœºåˆ¶ï¼ŒTrack(è½¨) & MediaStreamï¼ˆæµï¼‰

WebRTCé‡è¦çš„ç±»ï¼š

* MediaStream
* RTCPeerConnectionï¼ˆæœ€é‡è¦çš„ç±»ï¼‰
* RTCDataChannelï¼ˆééŸ³è§†é¢‘çš„ç±»ï¼‰

(2)TS+Reactç»„ä»¶åº“ï¼šæ³›å‹-çº¦æŸæ³›å‹

```typescript
// çº¦æŸæ³›å‹-æ–¹æ¡ˆä¸€,è¿”å›ç»“æœåªèƒ½æ˜¯æ•°ç»„
function echoWithArr<T>(arg: T[]): T[] {
    console.log(arg.length)
    return arg
}
const arrs = echoWithArr([1, 2, 3])
// çº¦æŸæ³›å‹-æ–¹æ¡ˆäºŒ,é€šè¿‡ extends å’Œ interface è®¾ç½®çº¦æŸæ¡ä»¶
interface IWithLength {
    length: number;
}
function echoWithLength<T extends IWithLength>(arg: T): T {
    console.log(arg.length)
    return arg
}
const str = echoWithLength('str')
const obj = echoWithLength({ length: 10, width: 10 })
const arr2 = echoWithLength([1, 2, 3])
```

(3)TS+Reactç»„ä»¶åº“ï¼šæ³›å‹-ç±»å’Œæ¥å£

```typescript
// ç±»ä½¿ç”¨æ³›å‹çº¦æŸ
class Queue<T> {
    private data = []
    push(item: T) {
        return this.data.push(item)
    }
    pop(): T {
        return this.data.shift()
    }
}
const queque = new Queue<number>()
queque.push(1)
console.log(queque.pop().toFixed())

const queque2 = new Queue<string>()
queque2.push('str')
console.log(queque2.pop().length)
```

```typescript
// æ¥å£æ·»åŠ æ³›å‹
interface KeyPair<T, U> {
    key: T;
    value: U;
}
let kp1: KeyPair<number, string> = { key: 123, value: 'str' }
let kp2: KeyPair<string, number> = { key: 'test', value: 123 }

let arr: number[] = [1, 2, 3]
let arrTwo: Array<number> = [1, 2, 3]

// inerface æè¿°ä¸€ä¸ªå‡½æ•°çš„type
interface IPlus<T> {
    (a: T, b: T): T
}
function plus(a: number, b: number): number {
    return a + b;
}
function connect(a: string, b: string) {
    return a + b;
}
const a: IPlus<number> = plus
const b: IPlus<string> = connect
```

(4)TS+Reactç»„ä»¶åº“ï¼šç±»å‹åˆ«åå’Œç±»å‹æ–­è¨€

ç±»å‹åˆ«åï¼š

```typescript
// type aliases
type PlusType = (x: number, y: number) => number
function sum(x: number, y: number): number {
    return x + y
}
const sum2: PlusType = sum
// è”åˆç±»å‹ä¸‹çš„ç±»å‹åˆ«å
type NameResolver = () => string
type NameOrResolver = string | NameResolver
function getName(n: NameOrResolver): string {
    if (typeof n === 'string') {
        return n
    } else {
        return n()
    }
}
```

ç±»å‹æ–­è¨€ï¼š

```typescript
// type assertion
function getLength(input: string | number): number {
    const str = input as String
    if (str.length) {
        return str.length
    } else {
        const number = input as Number
        return number.toString().length
    }
}
// æ›´ç®€å•çš„å†™æ³•
// type assertion
function getLength(input: string | number): number {
    if ((<string>input).length) {
        return (<string>input).length
    } else {
        return input.toString().length
    }
}
```

(5)TS+Reactç»„ä»¶åº“ï¼šå£°æ˜æ–‡ä»¶ï¼Œå£°æ˜æ–‡ä»¶é€šå¸¸æ˜¯d.tsåç¼€çš„æ–‡ä»¶ï¼Œä¾‹å¦‚jQquery.d.ts

```bash
npm install --save @types/jquery
```

#### 2021å¹´01æœˆ26æ—¥ å‘¨äºŒ 05å‘¨

(1) WebRTCå­¦ä¹ ï¼šWebæœåŠ¡å™¨å·¥ä½œåŸç†

WebæœåŠ¡å™¨é€‰å‹ï¼š

* Nodejs
* Nginx
* Apache

ä¸¤ä¸ªV8å¼•æ“ï¼šChrome & Node

(2) TS+Reactæ‰“é€ ä¸ªäººç»„ä»¶åº“ï¼šReact ç®€ä»‹å’ŒåŸºç¡€çŸ¥è¯†ï¼Œprops&stateï¼Œç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼ŒçŠ¶æ€æå‡å’Œå•å‘æ•°æ®æµã€‚

(3) TS+Reactæ‰“é€ ä¸ªäººç»„ä»¶åº“ï¼šé…ç½® React å¼€å‘ç¯å¢ƒ

* å®˜æ–¹è„šæ‰‹æ¶å·¥å…·-create-react-app

```bash
npx create-react-app ts-with-react --template typescript
```

npx æ˜¯ä»€ä¹ˆï¼Ÿ

* é¿å…å®‰è£…å…¨å±€æ¨¡å—
* è°ƒç”¨é¡¹ç›®å†…éƒ¨å®‰è£…çš„æ¨¡å—

#### 2021å¹´01æœˆ27æ—¥ å‘¨ä¸‰ 05å‘¨

(1) WebRTCå­¦ä¹ ï¼šNodejsç¯å¢ƒæ­å»º

Nodejs çš„å®‰è£…æ–¹å¼ï¼š1. äºŒè¿›åˆ¶åº“å®‰è£…ï¼›2. æºç å®‰è£…ï¼›

äºŒè¿›åˆ¶åº“å®‰è£…æ­¥éª¤ï¼š

* apt/brew/yum install nodejs
* apt/brew/yum install npm

```bash
apt-cache search nodejs
apt install nodejs
apt install npm
```

æºç å®‰è£…æ­¥éª¤ï¼š

* ä¸‹è½½ Nodejs æºç 
* ç”Ÿæˆ Makefile
* `make -j 4 && sudo make install`

```bash
wget -c https://npm.taobao.org/mirrors/node/v14.15.4/node-v14.15.4.tar.gz
# è§£å‹
tar -zvxf node-v14.15.4.tar.gz
cd node-v14.15.4
ls configure
./configure --prefix=/usr/local/nodejs
```

ï¼ˆ2ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“ï¼šç¬¬ä¸€ä¸ªç»„ä»¶ - tsä¸ºç»„ä»¶åŠ©åŠ›

```typescript
import React from 'react'

interface IHelloProps {
    message?: string;
}
// type React.FC<P = {}> = React.FunctionComponent<P>
const Hello: React.FC<IHelloProps> = (props) => {
    return <h2>{props.message}</h2>
}
Hello.defaultProps = {
    message: 'Hello World'
}
export default Hello
```

ï¼ˆ3ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“ï¼šä»€ä¹ˆæ˜¯å’Œä¸ºä»€ä¹ˆè¦ç”¨ React Hookï¼ŒReact 16.8 å¸¦æ¥çš„æ–°ç‰¹æ€§ï¼Œå³å°†æ›¿ä»£ class ç»„ä»¶çš„å†™æ³•

æ²¡æœ‰ç ´åæ€§æ”¹åŠ¨ï¼š1. å®Œå…¨å¯é€‰ï¼›2. ç™¾åˆ†ç™¾å‘åå…¼å®¹ï¼›3. æ²¡æœ‰è®¡åˆ’ä» React ç§»é™¤ class; 

ä¸ºä»€ä¹ˆç”¨ hookï¼šç»„ä»¶å¾ˆéš¾å¤ç”¨çŠ¶æ€é€»è¾‘ï¼› å¤æ‚ç»„ä»¶éš¾ä»¥ç†è§£ï¼Œå°¤å…¶æ˜¯ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼›React ç»„ä»¶ä¸€ç›´æ˜¯å‡½æ•°ï¼Œä½¿ç”¨ Hook å®Œå…¨æ‹¥æŠ±å‡½æ•°ï¼›

ï¼ˆ4ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“ï¼šåœ¨å‡½æ•°ç»„ä»¶ä½¿ç”¨ state-useState Hook

Hook æ˜¯ä»€ä¹ˆï¼ŸHook æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥é’©ä½ React ç»„ä»¶çš„ç‰¹æ€§; ä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨ useState Hook ? 

```tsx
import React, { useState } from 'react'
const LikeButton: React.FC = () => {
    const [like, setLike] = useState(0)
    const [on, setOn] = useState(true)
    return (
        <>
            <button onClick={() => { setLike(like + 1) }}>
                {like + 1} ğŸ‘
        </button>
            <button onClick={() => { setOn(!on) }}>
                {on ? 'ON' : 'OFF'} ğŸ‘
        </button>
        </>
    )
}
export default LikeButton
```

ï¼ˆ5ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“ï¼šuseEffect ç¬¬ä¸€éƒ¨åˆ†-åˆå‡ºèŒ…åº

* æ— éœ€æ¸…é™¤çš„ Effectï¼Œä¾‹å¦‚å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰‹åŠ¨å˜æ›´DOMï¼Œè®°å½•æ—¥å¿—ï¼›
* éœ€è¦æ¸…é™¤çš„ Effect

useEffect åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“å’Œæ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šæ‰§è¡Œã€‚

ä»£ç æ—¶é—´ï¼šä½¿ç”¨ useEffect å®Œæˆ DOM çš„æ›´æ–°

```tsx
import React, { useState, useEffect } from 'react'
const LikeButton: React.FC = () => {
    const [like, setLike] = useState(0)
    const [on, setOn] = useState(true)
    useEffect(() => {
        document.title = `ç‚¹å‡»äº† ${like} æ¬¡`
    })
    return (
        <>
            <button onClick={() => { setLike(like + 1) }}>
                {like + 1} ğŸ‘
        </button>
            <button onClick={() => { setOn(!on) }}>
                {on ? 'ON' : 'OFF'} ğŸ‘
        </button>
        </>
    )
}
export default LikeButton
```

ï¼ˆ6ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“ï¼šuseEffect ç¬¬äºŒéƒ¨åˆ†-æœ‰å§‹æœ‰ç»ˆ

* éœ€è¦æ¸…é™¤çš„Effect
* ä»£ç æ—¶é—´ï¼šä½¿ç”¨ useEffect å®Œæˆä¸€ä¸ªé¼ æ ‡è·Ÿè¸ªå™¨

```typescript
import React, { useState, useEffect } from 'react'

const MouseTracker: React.FC = () => {
    const [postions, setPositions] = useState({ x: 0, y: 0 })
    useEffect(() => {
        console.log('add effect', postions.x)
        const updateMouse = (e: MouseEvent) => {
            console.log('inner')
            setPositions({ x: e.clientX, y: e.clientY })
        }
        document.addEventListener('click', updateMouse)
        return () => {
            console.log('move effect', postions.x)
            document.removeEventListener('click', updateMouse)
        }
    })
    console.log('before render', postions.x)
    return (
        <p>X: {postions.x} ,Y:{postions.y} </p>
    )
}

export default MouseTracker
```

#### 2021å¹´01æœˆ28æ—¥ å‘¨å›› 05å‘¨

(1) WebRTCå­¦ä¹ ï¼šæœ€ç®€å•çš„ http æœåŠ¡

* require å¼•å…¥ http æ¨¡å—
* åˆ›å»º http æœåŠ¡
* æŒ‡å®šç›‘å¬ç«¯å£

```javascript
// åˆ›å»º http.js
"use strict";
var http = require("http");
var app = http
    .createServer(function(req, res) {
        res.writeHead(200, {
            "Content-Type": "text/plain"
        });
        res.end("Hello World\n");
    })
    .listen(8080, "127.0.0.1");
```

```bash
# è¿è¡Œ http.js çš„ä¸‰ç§æ–¹å¼
# æ–¹å¼ä¸€ï¼Œæ–­å¼€æœåŠ¡åï¼Œæ‰€æœ‰æœåŠ¡ç»ˆæ­¢
node http.js
# æ–¹å¼äºŒï¼Œä¸€ç›´ä¿æŒï¼Œä½†æ—¥å¿—è¾“å‡ºæœ‰é—®é¢˜
nohub node http.js & 
# æ–¹å¼ä¸‰ï¼Œé€šè¿‡ forever,åœ¨åå°å¯åŠ¨æˆ–åœæ­¢ç¨‹åº
forever start http.js
forever stop http.js
```

```bash
npm install forever -g 
```

#### 2021å¹´01æœˆ29æ—¥ å‘¨äº” 05å‘¨

(1) WebRTCå­¦ä¹ ï¼šåˆ›å»º https æœåŠ¡

ä¸ºä»€ä¹ˆè¦ä½¿ç”¨HTTSæœåŠ¡ï¼Ÿ ä¸ªäººéšç§åŠå®‰å…¨é—®é¢˜ï¼›https æ˜¯æœªæ¥çš„è¶‹åŠ¿ï¼›HTTPS = HTTP + TLS/SSL

Nodejs æ­å»º HTTPS æœåŠ¡ï¼Ÿ ç”Ÿæˆ HTTPS è¯ä¹¦ï¼›å¼•å…¥ HTTPS æ¨¡å—ï¼›æŒ‡å®šè¯ä¹¦ä½ç½®ï¼Œå¹¶åˆ›å»º HTTPS æœåŠ¡

```javascript
"use strict";
var https = require("https");
var fs = require("fs");
var options = {
    // è¯ä¹¦çš„åœ°å€
    key: fs.readFileSync("./....xxx.key"),
    cert: fs.readFileSync("./....xxx.pem"),
};
var app = https
    .createServer(options, function(req, res) {
        res.writeHead(200, {
            "Content-Type": "text/plain"
        });
        res.end("HTTPS:Hello World!\n");
    })
    .listen(443, "0,0,0,0");
```

ï¼ˆ2ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“ï¼šuseEffect ç¬¬ä¸‰éƒ¨åˆ†-æ§åˆ¶è¿è¡Œ

```typescript
import React, { useState, useEffect } from 'react'
const LikeButton: React.FC = () => {
    const [like, setLike] = useState(0)
    const [on, setOn] = useState(true)
    useEffect(() => {
        console.log('document title effect is runnning')
        document.title = `ç‚¹å‡»äº† ${like} æ¬¡`
    }, [like, on])
    return (
        <>
            <button onClick={() => { setLike(like + 1) }}>
                {like + 1} ğŸ‘
        </button>
            <button onClick={() => { setOn(!on) }}>
                {on ? 'ON' : 'OFF'} ğŸ‘
        </button>
        </>
    )
}
export default LikeButton
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šè‡ªå®šä¹‰ Hook-é‡æ„ MouseTrackerï¼Œå°†ç»„ä»¶é€»è¾‘æŠ½å–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­; è‡ªå®šä¹‰ hooks å‡½æ•°å¿…é¡»ä½¿ç”¨ `use` å¼€å¤´

```tsx
import React, { useState, useEffect } from 'react'
const useMousePositon = () => {
    const [positions, setPositions] = useState({ x: 0, y: 0 })
    useEffect(() => {
        console.log('add effect', positions.x)
        const updateMouse = (e: MouseEvent) => {
            setPositions({ x: e.clientX, y: e.clientY })
        }
        document.addEventListener('mousemove', updateMouse)
        return () => {
            console.log('move effect', positions.x)
            document.removeEventListener('mousemove', updateMouse)
        }
    }, [])
    return positions
}
export default useMousePositon
```

(4)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šè‡ªå®šä¹‰ Hook ç¬¬äºŒéƒ¨åˆ†-HOCçš„åŠ£åŠ¿

* é«˜é˜¶ç»„ä»¶å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚

#### 2021å¹´01æœˆ31æ—¥ å‘¨æ—¥ 05å‘¨

(1)WebRTCå­¦ä¹ ï¼šçœŸæ­£çš„WebæœåŠ¡å™¨ï¼Œæ—¢æ”¯æŒhttpåˆæ”¯æŒhttps

* å¼•å…¥expressæ¨¡å—
* å¼•å…¥server-indexæ¨¡å—
* æŒ‡å®šå‘å¸ƒç›®å½•

```bash
npm i express@4.16.4 serve-index@1.9.1 --save
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šè‡ªå®šä¹‰hookç¬¬ä¸‰éƒ¨åˆ†-æ­£ç¡®çš„æ–¹å¼å®Œæˆ URLLoader

```typescript
import { useState, useEffect } from 'react'
import axios from 'axios'

const useURLLoader = (url: string, deps: any[] = []) => {
    const [data, setData] = useState<any>(null)
    const [loading, setLoading] = useState(false)
    useEffect(() => {
        setLoading(true)
        axios.get(url).then(result => {
            setData(result.data)
            setLoading(false)
        })
    }, deps)
    return [data, loading]
}
export default useURLLoader
```

 å¯ä»¥å°†é€»è¾‘ä¸Šé‡å¤çš„ä»£ç æå–åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œåƒè°ƒç”¨ä¸€ä¸ªå‡½æ•°ä¸€æ ·è°ƒç”¨ hooksï¼Œä½¿ç”¨hooksè¿”å›ç»“æœï¼Œåšæˆ‘ä»¬æƒ³åšçš„ã€‚

(3)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šuseRef - stateé‡åˆ°çš„éš¾é¢˜

åœ¨ä»»æ„ä¸€æ¬¡æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œprops å’Œ state å§‹ç»ˆæ˜¯ä¿æŒä¸å˜çš„ï¼Œå¦‚æœ props å’Œ state åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œé‚£ä¹ˆä½¿ç”¨åˆ°å®ƒä»¬çš„ä»»ä½•å€¼ï¼Œä¹Ÿéƒ½æ˜¯ç‹¬ç«‹çš„ã€‚useRef æ˜¯è®©ä¸åŒçš„æ¸²æŸ“ä¹‹é—´äº§ç”Ÿè”ç³»çš„ hook å‡½æ•°ã€‚

(4)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šuseRef - å¤šæ¬¡æ¸²æŸ“ä¹‹é—´çš„çº½å¸¦

ä¿®æ”¹ ref çš„å€¼ï¼Œç»„ä»¶ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼›

#### 2021å¹´02æœˆ01æ—¥ å‘¨ä¸€ 06å‘¨

(1)WebRTCå­¦ä¹ ï¼šJavaScript è°ƒè¯•æ–¹æ³•

```javascript
// google demo
https: //appr.tc
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šuseContext-è§£å†³å¤šå±‚ä¼ é€’å±æ€§çš„çµä¸¹å¦™è¯

context æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶é—´å…±äº«å±æ€§çš„æ–¹å¼ï¼Œè€Œä¸å¿…é€šè¿‡ç»„ä»¶æ ‘çš„å½¢å¼ï¼Œé€šè¿‡æ¯ä¸ªå±‚çº§æ˜¾ç¤ºçš„ä¼ é€’ propsã€‚context çš„è®¾è®¡æ˜¯ä¸ºäº†å…±äº«å¯¹äºç»„ä»¶æ ‘è€Œè¨€æ˜¯å…¨å±€çš„æ•°æ®ã€‚

```typescript
// App.tsx
export const ThemeContext = React.createContext(themes.light)
<ThemeContext.Provider value={themes.dark}></ThemeContext.Provider>

// LikeButton.tsx
import React, { useState, useEffect, useRef, useContext } from 'react'
const theme = useContext(ThemeContext)
    console.log(theme)
    const style = {
        background: theme.background,
        color: theme.color
    }
```

#### 2021å¹´02æœˆ03æ—¥ å‘¨ä¸‰ 06å‘¨

(1) WebRTCå­¦ä¹ ï¼šå˜é‡ä¸åŸºæœ¬è¿ç®—

åŸºç¡€çŸ¥è¯†ï¼šå˜é‡ä¸ç±»å‹ã€forå¾ªç¯ã€åŸºæœ¬è¿ç®—ã€å‡½æ•°ã€if/elseã€æ—¥å¿—æ‰“å°

**å˜é‡ä¸ç±»å‹**

|          | javascript          | Cè¯­è¨€                    |
| -------- | ------------------- | ------------------------ |
| å®šä¹‰å˜é‡ | `var a;` ; `let a;` | `int a;` |
| å¸ƒå°”     | `true` or `false` | `1` or `0` |
| å­—ç¬¦ä¸²   | `'hello world'` | `char str="hello world"` |
| æ•°ç»„     | `[1,5.1,'  hw']` | `Int arr[]= {1,5,6}` |
| ç©º       | `null` , `undefined` | `NULL` , `0` |

**åŸºæœ¬è¿ç®—**

|          | javascript      | Cè¯­è¨€           |
| -------- | --------------- | --------------- |
| ç®—æ•°è¿ç®— | `+, -, *, / ,%` | `+, -, *, / ,%` |
| æ¯”è¾ƒè¿ç®— | `>,<,!=,==,===` | `>,<,!=,==` |
| é€»è¾‘è¿ç®— | `&&,||,!` | `&&,||,!` |

#### 2021å¹´02æœˆ04æ—¥ å‘¨å›› 06å‘¨

(1) WebRTCå­¦ä¹ ï¼šåˆ¤æ–­å¾ªç¯ä¸å‡½æ•°

|                  | javascript                               | Cè¯­è¨€              |
| ---------------- | ---------------------------------------- | ------------------ |
| `if ... else` | `if (){} else if(){} else{}` | åŒ javascript ä¸€æ · |
| `switch ...case` | `switch case` | åŒ javascript ä¸€æ · |
| `for` | `for(...){}` | åŒ javascript ä¸€æ · |
| `for ...in` | `for(var i in arr){console.log(arr[i])}` | æ—                  |
| `while` | `while(){}` | åŒ javascript ä¸€æ · |

**å‡½æ•°**

|          | javascript                          | Cè¯­è¨€                          |
| -------- | ----------------------------------- | ------------------------------ |
| å‡½æ•°å®šä¹‰ | `function func(...){...return ret}` | `int func(...){...return ret}` |
| ç®­å¤´å‡½æ•° | `()=>{...}` | æ—                              |

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šhook è§„åˆ™å’Œå…¶ä»– hook

* åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ hook
* åªåœ¨Reactå‡½æ•°ä¸­è°ƒç”¨ hook

å…¶ä»– hook : useReducer, useCallback

(3)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šç»„ä»¶åº“èµ·èˆª-éœ€æ±‚åˆ†æ

å®Œæˆä¸€ä¸ªç»„ä»¶åº“éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼Ÿ

* ä»£ç ç»“æ„

* æ ·å¼è§£å†³æ–¹æ¡ˆ

* ç»„ä»¶éœ€æ±‚åˆ†æå’Œç¼–ç 

* ç»„ä»¶æµ‹è¯•ç”¨ä¾‹åˆ†æå’Œç¼–ç 

* ä»£ç æ‰“åŒ…è¾“å‡ºå’Œå‘å¸ƒ

* CI/CDï¼Œæ–‡æ¡£ç”Ÿæˆç­‰ç­‰

åˆå§‹åŒ–ç»„ä»¶é¡¹ç›®

  

```bash
npx create-react-app jerrychaneui --template typescript
```

####  2021å¹´02æœˆ05æ—¥ å‘¨äº” 06å‘¨

 (1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ–‡ä»¶ç»“æ„å’Œä»£ç è§„èŒƒ

ä¸€ç§æ˜¯æŒ‰ç…§åŠŸèƒ½å’Œè·¯ç”±ï¼›ä¸€ç§æ˜¯æŒ‰ç…§æ–‡ä»¶ç±»å‹ï¼›å°½å¯èƒ½ç®€å•ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨çš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹

```
jerrychaneui/
	README.md
	node_modules
	package.json
	tsconfig.json
	src/
		components/
			Button/
				button.tsx
				button.test.tsx
				style.scss
    styles/
    	...
    index.tsx
```

ä»£ç è§„èŒƒ: 2.0.4 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œä¸éœ€è¦ç‰¹æ®Šé…ç½®ï¼Œé»˜è®¤æ”¯æŒ `typescript` è¯­æ³•æ£€æŸ¥ï¼Œéœ€å®‰è£… `eslint` æ’ä»¶ã€‚

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ ·å¼è§£å†³æ–¹æ¡ˆåˆ†æ

* Inline CSS(æ€§èƒ½æœ€å¥½)

```jsx
const divStyle = {
  color:'blue',
  backgroundImg:'url('+imgUrl+')',
}
function HelloComponent(){
  return <div style={style}>Hello</div>
}
```

* CSS in JS

* Style Component

* Sass / Less(æœ¬é¡¹ç›®æ¨è)

æ ·å¼æ–‡ä»¶ç³»ç»Ÿç»“æ„ï¼š

```
styles/
	_variables.scss(å„ç§å˜é‡ä»¥åŠå¯é…ç½®è®¾ç½®)
	_mixins.scss(å…¨å±€ mixins)
	_functions.scss(å…¨å±€ functions)
components/
	Button/
		style.scss(å•ç»„ç»‡æ–‡ä»¶çš„æ ·å¼)
		...
```

(3) WebRTCå­¦ä¹ ï¼šWebRTCè·å–éŸ³è§†é¢‘è®¾å¤‡

API: enumerateDevices()

**åŸºæœ¬æ ¼å¼**

```javascript
var ePromise = navigator.mediaDevices.enumerateDevices();
```

è¿”å›å€¼æ˜¯ä¸€ä¸ª Promise

**MediaDevicesInfo**

MediaDevicesInfo ä¸­å­˜æ”¾äº†è®¸å¤šéŸ³è§†é¢‘ç›¸å…³çš„ä¿¡æ¯ï¼›

| å±æ€§     | è¯´æ˜                                      |
| -------- | ----------------------------------------- |
| deviceID | è®¾å¤‡ID                                    |
| label    | è®¾å¤‡çš„åå­—                                |
| kind     | è®¾å¤‡çš„ç§ç±»                                |
| groupID  | ä¸¤ä¸ªè®¾å¤‡GroupIDç›¸åŒï¼Œè¯´æ˜æ˜¯åŒä¸€ä¸ªç‰©ç†è®¾å¤‡ |

**JavaScript ä¸­çš„ Promise**

(4) WebRTCå­¦ä¹ ï¼šåœ¨é¡µé¢ä¸­æ˜¾ç¤ºè·å–åˆ°çš„è®¾å¤‡

```javascript
// js/client.js
"use strict";
var audioSource = document.querySelector("select#audioSource");
var audioOutput = document.querySelector("select#audioOutput");
var videoSource = document.querySelector("select#videoSource");

if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
    console.log("enumerateDevices is not supported!");
} else {
    navigator.mediaDevices.enumerateDevices().then(gotDevice).catch(handleError);
}

function gotDevice(deviceInfos) {
    deviceInfos.forEach((deviceInfo) => {
        var option = document.createElement("option");
        option.text = deviceInfo.label;
        option.value = deviceInfo.deviceId;
        if (deviceInfo.kind === "audioinput") {
            audioSource.appendChild(option);
        } else if (deviceInfo.kind === "audiooutput") {
            audioOutput.appendChild(option);
        } else if (deviceInfo.kind === "videoinput") {
            videoSource.appendChild(option);
        }
    });
}

function handleError(error) {
    console.log(error.name + " : " + error.message);
}
```

#### 2021å¹´02æœˆ07æ—¥ å‘¨æ—¥ 06å‘¨

(1) WebRTCå­¦ä¹ ï¼šWebRTC éŸ³è§†é¢‘æ•°æ®é‡‡é›†

åŸºæœ¬æ ¼å¼ï¼š

```javascript
var promise = navigator.mediaDevices.getUserMedia(constraints)
```

MediaStreamConstrains:

```javascript
dictionary MediaStreamConstraints {
    (boolean or MediaTrackConstraints) video = false;
    (boolean or MediaTrackConstraints) audio = false;
}
```

```javascript
// js/client
"use strict";
var videoplay = document.querySelector("video#player");

function gotMediaStream(stream) {
    videoplay.srcObject = stream;
}

function handleError(error) {
    console.log("getUserMedia error:", error);
}

if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
    console.log("getUserMedia is not supported");
} else {
    var constraints = {
        video: true,
        audeo: true,
    };
    navigator.mediaDevices
        .getUserMedia(constraints)
        .then(gotMediaStream)
        .catch(handleError);
}
```

(2) WebRTCå­¦ä¹ ï¼šæµè§ˆå™¨é€‚é…æ–¹æ³• WebRTC_API é€‚é…

getUserMedia é€‚é…ï¼š

* W3C è§„èŒƒä¸­ï¼šgetUserMedia
* Chrome: webkitGetUserMedia
* Firefox: mozGetUserMedia

è‡ªå·±å®ç°ï¼š

```javascript
var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
```

ä½¿ç”¨ Google å¼€æºåº“ adapter.js, é€‚é…ä¸åŒæµè§ˆå™¨çš„ API

```
https://webrtc.github.io/adapter/adapter-latest.js
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ·»åŠ è‡ªå·±çš„è‰²å½©ä½“ç³»

åˆ›å»ºè‡ªå·±ç»„ä»¶åº“çš„è‰²å½©ä½“ç³»

* ç³»ç»Ÿè‰²æ¿ - åŸºç¡€è‰²æ¿ + ä¸­æ€§è‰²æ¿
* äº§å“è‰²æ¿ - å“ç‰Œè‰² + åŠŸèƒ½è‰²æ¿

Bootstrap çš„è‰²å½©ä½“ç³»

* #0275d8 (è“è‰²)ã€#5cb85c(ç»¿è‰²)ã€#5bc0de(æµ…è“)ã€#f0ad4e(æ©™è‰²)ã€#d9534f(çº¢è‰²)ã€#292b2c(é»‘è‰²)ã€#f7f7f7(ç™½è‰²)

æˆ‘ä»¬ç»„ä»¶åº“çš„è‰²å½©ä½“ç³»

* #0d6efd (è“è‰²)ã€#6c757d(é»‘è‰²)ã€#52c41a(ç»¿è‰²)ã€#fadb14(æ©™è‰²)ã€#dc3545(çº¢è‰²)ã€#17a2b8(é»‘è‰²)

```shell
npm i node-sass --save
```

(4)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ·»åŠ å­—ä½“å˜é‡è§£å†³æ–¹æ¡ˆ

ç»„ä»¶åº“æ ·å¼å˜é‡åˆ†ç±»ï¼š1-åŸºç¡€è‰²å½©ç³»ç»Ÿï¼›2-å­—ä½“ç³»ç»Ÿï¼›3-è¡¨å•ï¼›4-æŒ‰é’®ï¼›5-è¾¹æ¡†å’Œé˜´å½±ï¼›6-å¯é…ç½®å¼€å…³

#### 2021å¹´02æœˆ08æ—¥ å‘¨ä¸€ 07å‘¨

(1) WebRTCå­¦ä¹ ï¼šå®‰å…¨ç®¡ç†-è·å–éŸ³è§†é¢‘è®¾å¤‡çš„è®¿é—®æƒé™

```javascript
"use strict";
var videoplay = document.querySelector("video#player");
let audioSource = document.querySelector("select#audioSource");
let audioOutput = document.querySelector("select#audioOutput");
let videoSource = document.querySelector("select#videoSource");

function gotDevices(deviceInfos) {
    deviceInfos.forEach((deviceInfo) => {
        let option = document.createElement("option");
        option.text = deviceInfo.label;
        option.value = deviceInfo.deviceId;
        if (deviceInfo.kind === "audioinput") {
            audioSource.appendChild(option);
        } else if (deviceInfo.kind === "audiooutput") {
            audioOutput.appendChild(option);
        } else if (deviceInfo.kind === "videoinput") {
            videoSource.appendChild(option);
        }
    });
}

function gotMediaStream(stream) {
    videoplay.srcObject = stream;
    return navigator.mediaDevices.enumerateDevices();
}

function handleError(error) {
    console.log("getUserMedia error:", error);
}

if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
    console.log("getUserMedia is not supported");
} else {
    var constraints = {
        video: true,
        audio: true,
    };
    navigator.mediaDevices
        .getUserMedia(constraints)
        .then(gotMediaStream)
        .then(gotDevices)
        .catch(handleError);
}
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šåˆæ¬¡äº®ç›¸-æ·»åŠ normalize.css

```
https://github.com/necolas/normalize.css
```

#### 2021å¹´02æœˆ09æ—¥ å‘¨äºŒ 07å‘¨

(1) WebRTCå­¦ä¹ ï¼šè§†é¢‘å‚æ•°è°ƒæ•´-è§†é¢‘çº¦æŸï¼ŒWebRTC éŸ³è§†é¢‘é‡‡é›†çº¦æŸ

* width / height / aspectRatio(æ¯”ä¾‹) / frameRate(å¸§ç‡) 
* facingMode(user: å‰ç½®æ‘„åƒå¤´ï¼›environment: åç½®æ‘„åƒå¤´ï¼›left: å‰ç½®å·¦æ‘„åƒå¤´ï¼›right: å‰ç½®å³æ‘„åƒå¤´)
* resizeMode: ç”»é¢æ˜¯å¦éœ€è¦è£å‰ª

#### 2021å¹´02æœˆ10æ—¥ å‘¨ä¸‰ 07å‘¨

(1)WebRTCå­¦ä¹ ï¼šè§†é¢‘å‚æ•°è°ƒæ•´-è§†é¢‘çº¦æŸï¼ŒWebRTC éŸ³è§†é¢‘é‡‡é›†çº¦æŸ

```javascript
var constraints = {
    video: {
        width: {
            min: 480,
            max: 640
        },
        height: {
            min: 240,
            max: 320
        },
        frameRate: {
            min: 15,
            max: 30
        },
        facingMode: "environment",
    },
    audio: false,
};
```

(2)WebRTCå­¦ä¹ ï¼šéŸ³é¢‘å‚æ•°è°ƒæ•´-éŸ³é¢‘çº¦æŸ

* volume(éŸ³é‡):0-1.0
* sampleRate(é‡‡æ ·ç‡)ï¼š48000, 32000, 8000
* sampleSize(é‡‡æ ·å¤§å°)ï¼š16ä½å³2å­—èŠ‚
* echoCancellation(å›éŸ³)ï¼štrue || fasle
* autoGainControl(è‡ªåŠ¨å¢ç›Š): true || fasle
* noiseSuppression(é™å™ª): true || fasle
* latency(å»¶è¿Ÿå¤§å°):200msä»¥å†…æ˜¯æœ€å¥½çš„
* channelCount(å•åŒå£°é“)
* deviceIDã€groupID

#### 2021å¹´02æœˆ12æ—¥ å‘¨äº” 07å‘¨

do nothing

#### 2021å¹´02æœˆ14æ—¥ å‘¨æ—¥ 07å‘¨

do nothing

#### 2021å¹´02æœˆ15æ—¥ å‘¨ä¸€ 08å‘¨

(1)WebRTCå­¦ä¹ ï¼šè§†é¢‘ç‰¹æ•ˆ

* CSS filter, -webkit-filter/filter
* å¦‚ä½•å°† video ä¸ filter å…³è”
* OpenGL/Metal/ ...

æ”¯æŒçš„ç‰¹æ•ˆç±»å‹ï¼š

| ç‰¹æ•ˆ       | è¯´æ˜     | ç‰¹æ•ˆ        | è¯´æ˜   |
| ---------- | -------- | ----------- | ------ |
| grayscale  | ç°åº¦     | opacity     | é€æ˜åº¦ |
| sepia      | è¤è‰²     | brightness  | äº®åº¦   |
| saturate   | é¥±å’Œåº¦   | contrast    | å¯¹æ¯”åº¦ |
| hue-rotate | è‰²ç›¸æ—‹è½¬ | blur        | æ¨¡ç³Š   |
| invert     | åè‰²     | drop-shadow | é˜´å½±   |

#### 2021å¹´02æœˆ16æ—¥ å‘¨äºŒ 08å‘¨

do nothing

#### 2021å¹´02æœˆ17æ—¥ å‘¨ä¸‰ 08å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ·»åŠ  normalize.css

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šButton ç»„ä»¶éœ€æ±‚åˆ†æ

* ä¸åŒçš„ Button Type: Primary, Default, Danger, Link Button; 
* ä¸åŒçš„ Button Size: Normal, Small, Large; 
* Disable çš„çŠ¶æ€ï¼šDisabled(æ™®é€šçš„ä¸å¯ç”¨), Link Button(é“¾æ¥çš„ä¸å¯ç”¨); 

```jsx
<Button
  size="lg"
  type="primary"
  disabled
  href="" ?
  className="" ?
  autoFocus="" ?
  ...
  >
  JerryChane Button
</Button>
```

(3)WebRTCå­¦ä¹ ï¼šä»è§†é¢‘ä¸­è·å–å›¾ç‰‡

1ã€æ‹¿åˆ°éŸ³è§†é¢‘æµ
2ã€ç‚¹å‡»buttonæ‹¿åˆ°è¯¥å¸§
3ã€ä½¿ç”¨canvasè¾“å‡ºæˆå›¾ç‰‡

(4)WebRTCå­¦ä¹ ï¼šåªé‡‡é›†éŸ³é¢‘æ•°æ®

#### 2021å¹´02æœˆ18æ—¥ å‘¨å›› 08å‘¨

(1) WebRTCå­¦ä¹ ï¼šMediaStreamAPIåŠè·å–è§†é¢‘çº¦æŸ

MediaStreamAPI

* MediaStream.addTrack()
* MediaStream.removeTrack()
* MediaStream.getVedeoTracks()
* MediaStream.getAudioTracks()

MediaStream äº‹ä»¶API

* MediaStream.onaddtrack
* MediaStream.onremovetrack
* MediaStream.onended

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šButton ç»„ä»¶ç¼–ç ç¬¬ä¸€éƒ¨åˆ†

```bash
npm install classnames --save
npm install @types/classnames --save
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ·»åŠ  Button åŸºæœ¬æ ·å¼

#### 2021å¹´02æœˆ19æ—¥ å‘¨äº” 08å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šå‡çº§ Button ç»„ä»¶æ ·å¼

```scss
/*_mixin.scss*/
@mixin button-size($padding-y, $padding-x, $font-size, $border-radius) {
    padding: $padding-y $padding-x;
    font-size: $font-size;
    border-radius: $border-radius;
}

@mixin button-style($background,
    $border,
    $color,
    $hover-background:lighten($background, 7.5%),
    $hover-border:lighten($border, 10%),
    $hover-color: $color) {
    color: $color;
    background: $background;
    border-color: $border;

    &:hover {
        color: $hover-color;
        background: $hover-background;
        border-color: $hover-border;
    }

    &:focus,
    &.focus {
        color: $hover-color;
        background: $hover-background;
        border-color: $hover-border;
    }

    &:disabled,
    &.disabled {
        color: $color;
        background: $background;
        border-color: $border;
    }
}
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šç²¾ç›Šæ±‚ç²¾ - Buton ç»„ä»¶ç¼–ç ç¬¬äºŒéƒ¨åˆ†

```tsx
// è·å–æŒ‰é’®ä¸Šçš„å±æ€§ï¼Œå¹¶åˆå¹¶
type NativeButtonProps = BaseButtonProps & React.ButtonHTMLAttributes<HTMLElement>
// è·å–é“¾æ¥ä¸Šçš„å±æ€§ï¼Œå¹¶åˆå¹¶
type AnchorButtonProps = BaseButtonProps & React.AnchorHTMLAttributes<HTMLElement>
// åˆå¹¶æ‰€æœ‰å±æ€§ï¼Œå¹¶å¯¼å‡º
export type ButtonProps = Partial<NativeButtonProps & AnchorButtonProps>
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šä¸ºä»€ä¹ˆè¦æœ‰æµ‹è¯•

å›½å†…äº’è”ç½‘æµ‹è¯•ç°çŠ¶

* é‡è§†ç¨‹åº¦ä¸¥é‡ä¸è¶³ ã€ æ²¡æœ‰æ—¶é—´ã€ä¸ä¼šå†™æµ‹è¯•

æµ‹è¯•çš„é‡è¦æ€§

* é«˜è´¨é‡çš„ä»£ç ã€æ›´æ—©çš„å‘ç° Bug, å‡å°‘æˆæœ¬ã€è®©é‡æ„å’Œå‡çº§å˜å¾—æ›´åŠ å®¹æ˜“å’Œå¯é ã€è®©å¼€å‘æµç¨‹æ›´åŠ æ•æ·

æµ‹è¯•é‡‘å­—å¡”

* ä»ä¸‹åˆ°ä¸Šï¼šUnit => Service => UI

React ç»„ä»¶ç‰¹åˆ«é€‚åˆå†™å•å…ƒæµ‹è¯•

* Component ç»„ä»¶åŒ–ã€ Function å‡½æ•° ã€å•å‘æ•°æ®æµ

#### 2021å¹´02æœˆ20æ—¥ å‘¨å…­ 08å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šé€šç”¨æµ‹è¯•æ¡†æ¶ Jest å‡ºåœº

creat-react-app è„šæ‰‹æ¶å†…ç½®äº† jest ï¼Œå¯ä»¥ä½¿ç”¨ `npx jest aaa.js --watch` , æ¥æµ‹è¯•

```javascript
test("test common matcher", () => {
    expect(2 + 2).toBe(4);
    expect(2 + 2).not.toBe(5);
});

test("test to be true or false", () => {
    expect(1).toBeTruthy();
    expect(0).toBeFalsy();
});

test("test number", () => {
    expect(4).toBeGreaterThan(3);
    expect(2).toBeLessThan(3);
});
// toBe è¡¨ç¤ºå®Œå…¨ç›¸åŒï¼Œç›¸å½“äº === toEqual ç›¸å½“äº ==
test("test object", () => {
    // expect({ name: "jerrychane" }).toBe({ name: "jerrychane" });
    expect({
        name: "jerrychane"
    }).toEqual({
        name: "jerrychane"
    });
});
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šReact æµ‹è¯•å·¥å…· - react-testing-library

```tsx
// jerrychaneui/src/components/Button/button.test.tsx
import React from 'react'
import { render } from '@testing-library/react'
import Button from './button'

test('our first react test case', () => {
    const wrapper = render(<Button>Nice</Button>)
    const element = wrapper.queryByText('Nice')
    expect(element).toBeTruthy()
})
```

è¿è¡Œæµ‹è¯•æ–‡ä»¶ï¼š `npm  run test`

(3)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ·»åŠ Button æµ‹è¯•ä»£ç  ç¬¬ä¸€éƒ¨åˆ†

```tsx
// jerrychaneui/src/components/Button/button.test.tsx
describe('test Button component', () => {
    it('should render the correct  default button', () => {
        const wrapper = render(<Button>Nice</Button>)
        const element = wrapper.getByText('Nice')
        expect(element).toBeInTheDocument()
        expect(element.tagName).toEqual('BUTTON')
        expect(element).toHaveClass('btn btn-default')
    })
    it('should render the correct component based on different props', () => {

    })
    it('should render a link when btnType equals link and href is provided', () => {

    })
    it('should render disabled button when disabled set to true', () => {

    })
})
```

(4)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ·»åŠ Button æµ‹è¯•ä»£ç  ç¬¬äºŒéƒ¨åˆ†

```tsx
// jerrychaneui/src/components/Button/button.test.tsx
import React from 'react'
import { render, fireEvent } from '@testing-library/react'
import Button, { ButtonProps, ButtonSize, ButtonType } from './button'

const defaultProps = {
    onClick: jest.fn()
}

const testProps: ButtonProps = {
    btnType: ButtonType.Primary,
    size: ButtonSize.Large,
    className: 'klass'
}
const disabledProps: ButtonProps = {
    disabled: true,
    onClick: jest.fn()
}

describe('test Button component', () => {
    it('should render the correct  default button', () => {
        const wrapper = render(<Button {...defaultProps}>Nice</Button>)
        const element = wrapper.getByText('Nice') as HTMLButtonElement
        expect(element).toBeInTheDocument()
        expect(element.tagName).toEqual('BUTTON')
        expect(element).toHaveClass('btn btn-default')
        expect(element.disabled).toBeFalsy()
        fireEvent.click(element)
        expect(defaultProps.onClick).toBeCalled()
    })
    it('should render the correct component based on different props', () => {
        const wrapper = render(<Button {...testProps}>Nice</Button>)
        const element = wrapper.getByText('Nice')
        expect(element).toBeInTheDocument()
        expect(element).toHaveClass('btn-primary btn-lg klass')
    })
    it('should render a link when btnType equals link and href is provided', () => {
        const wrapper = render(<Button btnType={ButtonType.Link} href="https://jerrychane.com" >Link</Button>)
        const element = wrapper.getByText('Link')
        expect(element).toBeInTheDocument()
        expect(element.tagName).toEqual('A')
        expect(element).toHaveClass('btn btn-link')
    })
    it('should render disabled button when disabled set to true', () => {
        const wrapper = render(<Button {...disabledProps}>Nice</Button>)
        const element = wrapper.getByText('Nice') as HTMLButtonElement
        expect(element).toBeInTheDocument()
        expect(element.disabled).toBeTruthy()
        fireEvent.click(element)
        expect(disabledProps.onClick).not.toHaveBeenCalled()
    })
})
```

#### 2021å¹´02æœˆ21æ—¥ å‘¨æ—¥ 08å‘¨

do nothing

#### 2021å¹´02æœˆ22æ—¥ å‘¨ä¸€ 09å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šMenu ç»„ä»¶éœ€æ±‚åˆ†æ

ä»¥ä¸‹å‡ä¸ºä¼ªä»£ç ï¼š

```js
// ä¸€ä¸ªä¸é‚£ä¹ˆå®Œç¾çš„è§£å†³æ–¹æ¡ˆ
const items = [{
            disabled: false,
            element: ( < a > title < /a>)}, {
                    disabled: true,
                    element: 'cool link'
                }] <
                Menu defaultIndex = {
                    0
                }
            items = {
                items
            }
            onSelect = {}
            mode = "vertical" > < /Menu>
```

```js
// æ›´åŠ è¯­ä¹‰åŒ–ï¼Œæ›´åƒ HTML çš„è§£å†³æ–¹æ¡ˆ
<
Menu defaultIndex = {
    0
}
onSelect = {}
mode = "vertical" >
    <
    Menu.item > title one < /Menu.item> <
    Menu.item disabled > disabled link < /Menu.item> <
    Menu.item > < a href = "https://www.google.com" > Google! < /a></Menu.item >
    <
    /Menu>
// å±æ€§åˆ†æ
interface MenuProps {
    activeIndex: number;
    mode: string; // æŸç§å¸¸é‡
    onSelect: (selectedIndex: number) => voild
    className: string;
}
interface MenuItemProps {
    index: number;
    disabled: boolean;
    className: string;
}
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šåŸºç¡€æ¶æ„ - Menuç»„ä»¶ç¼–ç ç¬¬ä¸€éƒ¨åˆ†

```tsx
import React from 'react'
import classNames from 'classnames'

type MenuMode = 'horizontal' | 'vertical'
export interface MenuProps {
    defaultIndex?: number;
    className?: string;
    mode?: MenuMode;
    style?: React.CSSProperties;
    onSelect?: (selectedIndex: number) => void
}

const Menu: React.FC<MenuProps> = (props) => {
    const { defaultIndex, className, mode, style, children } = props
    const classes = classNames('jerrychane-menu', className, {
        'menu-vertical': mode === 'vertical'
    })
    return (
        <ul className={classes} style={style}>
            {children}
        </ul>
    )
}

Menu.defaultProps = {
    defaultIndex: 0,
    mode: 'horizontal'
}

export default Menu;
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šéœ€æ±‚å‡çº§ - Menu ç»„ä»¶ç¼–ç ç¬¬äºŒéƒ¨åˆ†

#### 2021å¹´02æœˆ23æ—¥ å‘¨äºŒ  09å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ·»åŠ  Menu æ ·å¼

```html
https://css-tricks.com/snippets/css/a-guide-to-flexbox/
```

#### 2021å¹´02æœˆ24æ—¥ å‘¨ä¸‰  09å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæµ‹è¯•é©±åŠ¨-Menu æµ‹è¯•æ·»åŠ 

```tsx
//jerrychaneui/src/components/Menu/menu.test.tsx
import React from 'react'
import { cleanup, fireEvent, render, RenderResult } from '@testing-library/react'
import Menu, { MenuProps } from './menu'
import MenuItem from './menuItem'

const testProps: MenuProps = {
    defaultIndex: 0,
    onSelect: jest.fn(),
    className: 'test'
}

const testVerticalProps: MenuProps = {
    defaultIndex: 0,
    mode: 'vertical'
}

const generateMenu = (props: MenuProps) => {
    return (
        <Menu {...props}>
            <MenuItem index={0}>active</MenuItem>
            <MenuItem disabled index={1}>disabled</MenuItem>
            <MenuItem index={2}>xyz</MenuItem>
        </Menu>
    )
}
let wrapper: RenderResult, menuElement: HTMLElement, activeElement: HTMLElement, disabledElement: HTMLElement
describe('test Menu and MenuItem component', () => {
    beforeEach(() => {
        wrapper = render(generateMenu(testProps))
        menuElement = wrapper.getByTestId('test-menu')
        activeElement = wrapper.getByText('active')
        disabledElement = wrapper.getByText('disabled')
    })
    it('should render correct Menu and MenuItem based default props', () => {
        expect(menuElement).toBeInTheDocument()
        expect(menuElement).toHaveClass('viking-menu test')
        expect(menuElement.getElementsByTagName('li').length).toEqual(3)
        expect(activeElement).toHaveClass('menu-item is-active')
        expect(disabledElement).toHaveClass('menu-item is-disabled')

    })
    it('click items should change active and call the right callback', () => {
        const thirdItem = wrapper.getByText('xyz')
        fireEvent.click(thirdItem)
        expect(thirdItem).toHaveClass('is-active')
        expect(activeElement).not.toHaveClass('is-active')
        expect(testProps.onSelect).toHaveBeenCalledWith(2)
        fireEvent.click(disabledElement)
        expect(disabledElement).not.toHaveClass('is-active')
        expect(testProps.onSelect).not.toHaveBeenCalledWith(1)
    })
    it('should render vertical mode when mode is set to vertical', () => {
        cleanup()
        const wrapper = render(generateMenu(testVerticalProps))
        const menuElement = wrapper.getByTestId('test-menu')
        expect(menuElement).toHaveClass('menu-vertical')
    })
})
```

#### 2021å¹´02æœˆ25æ—¥ å‘¨å››  09å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ—¥è¶‹å®Œç¾ - Menu ç»„ä»¶ç¼–ç ç¬¬ä¸‰éƒ¨åˆ†

```tsx
 const renderChildren = () => {
        return React.Children.map(children, (child, index) => {
            const childElement = child as React.FunctionComponentElement<MenuItemProps>
            const { displayName } = childElement.type
            if (displayName === "MenuItem") {
                return React.cloneElement(childElement, { index })
            } else {
                console.error('Warning: Menu has a child which is not a MenuItem component!')
            }
        })
    }
    return (
        <ul className={classes} style={style} data-testid="test-menu">
            <MenuContext.Provider value={passContext}>
                {renderChildren()}
            </MenuContext.Provider>
        </ul>
    )
```

#### 2021å¹´02æœˆ27æ—¥ å‘¨å…­  09å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šåŠŸèƒ½ç»§ç»­å‡çº§ - SubMenu ä¸‹æ‹‰èœå•ç¼–ç ç¬¬ä¸€éƒ¨åˆ†

```jsx
// æ›´åŠ è¯­ä¹‰åŒ– æ›´åŠ åƒ HTML çš„è§£å†³æ–¹æ¡ˆ
<Menu defaultIndex={0} onSelect={}>
  <Menu.Item index={"0"}>title one</Menu.Item>
  <Menu.Item disalbed  index={"1"}>disalbed link</Menu.Item>
  <Menu.SubMenu title={'test'}  index={"2"}> 
  	<Menu.Item index={"2-0"}>cool link</Menu.Item>
    <Menu.Item index={"2-1"}>cool link</Menu.Item>
  </Menu.SubMenu>
  <Menu.Item index={"3"}><a href="https://www.google.com">Google</a></Menu.Item>
</Menu>
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ·»åŠ äº¤äº’ - SubMenuä¸‹æ‹‰èœå•ç¼–ç ç¬¬äºŒéƒ¨åˆ†

```tsx
import React, { useContext, useState, FunctionComponentElement } from 'react'
import classNames from 'classnames'
import { MenuContext } from './menu'
import { MenuItemProps } from './menuItem'

export interface SubMenuProps {
    index?: number;
    title?: string;
    className?: string;
}

const SubMenu: React.FC<SubMenuProps> = ({ index, title, children, className }) => {
    const context = useContext(MenuContext)
    const [menuOpen, setOpen] = useState(false)
    const classes = classNames('menu-item submenu-item', className, {
        'is-active': context.index === index
    })
    const handleClick = (e: React.MouseEvent) => {
        e.preventDefault()
        setOpen(!menuOpen)
    }
    let timer: any
    const handleMouse = (e: React.MouseEvent, toggle: boolean) => {
        clearTimeout(timer)
        e.preventDefault()
        timer = setTimeout(() => {
            setOpen(toggle)
        }, 300)
    }
    const clickEvents = context.mode === 'vertical' ? { onClick: handleClick } : {}
    const hoverEvents = context.mode !== 'vertical' ? {
        onMouseEnter: (e: React.MouseEvent) => { handleMouse(e, true) },
        onMouseLeave: (e: React.MouseEvent) => { handleMouse(e, false) },
    } : {}
    const renderChildren = () => {
        const subMenuClasses = classNames('viking-submenu', {
            'menu-opened': menuOpen
        })
        const childrenComponent = React.Children.map(children, (child, i) => {
            const childElement = child as FunctionComponentElement<MenuItemProps>
            if (childElement.type.displayName === "MenuItem") {
                return childElement
            } else {
                console.error('Warning:SubMenu has a child which is not a MenuItem component')
            }
        })
        return (
            <ul className={subMenuClasses}>{childrenComponent}</ul>
        )
    }
    return (
        <li key={index} className={classes} {...hoverEvents}>
            <div className='submenu-title' onClick={handleClick} {...clickEvents}>{title}</div>
            {renderChildren()}
        </li>
    )
}
SubMenu.displayName = 'SubMenu'
export default SubMenu
```

#### 2021å¹´02æœˆ28æ—¥ å‘¨æ—¥  09å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šå¤§åŠŸå‘Šæˆ - SubMenu ä¸‹æ‹‰èœå•ç¼–ç ç¬¬ä¸‰éƒ¨åˆ†

æŠŠ index çš„ç±»å‹è¦å®šä¹‰æˆ string ç±»å‹; 

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šå®Œç¾ç»„ä»¶ - SubMenu ç»„ä»¶æ·»åŠ æµ‹è¯•

```tsx
it('should show dropdown items when hover on subMenu', async () => {
        expect(wrapper.queryByText('drop1')).not.toBeVisible()
        const dropdownElement = wrapper.getByText('dropdown')
        fireEvent.mouseEnter(dropdownElement)
        await waitFor(() => {
            expect(wrapper.queryByText('drop1')).toBeVisible()
        })
        fireEvent.click(wrapper.getByText('drop1'))
        expect(testProps.onSelect).toHaveBeenCalledWith('3-0')
        fireEvent.mouseLeave(dropdownElement)
        await waitFor(() => {
            expect(wrapper.queryByText('drop1')).not.toBeVisible()
        })
    })
```

#### 2021å¹´03æœˆ02æ—¥ å‘¨äºŒ  10å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šå›¾æ ‡è§£å†³æ–¹æ¡ˆç®€ä»‹

å›¾æ ‡ Icon çš„è§£å†³æ–¹æ¡ˆ

* ä¸Šå¤æ—¶æœŸ - é›ªç¢§å›¾ ï¼ˆCSS Spriteï¼‰
* è¿‘ä»£- Font Icon
* ç°ä»£å’Œæœªæ¥ - SVG

SVG çš„ä¼˜åŠ¿

* å®Œå…¨å¯æ§
* SVG å³å–å³ç”¨ï¼ŒFont Icon è¦ä¸‹è½½å…¨éƒ¨å­—ä½“æ–‡ä»¶
* Font Icon è¿˜æœ‰å¾ˆå¤šå¥‡æ€ªçš„ Bug

 

```bash
npm i --save @fortawesome/fontawesome-svg-core
npm install --save @fortawesome/free-solid-svg-icons
npm install --save @fortawesome/react-fontawesome
```

How to use fontawesome

```jsx
import ReactDOM from 'react-dom'
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'
import { faCoffee } from '@fortawesome/free-solid-svg-icons'
const element = <FontAwesomeIcon icon={faCoffee} />
ReactDOM.render(element, document.body)
```

#### 2021å¹´03æœˆ04æ—¥ å‘¨å››  10å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šä»–å±±ä¹‹çŸ³ - Iconç»„ä»¶ç¼–ç ç¬¬ä¸€éƒ¨åˆ†

```tsx
import Icon from './components/Icon/icon'
import { library } from '@fortawesome/fontawesome-svg-core'
import { fas } from '@fortawesome/free-solid-svg-icons'
library.add(fas)
<Icon icon="arrow-down" theme="danger" size="10x" />
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šIcon ç»„ä»¶æ ·å¼æ·»åŠ 

```scss
// /src/styles/_variables.scss
$theme-colors: ("primary": $primary,
    "secondary": $secondary,
    "success": $success,
    "info": $info,
    "warning": $warning,
    "danger": $danger,
    "light": $light,
    "dark": $dark,
);
// /src/components/Icon/_style.scss
@each $key,
$val in $theme-colors {
    .icon-#{$key} {
        color: $val;
    }
}
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šè®©å›¾æ ‡åŠ¨èµ·æ¥ - åŠ¨ç”»æ•ˆæœç¬¬ä¸€ç§å®ç°æ–¹æ³•

#### 2021å¹´03æœˆ05æ—¥ å‘¨äº”  10å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šReact Transiton Group ç®€ä»‹

å½“ display ä» none å˜ä¸º block çš„è¿‡ç¨‹ä¸­ï¼Œå…¶ä»–çš„åŠ¨ç”»ç‰¹æ•ˆä¼šå¤±æ•ˆï¼Œå› ä¸º display ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†çš„å¯ä»¥æ”¯æŒ animation çš„å±æ€§ã€‚

å½“ display å’Œ opacity æ”¾åœ¨ä¸€èµ·æ—¶ï¼Œopacity ä¸ä¼šç”Ÿæ•ˆã€‚

```
// é€æ¸æ˜¾ç¤º
display:none ===> display:block;opcity:0;===> display:block;opacity:1
// é€æ¸éšè—
display:block;opacity:1 ===> display:block;opcity:0; ===> display:none
```

React Transiton Group æœ¬èº«æ²¡æœ‰å®ç°ä»»ä½•çš„åŠ¨ç”»æ•ˆæœï¼Œéå¸¸è½»é‡çº§ï¼Œå®ƒåªæ˜¯å®šä¹‰äº†ç»„ä»¶è¿›å…¥å’Œç¦»å¼€æ—¶çš„ä¸åŒ className, éœ€è¦æˆ‘ä»¬è‡ªå·±æ·»åŠ æ ·å¼ï¼Œå®ç°åŠ¨ç”»æ•ˆæœã€‚

```jsx
function App() {
  const [inProp, setInProp] = useState(false);
  return (
    <div>
      <CSSTransition in={inProp} timeout={200} classNames="my-node">
        <div>
          {"I'll receive my-node-* classes"}
        </div>
      </CSSTransition>
      <button type="button" onClick={() => setInProp(true)}>
        Click to Enter
      </button>
    </div>
  );
}
```

```CSS
.my-node-enter {
    opacity: 0;
}

.my-node-enter-active {
    opacity: 1;
    transition: opacity 200ms;
}

.my-node-exit {
    opacity: 1;
}

.my-node-exit-active {
    opacity: 0;
    transition: opacity 200ms;
}
```

```
*-enter => forces a reflow æ·»åŠ åŠ¨ç”»æ•ˆæœ => *-enter-active => è‡ªå®šä¹‰timeout=> *-enter-done
*-exit => forces a reflow æ·»åŠ åŠ¨ç”»æ•ˆæœ => *-exit-active => è‡ªå®šä¹‰timeout=> *-exit-done
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šReact Transition Group å®è·µ - åŠ¨ç”»æ•ˆæœç¬¬äºŒç§å®ç°æ–¹å¼

```shell
npm install react-transition-group@4.3.0 --save
npm install @types/react-transition-group@4.3.0 --save
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šå°½å–„å°½ç¾ - React Transition Group æ·»åŠ èœå•æ¶ˆå¤±çš„åŠ¨ç”»

```
https://reactcommunity.org/react-transition-group/transition
```

(4)TS+React æ‰“é€ ç»„ä»¶åº“ï¼šæ‹¿æ¥ä¸»ä¹‰ - è‡ªå®šä¹‰ Transition ç»„ä»¶ç¼–ç ç¬¬ä¸€éƒ¨åˆ†

```jsx
// ä¼ªä»£ç 
<CSSTransition in={open} timeout={300} className="my-node" appear unmoutOnExit>
{node}
</CSSTransition>
// è¿›åŒ–å
<Transition in={open} timeout={300} animation="zoom-in-top">
{node}
</Transition>
```

#### 2021å¹´03æœˆ06æ—¥ å‘¨å…­  10å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: æ‹¿æ¥ä¸»ä¹‰ - è‡ªå®šä¹‰ Transition ç»„ä»¶ç¼–ç ç¬¬äºŒéƒ¨åˆ†

(2)TS+React æ‰“é€ ç»„ä»¶åº“: å®Œæˆçš„ Icon å’Œ Transition ç»„ä»¶

(3)TS+React æ‰“é€ ç»„ä»¶åº“: ä»€ä¹ˆæ˜¯ Storybook

ç›®å‰å¼€å‘çš„ç—›ç‚¹ï¼š

* create-react-app å…¥å£æ–‡ä»¶ä¸é€‚åˆç®¡ç†ç»„ä»¶åº“
* ç¼ºå°‘è¡Œä¸ºè¿½è¸ªå’Œå±æ€§è°ƒè¯•åŠŸèƒ½

å®Œç¾ç»„ä»¶å¼€å‘å·¥å…·åº”æœ‰çš„ç‰¹ç‚¹

* åˆ†å¼€å±•ç¤ºå„ä¸ªç»„ä»¶ä¸åŒå±æ€§ä¸‹çš„çŠ¶æ€
* èƒ½è¿½è¸ªç»„ä»¶çš„è¡Œä¸ºå¹¶ä¸”å…·æœ‰å±æ€§è°ƒè¯•åŠŸèƒ½
* å¯ä»¥ä¸ºç»„ä»¶è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£å’Œå±æ€§åˆ—è¡¨

(4)TS+React æ‰“é€ ç»„ä»¶åº“: å®‰è£… Storybook

```
# Add Storybook:
npx sb init 
```

(5)TS+React æ‰“é€ ç»„ä»¶åº“: Storybook æ”¯æŒ Typescript

storybook 6.0 ç‰ˆæœ¬æ”¯æŒä»¥ä¸‹é…ç½®æ¥ä½¿ç”¨ typescript

```js
// .storybook/main.js
module.exports = {
    typescript: {
        check: false,
        checkOptions: {},
        reactDocgen: 'react-docgen-typescript',
        reactDocgenTypescriptOptions: {
            shouldExtractLiteralValuesFromEnum: true,
            propFilter: (prop) => (prop.parent ? !/node_modules/.test(prop.parent.fileName) : true),
        },
    },
};
```

(6)TS+React æ‰“é€ ç»„ä»¶åº“: å±•ç¤ºç§€- ä¸º Button æ·»åŠ  Story

* Component Story Format
* storiesOf API
* MDX syntax

#### 2021å¹´03æœˆ07æ—¥ å‘¨æ—¥  10å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: å±•ç¤ºç§€- ä¸º Button æ·»åŠ  Story

```tsx
// jerrychaneui/src/components/Button/button.stories.tsx
import React from 'react'
import { storiesOf } from '@storybook/react'
import { action } from '@storybook/addon-actions'

import Button from './button'

const defaultButton = () => {
    return <Button onClick={action('clicked')}> default button </Button>
}
const buttonWithSize = () => (
    <>
        <Button size="lg">large button</Button>
        <Button size="sm">small button</Button>
    </>
)
const buttonWithType = () => (
    <>
        <Button btnType="primary">primary button</Button>
        <Button btnType="danger">danger button</Button>
        <Button btnType="link" href="https://google.com">link button</Button>
    </>
)
storiesOf('Button Component', module)
    .add('é»˜è®¤Button', defaultButton)
    .add('ä¸åŒå°ºå¯¸çš„ Button', buttonWithSize)
    .add('ä¸åŒç±»å‹çš„ Button', buttonWithType)
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“: å¦‚è™æ·»ç¿¼ - Stroybook addonæ’ä»¶ç³»ç»Ÿä»‹ç»

(3)TS+React æ‰“é€ ç»„ä»¶åº“: æ›´å¤šä¿¡æ¯ - æ·»åŠ  Storybook addon-info æ’ä»¶

```shell
npm i -D @storybook/addon-info@5.2.8
npm install --save @types/storybook__addon-info@5.2.1
```

#### 2021å¹´03æœˆ08æ—¥ å‘¨ä¸€  11å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: æ›´å¤šä¿¡æ¯ - æ·»åŠ  Storybook addon-info æ’ä»¶

å…¶ä¸­ text å‚æ•°æ”¯æŒ markdown ä¹¦å†™è¯­æ³•

```tsx
// jerrychaneui/src/components/Button/button.stories.tsx
storiesOf('Button Component', module)
    .addDecorator(withInfo)
    .addParameters({
        info: {
            text: `
            this is a very nice component
            ### this is a header
            ~~~js
                const a = 'hello'
            ~~~
            `,
            inline: true
        }
    })
    .addDecorator(CenterDecorator)
    .add('é»˜è®¤Button', defaultButton)
    .add('ä¸åŒå°ºå¯¸çš„ Button', buttonWithSize, { info: { inline: false } })
    .add('ä¸åŒç±»å‹çš„ Button', buttonWithType)
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“: è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ - æ·»åŠ  react-docgen-typescript ç¬¬ä¸€éƒ¨åˆ†

```bash
npm install --save-dev react-docgen-typescript-loader@3.6.0
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“: è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ - æ·»åŠ  react-docgen-typescript ç¬¬äºŒéƒ¨åˆ†

(4)TS+React æ‰“é€ ç»„ä»¶åº“: å¤§åŠŸå‘Šæˆ - Storybook æœ€ç»ˆæ ·å¼è°ƒæ•´

(5)TS+React æ‰“é€ ç»„ä»¶åº“: çŸ¥å·±çŸ¥å½¼ -Input ç»„ä»¶éœ€æ±‚åˆ†æ

```jsx
// ä¼ªä»£ç 
<Input
	disabled
  size="lg||sm"
  icon="fontawesome æ”¯æŒçš„å›¾æ ‡"
  prepand="input å‰ç¼€ï¼Œstring æˆ– ReactElement"
  append="input åç¼€ï¼Œstring æˆ– ReactElement"
  {...restProps} æ”¯æŒå…¶ä»–æ‰€æœ‰çš„ HTMLInput å±æ€§
/>
```

(6)TS+React æ‰“é€ ç»„ä»¶åº“: æŠ›ç –å¼•ç‰ - Input ç»„ä»¶ä¼ªä»£ç å®ç°

```tsx
import React, { FC, ReactElement, InputHTMLAttributes } from 'react'
import { IconProp } from '@fortawesome/fontawesome-svg-core'
import { IconProps } from '../Icon/icon'

type InputSize = 'lg' | 'sm'

export interface InputProps extends Omit<InputHTMLAttributes<HTMLElement>, 'size'> {
    disabled?: boolean;
    size?: InputSize;
    icon?: IconProps;
    prehand?: string | ReactElement;
    append?: string | ReactElement;
}

export const Input: FC<InputProps> = (props) => {
    // å–å‡ºå„ç§çš„å±æ€§
    // æ ¹æ®å±æ€§è®¡ç®—ä¸åŒçš„ className

    return (
        // æ ¹æ®å±æ€§åˆ¤æ–­æ˜¯å¦è¦æ·»åŠ ç‰¹å®šçš„èŠ‚ç‚¹
        <></>
    )
}
```

#### 2021å¹´03æœˆ10æ—¥ å‘¨ä¸‰  11å‘¨

(1ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“: æŒç»­ä¼˜åŒ– - Inputç»„ä»¶ä»£ç å®ç°å’Œä¼˜åŒ–è¿‡ç¨‹

#### 2021å¹´03æœˆ12æ—¥ å‘¨äº”  11å‘¨

(1ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“: æ–°çš„æŒ‘æˆ˜ - AutoCompleteç»„ä»¶åˆ†æ

```
// custom option
// keyboard support
// debource
// click outside
```

(2ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“: AutoComplete ç¼–ç ç¬¬ä¸€éƒ¨åˆ†

#### 2021å¹´03æœˆ13æ—¥ å‘¨å…­  11å‘¨

(1ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“:  AutoComplete æ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿

```tsx
 const renderTemplate = (item: DataSourceTpye) => {
        return renderOption ? renderOption(item) : item.value
    }
```

(2ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“:  å¼‚æ­¥æ¥äº† - AutoComplete æ”¯æŒå¼‚æ­¥è¯·æ±‚ç¼–ç 

#### 2021å¹´03æœˆ14æ—¥ å‘¨æ—¥  11å‘¨

(1ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“:  è€ç“¶æ–°é…’ - ä½¿ç”¨è‡ªå®šä¹‰Hookå®ç° å‡½æ•°é˜²æŠ– debounce

Lodash é‡Œæœ‰ä¸€ä¸ªå†™å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå…¶å®å‡½æ•°é˜²æŠ–çš„åŸç†ä¹Ÿéå¸¸ç®€å•ï¼Œå®ƒé€šè¿‡é—­åŒ…ä¿å­˜ä¸€ä¸ªæ ‡è®°ï¼Œæ¥ä¿å­˜ setTimeout è¿”å›çš„å€¼ï¼Œæ¯å½“ç”¨æˆ·è¾“å…¥æ—¶ï¼Œå°±æŠŠå‰ä¸€ä¸ª setTimeout clear æ‰ï¼Œç„¶ååˆåˆ›å»ºä¸€ä¸ªæ–°çš„ setTimeout, è¿™æ ·å°±èƒ½å¤Ÿä¿è¯è¾“å…¥çš„æ—¶é—´é—´éš”å†…è¿˜æœ‰å­—ç¬¦è¾“å…¥çš„è¯ï¼Œå°±ä¸ä¼šæ‰§è¡Œè¿™ä¸ªå›è°ƒå‡½æ•°äº†ã€‚

```tsx
import { useState, useEffect } from 'react'
function useDebounce(value: any, delay: 300) {
    const [debounceValue, setDebounceValue] = useState(value)
    useEffect(() => {
        const handler = window.setTimeout(() => {
            setDebounceValue(value)
        }, delay)
        return () => {
            clearTimeout(handler)
        }
    }, [value, delay])
    return debounceValue
}

export default useDebounce;
```

(2ï¼‰TS+React æ‰“é€ ç»„ä»¶åº“:  AutoComplete æ”¯æŒé”®ç›˜äº‹ä»¶

```jsx
const highlight = (index: number) => {
        if (index < 0) index = 0
        if (index >= suggestions.length) {
            index = suggestions.length - 1
        }
        setHighlightIndex(index)
    }
    const handleOnKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {
        switch (e.keyCode) {
            // enter
            case 13:
                if (suggestions[hightlightIndex]) {
                    handleSelect(suggestions[hightlightIndex])
                }
                break;
            // up
            case 38:
                highlight(hightlightIndex - 1)
                break;
            // down
            case 40:
                highlight(hightlightIndex + 1)
                break;
            // esc
            case 27:
                setSuggestions([])
                break;
            default:
                break;
        }
    }
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“: å¦™ç”¨ useRef - å®ç° clickOutSide åŠŸèƒ½

```tsx
const triggerSearch = useRef(false)
const handleChange = (e: ChangeEvent<HTMLInputElement>) => {
      const value = e.target.value.trim()
      setInputValue(value)
      triggerSearch.current = true
  }
const handleSelect = (item: DataSourceType) => {
    setInputValue(item.value)
    setSuggestions([])
    if (onSelect) {
        onSelect(item)
    }
    triggerSearch.current = false
}
```

```tsx
import { RefObject, useEffect } from 'react'
//  ç‚¹å‡»å¤–ä¾§åŒºåŸŸï¼Œä¸‹æ‹‰æ¡†æ¶ˆå¤±
function useClickOutside(ref: RefObject<HTMLElement>, handler: Function) {
    useEffect(() => {
        const listener = (event: MouseEvent) => {
            if (!ref.current || ref.current.contains(event.target as HTMLElement)) {
                return
            }
            handler(event)
        }
        document.addEventListener('click', listener)
        return () => {
            document.removeEventListener('click', listener)
        }
    }, [ref, handler])
}

export default useClickOutside;
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“: AutoComplete æ·»åŠ å•å…ƒæµ‹è¯•

è¿è¡Œéƒ¨åˆ†ç»„ä»¶çš„æµ‹è¯•ç”¨ä¾‹ï¼š

```shell
npm test -- -t "auto"
```

#### 2021å¹´03æœˆ16æ—¥ å‘¨äºŒ  12å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: æœ€ç»ˆä»»åŠ¡ -Upload ç»„ä»¶éœ€æ±‚åˆ†æ

Upload ä¸€ä¸ªæ–‡ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼š

```
å¼€å§‹ => ç‚¹å‡»æŒ‰é’®&é€‰æ‹©æ–‡ä»¶ => beforeUpload(file) => onProgress(event,file)  =>  onChange(file)  =>  onSuccess(response,file) || onError(error,file)
onSuccess(response,file) => ç‚¹å‡»å·²ç»ä¸Šä¼ çš„åˆ é™¤æŒ‰é’®  => onRemoved(file)
```

ä¼ªä»£ç å¦‚ä¸‹ï¼š

```tsx
<Upload
   action="https://upload!"
   beforeUpload={() => {}}
   onProgress={() => {}}
   onChange={() => {}}
   onSuccess={() => {}}
   onError={() => {}}
   onRemoved={() => {}}
  >
	<Button>click to upload</Button>
</Upload>
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“: ä¸‹ä¸€ä»£ HTTP åº“ - axios

Fetch çš„ç¼ºç‚¹ï¼š

* åªå¯¹ç½‘ç»œè¯·æ±‚æŠ¥é”™ï¼Œå¯¹ 400ï¼Œ500 éƒ½å½“åšæˆåŠŸçš„è¯·æ±‚
* é»˜è®¤ä¸ä¼šå¸¦ cookie
* ä¸æ”¯æŒ abort, ä¸æ”¯æŒè¶…æ—¶æ§åˆ¶
* æ²¡æœ‰åŠæ³•åŸç”Ÿç›‘æ§è¯·æ±‚çš„è¿›åº¦

(3)TS+React æ‰“é€ ç»„ä»¶åº“: åœ¨çº¿ mock server å’Œ axios ç®€å•ä½¿ç”¨

```
npm i axios --save
```

#### 2021å¹´03æœˆ17æ—¥ å‘¨ä¸‰  12å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: ä¸Šä¼ æ–‡ä»¶çš„åŸºæœ¬æ–¹å¼

HTML è¡¨å•æä¾›ä¸‰ç§æ–‡ä»¶çš„ç¼–ç ï¼šapplication/x-www-form-urlencoded(the default) ; multipart/form-data ; text/plain

```tsx
import React, { useState, useEffect, ChangeEvent } from 'react';
import axios from 'axios'

const App: React.FC = () => {
  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const files = e.target.files
    if (files) {
      const uploadedFile = files[0]
      const formData = new FormData()
      formData.append(uploadedFile.name, uploadedFile)
      axios.post('http://jsonplaceholder.typicode.com/posts', formData, {
        headers: {
          'Content-Type': 'multipart/form-data'
        }
      }).then(resp => {
        console.log(resp)
      })
    }
  }
  return (
    <div className="App" style={{ marginTop: '100px', marginLeft: '100px' }}>
      <input type="file" name="myFile" onChange={handleFileChange} />
    </div>
  )
}

export default App;
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“: å®ŒæˆåŸºæœ¬æµç¨‹ - Upload ç»„ä»¶ç¼–ç ç¬¬ä¸€éƒ¨åˆ†

(3)TS+React æ‰“é€ ç»„ä»¶åº“: å®ŒæˆåŸºæœ¬æµç¨‹ - Upload ç»„ä»¶ç¼–ç ç¬¬äºŒéƒ¨åˆ†

#### 2021å¹´03æœˆ18æ—¥ å‘¨å››  12å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: åˆ›å»ºåˆ—è¡¨æ•°æ® - UploadList ç»„ä»¶ç¼–ç ç¬¬ä¸€éƒ¨åˆ†

```js
// è·å–ä¸Šä¼ æ–‡ä»¶çš„å„ç§çŠ¶æ€
const updateFileList = (updateFile: UploadFile, updateObj: Partial < UploadFile > ) => {
    setFileList(prevList => {
        return prevList.map(file => {
            if (file.uid === updateFile.uid) {
                return {
                    ...file,
                    ...updateObj
                }
            } else {
                return file
            }
        })
    })
}
```

#### 2021å¹´03æœˆ19æ—¥ å‘¨äº”  12å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: æ˜¾ç¤ºä¸Šä¼ æ•°æ® - UploadList ç»„ä»¶ç¼–ç ç¬¬äºŒéƒ¨

```tsx
import React, { FC } from 'react'
import { UploadFile } from './upload'
import Icon from '../Icon/icon'
import { faCheckCircle, faFileAlt, faSpinner, faTimes, faTimesCircle } from '@fortawesome/free-solid-svg-icons'
interface UploadListProps {
    fileList: UploadFile[];
    onRemove: (_file: UploadFile) => void;
}

export const UploadList: FC<UploadListProps> = (props) => {
    const { fileList, onRemove } = props
    return (
        <ul className="viking-upload-list">
            {fileList.map(item => {
                return (
                    <li className="viking-upload-list-item" key={item.uid}>
                        <span className={`file-name file-name-${item.status}`}>
                            <Icon icon={faFileAlt} theme="secondary" />
                            {item.name}
                        </span>
                        <span className="file-status">
      {item.status === "uploading" && <Icon icon={faSpinner} theme="primary" />}
      {item.status === "success" && <Icon icon={faCheckCircle} theme="success" />}
      {item.status === "error" && <Icon icon={faTimesCircle} theme="danger" />}
                        </span>
                        <span className="file-actions">
                            <Icon icon={faTimes} onClick={() => { onRemove(item) }} />
                        </span>
                    </li>
                )
            })}
        </ul>
    )
}

export default UploadList;
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“: æ˜¾ç¤ºä¸Šä¼ è¿›åº¦ - æ·»åŠ  Progress ç»„ä»¶

(3)TS+React æ‰“é€ ç»„ä»¶åº“: ç²¾ç›Šæ±‚ç²¾ - å†æ¬¡åˆ†æ Upload ç»„ä»¶æ›´è¿‘ä¸€æ­¥éœ€

ä¸°å¯ŒåŒ–ä¸Šä¼ æ•°æ®

* æ·»åŠ è‡ªå®šä¹‰ Header
* æ·»åŠ  name å±æ€§ - ä»£è¡¨å‘åˆ°åå°çš„æ–‡ä»¶å‚æ•°åç§°
* æ·»åŠ  data å±æ€§ - ä¸Šä¼ æ‰€éœ€è¦çš„é¢å¤–å‚æ•°
* æ·»åŠ  input æœ¬èº«çš„ file çº¦æŸå±æ€§ - multiple, accept ç­‰

å±•ç¤ºæ›´ä¸°å¯Œçš„ç•Œé¢å’Œäº¤äº’

* è‡ªå®šä¹‰å‡ºå‘çš„å…ƒç´ 
* æ”¯æŒæ‹–åŠ¨ä¸Šä¼ æ–‡ä»¶
* ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶åç§°ï¼Œæ·»åŠ  onPreview äº‹ä»¶

#### 2021å¹´03æœˆ20æ—¥ å‘¨å…­  12å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: Upload å¢å¼ºäº¤äº’ç¬¬ä¸€éƒ¨åˆ†

è‡ªå®šä¹‰ HTTP post è¯·æ±‚ï¼š

* æ·»åŠ è‡ªå®šä¹‰ header
* æ·»åŠ è‡ªå®šä¹‰ name
* æ·»åŠ è‡ªå®šä¹‰ post formData
* æ·»åŠ è‡ªå®šä¹‰ cookie-withCredentials

è‡ªå®šä¹‰ input å±æ€§

* æ·»åŠ  multiple å±æ€§
* æ·»åŠ  accept å±æ€§

(2)TS+React æ‰“é€ ç»„ä»¶åº“: æ‹–åŠ¨ä¸Šä¼  - æ”¯æŒ Drag and Drop

```
åˆå§‹çŠ¶æ€ => è§¦å‘ DragOver => æ·»åŠ ç‰¹å®š class:is-dragover => DragLeave æˆ– onDrop
DragLeave => åˆ é™¤ç‰¹å®š class: is-dragover
onDrop => åˆ é™¤ç‰¹å®š class,å¹¶ä¸”è§¦å‘ onFile äº‹ä»¶ï¼Œå°† FileList ä¼ é€’å‡ºå»
```

#### 2021å¹´03æœˆ21æ—¥ å‘¨æ—¥  12å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: å¼‚æ­¥æ€æ ·æµ‹è¯•ï¼Ÿ - Upload æµ‹è¯•ç¬¬ä¸€éƒ¨åˆ†

(2)TS+React æ‰“é€ ç»„ä»¶åº“: Javascript æ¨¡å—åŒ–å‘å±•å†å²

```js
// common.js æœåŠ¡ç«¯å¸¸ç”¨
const bar = require('./bar')
// æ¨¡å—äº§å‡º
module.exports = function() {
    // ...
};

// AMD
define(function(require) {
    // é€šè¿‡ç›¸å¯¹è·¯å¾„è·å¾—ä¾èµ–æ¨¡å—
    const bar = require('./bar')
    // æ¨¡å—äº§å‡º
    return function() {
        //...
    };
});

// es6 module
// é€šè¿‡ç›¸å¯¹è·¯å¾„è·å¾—ä¾èµ–æ¨¡å—
import bar from './bar'
// æ¨¡å—äº§å‡º
export default function() {
    // ...
};
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“: webpack åˆ°åº•å®Œæˆä»€ä¹ˆä»»åŠ¡ï¼Ÿ - bundlerçš„ç¥å¥‡åŠŸæ•ˆ

#### 2021å¹´03æœˆ22æ—¥ å‘¨ä¸€  13å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: æ€ä¹ˆé€‰æ‹© Javascript æ¨¡å—æ ¼å¼ï¼ˆES Moduleï¼‰

(2)TS+React æ‰“é€ ç»„ä»¶åº“: åˆ›å»ºç»„ä»¶åº“æ¨¡å—å…¥å£æ–‡ä»¶

```tsx
// /src/components/Menu/index.tsx
import { FC } from 'react'
import Menu, { MenuProps } from './menu'
import MenuItem, { MenuItemProps } from './menuItem'
import SubMenu, { SubMenuProps } from './subMenu'
export type IMenuComponent = FC<MenuProps> & {
    Item: FC<MenuItemProps>,
    SubMenu: FC<SubMenuProps>,
}
const TransMenu = Menu as IMenuComponent;

TransMenu.Item = MenuItem;
TransMenu.SubMenu = SubMenu;

export default TransMenu;
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“: é©¯æœtsc - tsconfig ç¼–å†™ç¬¬ä¸€éƒ¨åˆ†

(4)TS+React æ‰“é€ ç»„ä»¶åº“: é©¯æœtsc - tsconfig ç¼–å†™ç¬¬äºŒéƒ¨åˆ†

#### 2021å¹´03æœˆ23æ—¥ å‘¨äºŒ  13å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: ç”Ÿæˆæœ€ç»ˆä½¿ç”¨çš„æ ·å¼æ–‡ä»¶

```bash
"build-css":"node-sass ./src/styles/index.scss ./build/index.css",
```

```
npm i rimraf --save-dev
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“: ä½¿ç”¨ npm link æœ¬åœ°æµ‹è¯•ç»„ä»¶åº“ ç¬¬ä¸€éƒ¨åˆ†

```
åœ¨ vikingship æ–‡ä»¶å¤¹ => npm link => åˆ›å»ºè½¯è¿æ¥åˆ°å…¨å±€ node/v12.5.0/lib/node_modules
åœ¨ vikingtest æ–‡ä»¶å¤¹ä¸­ => npm link vikingship => åœ¨ vikingship/node_modules ä¸­åˆ›å»ºè½¯è¿æ¥åˆ°å…¨å±€
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“: ä½¿ç”¨ npm link æœ¬åœ°æµ‹è¯•ç»„ä»¶åº“ ç¬¬ä¸‰éƒ¨åˆ†

#### 2021å¹´03æœˆ24æ—¥ å‘¨ä¸‰  13å‘¨

(1)TS+React æ‰“é€ ç»„ä»¶åº“: ç˜¦èº«ä»»åŠ¡ - ç²¾ç®€ package.json ä¾èµ–

```json
 "dependencies": {
    "@fortawesome/fontawesome-svg-core": "^1.2.26",
    "@fortawesome/free-solid-svg-icons": "^5.12.0",
    "@fortawesome/react-fontawesome": "^0.1.8",
    "axios": "^0.21.1",
    "classnames": "^2.2.6",
    "react": "^16.12.0",
    "react-dom": "^16.12.0",
    "react-transition-group": "^4.3.0",
    "web-vitals": "^1.1.0"
  },
 "peerDependencies": {
    "react": ">=16.8.0",
    "react-dom": ">=16.8.0"
  },
  "devDependencies": {
    "react-scripts": "3.2.0",
    "babel-loader": "^8.2.2",
    "node-sass": "^4.13.0",
    "typescript": "3.7.2",
    "@types/classnames": "^2.2.9",
    "@types/jest": "24.0.23",
    "@types/node": "12.12.14",
    "@types/react": "^16.9.13",
    "@types/react-dom": "16.9.4",
    "@types/react-transition-group": "^4.2.3",
    "@storybook/addon-actions": "^5.2.8",
    "@storybook/addon-info": "^5.2.8",
    "@storybook/addon-links": "^5.2.8",
    "@storybook/addons": "^5.2.8",
    "@storybook/react": "^5.2.8",
    "@testing-library/jest-dom": "^4.2.4",
    "@testing-library/react": "^9.3.2",
    "react-docgen-typescript-loader": "^3.6.0",
    "rimraf": "^3.0.2"
  }
```

(2)TS+React æ‰“é€ ç»„ä»¶åº“: ä¸‡æ— ä¸€å¤± - æ·»åŠ å‘å¸ƒå’Œ commit å‰æ£€æŸ¥

```bash
npm install husky --save-dev
```

(3)TS+React æ‰“é€ ç»„ä»¶åº“: ä½¿ç”¨ Storybook ç”Ÿæˆé™æ€æ–‡æ¡£é¡µé¢

(4)TS+React æ‰“é€ ç»„ä»¶åº“: CI CD ç®€ä»‹

CI-æŒç»­é›†æˆï¼š

* é¢‘ç¹çš„å°†ä»£ç é›†æˆåˆ°ä¸»å¹²ï¼ˆmasterï¼‰
* å¿«é€Ÿå‘ç°é”™è¯¯
* é˜²æ­¢åˆ†æ”¯å¤§å¹…åç¦»ä¸»å¹²

CD-æŒç»­äº¤ä»˜ã€æŒç»­éƒ¨ç½²

* é¢‘ç¹çš„å°†è½¯ä»¶çš„æ–°ç‰ˆæœ¬ï¼Œäº¤ä»˜ç»™è´¨é‡å›¢é˜Ÿæˆ–è€…ç”¨æˆ·
* ä»£ç é€šè¿‡è¯„å®¡ä»¥åï¼Œè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

(5)TS+React æ‰“é€ ç»„ä»¶åº“: ä½¿ç”¨ travis è‡ªåŠ¨è¿è¡Œæµ‹

(6)TS+React æ‰“é€ ç»„ä»¶åº“: ä½¿ç”¨ travis è‡ªåŠ¨å‘å¸ƒæ–‡æ¡£é¡µé¢

#### 2021å¹´03æœˆ25æ—¥ å‘¨å››  13å‘¨

(1) WebRTC Learnï¼šMediaStreamAPIåŠè·å–è§†é¢‘çº¦æŸ

```js
//MediaStrem åª’ä½“æµ & éŸ³è½¨ & è§†é¢‘è½¨
MediaStrem.addTrack()
MediaStrem.removeTrack()
MediaStrem.getVideoTracks()
MediaStrem.getAudioTracks()
// MediaStrem äº‹ä»¶
MediaStrem.onaddtrack()
MediaStrem.onremovetrack()
MediaStrem.onended()
```

(2) WebRTC Learnï¼šå½•åˆ¶åŸºæœ¬çŸ¥è¯† - MediaRecoder åŸºæœ¬æ ¼å¼

```js
var mediaRecorder = new mediaRecorder(stream[, options])
```

| å‚æ•°   | è¯´æ˜                                                         |
| ------ | ------------------------------------------------------------ |
| stream | åª’ä½“æµï¼Œå¯ä»¥é€šè¿‡ getUserMediaã€` `<video>`  `ã€` <audio> `æˆ–` <canvas> `è·å– |
| option | é™åˆ¶é€‰é¡¹                                                     |

MediaRecoder å‚æ•°å³ option

| é€‰é¡¹               | è¯´æ˜                                                         |
| ------------------ | ------------------------------------------------------------ |
| mimeType           | video/webm<br />audio/webm<br /> vedio/webm; codecs=vp8<br /> vedio/webm; codecs=h264<br /> vedio/webm; codecs=opus<br /> |
| audioBitsPerSecond | éŸ³é¢‘ç ç‡                                                     |
| videoBitsPerSecond | è§†é¢‘ç ç‡                                                     |
| bitsPersecond      | æ•´ä½“ç ç‡                                                     |

JS å­˜å‚¨æ•°æ®çš„æ–¹å¼ï¼š å­—ç¬¦ä¸²ã€Blobï¼ˆå¸¸ç”¨ï¼‰ã€ArrayBufferã€ArrayBufferView

(3) WebRTC Learnï¼šå½•åˆ¶éŸ³è§†é¢‘å®æˆ˜-1

#### 2021å¹´03æœˆ26æ—¥ å‘¨äº”  13å‘¨

(1) WebRTC Learnï¼šå½•åˆ¶éŸ³è§†é¢‘å®æˆ˜-2

```js
btnDownload.onclick = () => {
    var blob = new Blob(buffer, {
        type: "video/webm"
    });
    var url = window.URL.createObjectURL(blob);
    var a = document.createElement('a');
    a.href = url;
    a.style.display = "none";
    a.download = "aaa.webm";
    a.click();
}
```

(2) WebRTC Learnï¼šé‡‡é›†å±é¢æ•°æ®

```js
// åŸºæœ¬æ ¼å¼
var promise = navigator.mediaDevices.getDisplayMedia(constraints);
```

constraints å¯é€‰ï¼Œconstraints ä¸­çº¦æŸä¸ getUserMedia å‡½æ•°ä¸­çš„ä¸€è‡´ã€‚

(3) WebRTC Learnï¼šå¦‚ä½•ä½¿ç”¨ socket.io å‘é€æ¶ˆæ¯

Socket.io å‘é€æ¶ˆæ¯ï¼ˆä¸€ï¼‰

* ç»™æœ¬æ¬¡è¿æ¥å‘é€æ¶ˆæ¯ï¼š`socket.emit()`
* ç»™æŸä¸ªæˆ¿é—´å†…æ‰€æœ‰äººå‘æ¶ˆæ¯ï¼š`io.in(room).emit()`

Socket.io å‘é€æ¶ˆæ¯ï¼ˆäºŒï¼‰

* é™¤æœ¬è¿æ¥å¤–ï¼Œç»™æŸä¸ªæˆ¿é—´å†…æ‰€æœ‰äººå‘æ¶ˆæ¯ï¼š`socket.to(room).emit()`
* é™¤æœ¬è¿æ¥å¤–ï¼Œç»™æ‰€æœ‰ä»»åŠ¡å‘æ¶ˆæ¯ï¼š`socket.broadcast.emit()`

Socket. IO å®¢æˆ·ç«¯å¤„ç†æ¶ˆæ¯(ä¸€)

* å‘é€ action å‘½ä»¤ï¼š

```js
S: socket.emit('action')
C: socket.on('action', function() {
    ...
})
```

* å‘é€äº†ä¸€ä¸ª action å‘½ä»¤ï¼Œè¿˜æœ‰ data æ•°æ®

```js
S: socket.emit('action', data)
C: socket.on('action', function(data) {
    ...
})
```

Socket. IO å®¢æˆ·ç«¯å¤„ç†æ¶ˆæ¯(äºŒ)

* å‘é€äº† action å‘½ä»¤ï¼Œè¿˜æœ‰ä¸¤ä¸ªæ•°æ®

```js
S: socket.emit('action', arg1, arg2)
C: socket.on('action', function(arg1, arg2) {
    ...
})
```

* å‘é€äº†ä¸€ä¸ª action å‘½ä»¤ï¼Œåœ¨ emit æ–¹æ³•ä¸­åŒ…å«å›è°ƒå‡½æ•° 

```js
S: socket.emit('action', data, function(arg1, arg2) {
    ...
})
C: socket.on('action', function(data, fn) {
            fn('a', 'b');)
```

(4) WebRTC Learnï¼šä¿¡ä»¤æœåŠ¡å™¨åŸç†

ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ socket.io

* socket.io æ˜¯ WebSocket çš„è¶…é›†
* socket.io æœ‰æˆ¿é—´çš„æ¦‚å¿µ
* socket.io è·¨å¹³å°ã€è·¨ç»ˆç«¯ã€è·¨è¯­è¨€

#### 2021å¹´03æœˆ27æ—¥ å‘¨å…­  13å‘¨

(1) WebRTC Learnï¼šä¿¡ä»¤æœåŠ¡å™¨çš„å®ç°

æ”¹é€ æœåŠ¡ç«¯çš„åŸºæœ¬æµç¨‹ï¼š

* å®‰è£… soket.io
* å¼•å…¥ soket.io
* å¤„ç† connection æ¶ˆæ¯

(2) WebRTC Learnï¼šåˆ©ç”¨socket.ioå®ç°ç®€å•èŠå¤©å®¤1 & 2

#### 2021å¹´03æœˆ28æ—¥ å‘¨æ—¥  13å‘¨

(1) WebRTC Learnï¼šç½‘ç»œä¼ è¾“åŸºæœ¬çŸ¥è¯†

* NAT(Network Address Translator) å†…ç½‘åœ°å€
* STUNï¼ˆSimple Traversal of UDP Through NATï¼‰å…¬ç½‘åœ°å€
* TURNï¼ˆTraversal Using Relays around NATï¼‰
* ICE (Interactive Connectivity Establishment)

| NAT äº§ç”ŸåŸå›  | (1)IPv4 åœ°å€ä¸å¤Ÿï¼›(2) å‡ºäºç½‘ç»œå®‰å…¨                    |
| ------------ | ----------------------------------------------------- |
| NAT ç§ç±»     | (1)å®Œå…¨é”¥å‹ï¼›(2) åœ°å€é™åˆ¶å‹ï¼›(3)ç«¯å£é™åˆ¶å‹ï¼›(4)å¯¹ç§°å‹ |

(2) WebRTC Learnï¼šNATæ‰“æ´åŸç†

* C1ã€C2 å‘ STUN å‘é€æ¶ˆæ¯
* äº¤æ¢å…¬ç½‘ IP  åŠç«¯å£
* C1=>C2 , C2=>C1, ç”šè‡³æ˜¯ç«¯å£çŒœæµ‹ã€

(3) WebRTC Learnï¼šNATç±»å‹æ£€æµ‹

(4) WebRTC Learnï¼šSTUN åè®®ä¸€

* ç›®çš„ï¼šè¿›è¡Œ NAT ç©¿è¶Š
* æ¨¡å¼ï¼šå…¸å‹çš„å®¢æˆ·ç«¯/æœåŠ¡ç«¯ã€‚å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡ç«¯è¿›è¡Œå“åº”
* header: åŒ…å« 20 å­—èŠ‚çš„ STUN header
* body: å¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ª Atrribute

(5) WebRTC Learnï¼šSTUN åè®®äºŒ

#### 2021å¹´03æœˆ29æ—¥ å‘¨ä¸€  14å‘¨

(1) WebRTC Learnï¼šTRUN åè®®

* ç›®çš„æ˜¯è§£å†³å¯¹ç§° NAT æ— æ³•ç©¿è¶Šçš„é—®é¢˜
* å…¶å»ºç«‹åœ¨ STUN ä¹‹ä¸Šï¼Œæ¶ˆæ¯æ ¼å¼ä½¿ç”¨ STUN æ ¼å¼æ¶ˆæ¯
* TURN Client è¦æ±‚æœåŠ¡ç«¯åˆ†é…ä¸€ä¸ªå…¬å…± IP å’Œ Port ç”¨äºæ¥æ”¶æˆ–å‘é€æ•°æ®

TRUN ä½¿ç”¨çš„ä¼ è¾“åè®®

| TURN client to TURN server | TURN server to peer |
| -------------------------- | ------------------- |
| UDP/TCP/TLS over TCP       | UDP/UDP/UDP         |

TRUN å‘é€æœºåˆ¶ï¼šSend & Data ; Chanel

TRUN çš„ä½¿ç”¨

```
1.STUN binding
Caller TURN allocation
Caller sends offer
Callee TURN allocation
Callee answers OK
Exchange candidate IP address
ICE check for P2P connection
If P2P unsuccessful,make relay connection
```

(2) WebRTC Learnï¼šã€åè®®è§„èŒƒã€‘ICEæ¡†æ¶

(3) WebRTC Learnï¼šç½‘ç»œåˆ†ææ–¹æ³• tcpdump ä¸ wiresharkè®²è§£

å¸¸ç”¨å·¥å…·ï¼šLinux æœåŠ¡ç«¯ç”¨ tcpdump ã€å…¶ä»–ç«¯ WireShark

#### 2021å¹´03æœˆ30æ—¥ å‘¨äºŒ  14å‘¨

(1) WebRTC Learnï¼šç½‘ç»œåˆ†ææ–¹æ³• tcpdump ä¸ wireshark å®æˆ˜-2

(2) WebRTC Learnï¼šåª’ä½“èƒ½åŠ›åå•†è¿‡ç¨‹ä¸€ï¼Œç«¯å¯¹ç«¯è¿æ¥

RTCPeerConnection

```js
// åŸºæœ¬æ ¼å¼
pc = new RTCPeerConnection([configuration])
```

RTCPeerConnection æ–¹æ³•åˆ†ç±»

* åª’ä½“åå•†
* Stream / Track
* ä¼ è¾“ç›¸å…³æ–¹æ³•
* ç»Ÿè®¡ç›¸å…³æ–¹æ³•

(3) WebRTC Learnï¼šåª’ä½“èƒ½åŠ›åå•†è¿‡ç¨‹äºŒ

åª’ä½“åå•†çš„æ–¹æ³•ï¼š

```js
// createOffer
aPromise = myPeerConnection.createOffer([options])
// createAnswer
aPromise = myPeerConnection.createAnswer([options])
// setLocalDescription
aPromise = myPC.setLocalDescription([sessionDescription])
// setRemoteDescription
aPromise = myPC.setRemoteDescription([sessionDescription])
```

#### 2021å¹´03æœˆ31æ—¥ å‘¨ä¸‰  14å‘¨

(1) WebRTC Learnï¼š1:1 è¿æ¥çš„åŸºæœ¬æµç¨‹ï¼Œç«¯å¯¹ç«¯è¿æ¥çš„åŸºæœ¬æµç¨‹

(2) WebRTC Learnï¼šæœ¬æœºå†…çš„1:1 éŸ³è§†é¢‘äº’é€š-1

#### 2021å¹´04æœˆ01æ—¥ å‘¨å››  14å‘¨

(1)WebRTC Learnï¼šè·å– offer / answer åˆ›å»ºçš„ SDP

(2)WebRTC Learnï¼šSDP è§„èŒƒ - ä¼šè¯å±‚ï¼ˆå…¨å±€ï¼‰ & åª’ä½“å±‚ï¼ˆå±€éƒ¨ï¼‰

* ä¼šè¯å±‚ï¼šä¼šè¯çš„åç§°ä¸ç›®çš„ï¼›ä¼šè¯çš„å­˜æ´»æ—¶é—´ï¼›ä¼šè¯ä¸­åŒ…å«å¤šä¸ªåª’ä½“ä¿¡æ¯ 
* åª’ä½“å±‚ï¼šåª’ä½“æ ¼å¼ï¼›ä¼ è¾“åè®®ï¼›ä¼ è¾“IPå’Œç«¯å£ï¼›åª’ä½“è´Ÿè½½ç±»å‹

SDPæ ¼å¼

* ç”±å¤šä¸ª`<type>=<value>` ç»„æˆ
* ä¸€ä¸ªä¼šè¯çº§æè¿°
* å¤šä¸ªåª’ä½“çº§æè¿°

SDPç»“æ„ï¼š `Session Description / Time Description / Meia Description`

#### 2021å¹´04æœˆ02æ—¥ å‘¨äº” 14å‘¨

(1)WebRTC Learnï¼šåè®®è§„èŒƒ WebRTCä¸­çš„SDP

SDPç»„æˆ: ä¼šè¯å…ƒã€ç½‘ç»œæè¿°ã€æµæè¿°ã€å®‰å…¨æè¿°ã€æœåŠ¡è´¨é‡

(2)WebRTC Learnï¼šOffer_AnswerSDP

(3)WebRTC Learnï¼šSTUN_TURNæœåŠ¡å™¨æ­å»º

STUN_TURNæœåŠ¡å™¨é€‰å‹:

* rfc5766-turn-server
* coTurn(æ¨è)
* ResTurn

coTurn æœåŠ¡å™¨æ­å»ºä¸éƒ¨ç½²

* ä¸‹è½½ coTurn
* ./configure --prefix=/usr/local/coturn
* ç¼–è¯‘ make && make install

coTurn æœåŠ¡å™¨é…ç½®

```shell
listening-port=3478 #æŒ‡å®šç›‘å¬çš„ç«¯å£
external-ip=39.105.185.198 #æŒ‡å®šäº‘ä¸»æœºçš„å…¬ç½‘IPåœ°å€
user=aaaaaa:bbbbbb #è®¿é—® stun/turn æœåŠ¡çš„ç”¨æˆ·å’Œå¯†ç 
realm=stun.xxx.cn #åŸŸåï¼Œè¿™ä¸ªä¸€å®šè¦è®¾ç½®
```

(4) RTCPeerConnection å‚æ•°

```js
//åŸºæœ¬æ ¼å¼
pc = new RTCPeerConnection([configuration])
//Configuration å¯é€‰
dictionary RTCPeerConnection {
    sequence < RTCIceService > iceServers;
    RTCIceTransportPolicy iceTransportPolicy = "all";
    RTCBundlePolicy bundlePolicy = "balanced";
    RTCRtcpMuxPolicy rtcpMuxPolicy = "required";
    DOMString peerIdentity;
    sequence < RTCCertificate > certificates;
    [EnforceRange]
    octet iceCandidatePoolSize = 0;
};
```

bundlePolicy

* Balanced: éŸ³é¢‘ä¸è§†é¢‘è½¨ä½¿ç”¨å„è‡ªçš„ä¼ è¾“é€šé“
* max-compat: æ¯ä¸ªè½¨ä½¿ç”¨è‡ªå·±çš„ä¼ è¾“é€šé“
* max-bundle: éƒ½ç»‘å®šåˆ°åŒä¸€ä¸ªä¼ è¾“é€šé“

certificates: æˆæƒå¯ä»¥ä½¿ç”¨è¿æ¥çš„ä¸€ç»„è¯ä¹¦

#### 2021å¹´04æœˆ03æ—¥ å‘¨å…­ 14å‘¨

(1)WebRTC Learnï¼šç›´æ’­ç³»ç»Ÿä¸­çš„ä¿¡ä»¤åŠå…¶é€»è¾‘å…³ç³»

ç«¯åˆ°ç«¯ä¿¡ä»¤æ¶ˆæ¯ï¼šOffer æ¶ˆæ¯ã€Answeræ¶ˆæ¯ã€Candidate æ¶ˆæ¯

æœåŠ¡ç«¯ä¿¡ä»¤æ¶ˆæ¯ï¼š

* joined å·²åŠ å…¥æˆ¿é—´
* otherjoin å…¶ä»–ç”¨æˆ·åŠ å…¥æˆ¿é—´
* full æˆ¿é—´äººæ•°å·²æ»¡

* leaved å·²ç¦»å¼€æˆ¿é—´
* bye å¯¹æ–¹ç¦»å¼€æˆ¿é—´

(2)WebRTC Learnï¼šå®ç°1:1éŸ³è§†é¢‘å®æ—¶äº’åŠ¨ä¿¡ä»¤æœåŠ¡å™¨

(3WebRTC Learnï¼šå†è®ºCreateOffer

CreateOffer åŸºæœ¬æ ¼å¼

```js
// createOffer
aPromise = myPeerConnection.createOffer([options])
```

options å¯é€‰

`iceRestart` : é‡å¯ICEï¼Œé‡æ–°è¿›è¡Œ Candidate çš„æ”¶é›†

`voiceActivityDetection` : æ˜¯å¦å¼€å¯é™éŸ³æ£€æŸ¥ï¼Œé»˜è®¤å¼€å¯

#### 2021å¹´04æœˆ04æ—¥ å‘¨æ—¥ 14å‘¨

(1)WebRTC Learnï¼šå®¢æˆ·ç«¯çŠ¶æ€æœºåŠå¤„ç†é€»è¾‘

(2)WebRTC Learnï¼šå®¢æˆ·ç«¯çš„å®ç°

æ³¨æ„è¦ç‚¹ï¼š

* ç½‘ç»œè¿æ¥è¦åœ¨éŸ³è§†é¢‘æ•°æ®è·å–åˆ°ä¹‹åï¼Œå¦åˆ™æœ‰å¯èƒ½ç»‘å®šéŸ³è§†é¢‘æµå¤±è´¥
* å½“ä¸€ç«¯é€€å‡ºæˆ¿é—´åï¼Œå¦ä¸€ç«¯çš„ peerConnectionè¦å…³é—­é‡å»ºï¼Œå¦åˆ™ä¸æ–°ç”¨æˆ·äº’é€šæ—¶åª’ä½“åå•†ä¼šå¤±è´¥
* å¼‚æ­¥äº‹ä»¶å¤„ç†

(3)WebRTC Learnï¼šå¢åŠ PeerConnectoné€»è¾‘ä¹‹å®¢æˆ·ç«¯çš„å®ç°

(4)WebRTC Learnï¼šå¢åŠ åª’ä½“åå•†çš„é€»è¾‘ä¹‹å®¢æˆ·ç«¯çš„å®ç°

(5)WebRTC Learnï¼šRTPRReceiverå‘é€å™¨

#### 2021å¹´04æœˆ06æ—¥ å‘¨ä¸€ 15å‘¨

(1)WebRTC Learnï¼šRTPRReceiver å‘é€å™¨

RTP Media : ä¸»è¦æœ‰ä¸¤ä¸ªç±» Revier å’Œ Sender

* getReceivers: è·å¾—ä¸€ç»„ RTCRtpReceiver  å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶æ•°æ®ã€‚
* getSenders: è·å¾—ä¸€ç»„ RTCRtpSender  å¯¹è±¡ï¼Œç”¨äºå‘é€æ•°æ®ï¼Œæ¯ä¸ªå¯¹è±¡å¯¹åº”ä¸€ä¸ªåª’ä½“è½¨ã€‚

RTCRtpReceiver / RTCRtpSender å±æ€§

| æ–¹æ³•             | è¯´æ˜                                 |
| ---------------- | ------------------------------------ |
| MediaStreamTrack | åª’ä½“è½¨                               |
| RTCDtlsTransport | Transport åª’ä½“æ•°æ®ä¼ è¾“ç›¸å…³çš„å±æ€§     |
| RTCDtlsTransport | rtcpTransport ä¸ rtcp ä¼ è¾“ç›¸å…³çš„å±æ€§ |

RTCRtpReceiver 

| æ–¹æ³•                      | è¯´æ˜                                  |
| ------------------------- | ------------------------------------- |
| getParameters             | è¿”å› RTCRtpParameterå¯¹è±¡              |
| getSynchromizationSources | è¿”å›ä¸€ç»„SynchromizationSourceså®ä¾‹    |
| getContributingSources    | è¿”å›ä¸€ç»„getContributingSourceså®ä¾‹    |
| getStats                  | RTCStatsReport, é‡Œé¢åŒ…æ‹¬è¾“å…¥æµç»Ÿè®¡ä¿¡æ¯ |
| getCapabilites            | è¿”å›ç³»ç»Ÿèƒ½æ¥æ”¶çš„åª’ä½“èƒ½åŠ›(éŸ³é¢‘ã€è§†é¢‘)  |

(2)WebRTC Learnï¼šRTPSender å‘é€å™¨

| æ–¹æ³•           | è¯´æ˜                                         |
| -------------- | -------------------------------------------- |
| getParameters  | è¿”å› RTCRtpParameterå¯¹è±¡                     |
| setParameters  | è®¾ç½® RTP ä¼ è¾“ç›¸å…³çš„å‚æ•°                      |
| getStats       | æä¾›äº†è¾“å‡ºæµçš„ç»Ÿè®¡æ•°æ®                       |
| replaceTrack   | ç”¨å¦ä¸€ä¸ªtrack æ›¿æ¢ç°åœ¨çš„ trackï¼Œå¦‚åˆ‡æ¢æ‘„åƒå¤´ |
| getCapabilites | æŒ‰ç±»å‹(éŸ³é¢‘ã€è§†é¢‘)è¿”å›ç³»ç»Ÿå‘é€åª’ä½“çš„èƒ½åŠ›     |

RTCRtpTransceiver 

* getTransceiversï¼šä» PC è·å¾—ä¸€ç»„ RTCRtpTransceiver å¯¹è±¡ï¼Œæ¯ä¸ª RTCRtpTransceiver æ˜¯ RTPSender å’Œ RTCRtpReceiverå¯¹
* stop: åœæ­¢å‘é€å’Œæ¥æ”¶åª’ä½“æ•°æ®

(3)WebRTC Learnï¼šä¼ è¾“é€Ÿç‡çš„æ§åˆ¶-1

#### 2021å¹´04æœˆ08æ—¥ å‘¨å››  15å‘¨

(1)WebRTC Learnï¼šä¼ è¾“é€Ÿç‡çš„æ§åˆ¶-2

(2)WebRTC Learnï¼šWebRTCç»Ÿè®¡ä¿¡æ¯-1

(3)WebRTC Learnï¼šä¼ è¾“ééŸ³è§†é¢‘æ•°æ®åŸºç¡€çŸ¥è¯†

createDataChanel

```js
//åŸºæœ¬æ ¼å¼
aPromise = pc.createDataChanel(label[, options]);
//å‚æ•°
label: äººç±»å¯è¯»çš„å­—ç¬¦ä¸²
options: å¯é€‰
```

Option é€‰é¡¹(ä¸€)

* ordered

* maxPacketLifeTime/maxRetransmits

* negotiated 

  å¦‚æœä¸º false, ä¸€ç«¯ä½¿ç”¨ createDataChanelåˆ›å»ºé€šé“ï¼Œå¦ä¸€ç«¯ç›‘å¬ ondatachaneläº‹ä»¶ï¼›å¦‚æœä¸ºtrueï¼Œä¸¤ç«¯éƒ½å¯ä»¥è°ƒç”¨ createDataChanelåˆ›å»ºé€šé“ï¼Œé€šè¿‡idæ¥æ ‡è¯†åŒä¸€ä¸ªé€šé“ã€‚

* id

ä½¿ç”¨ Options

```js
var ch = pc.createDataChannel(
    "chat", {
        negotiated: true,
        id: 0
    }
)
```

DataChannel äº‹ä»¶ï¼šonmessage / onopen / onclose / onerror

#### 2021å¹´04æœˆ09æ—¥ å‘¨äº” 15å‘¨

(1)WebRTC Learnï¼šç«¯å¯¹ç«¯æ–‡æœ¬èŠå¤©

(2)WebRTC Learnï¼šç«¯åˆ°ç«¯æ–‡ä»¶ä¼ è¾“

* åˆ›å»º datachannel çš„æ—¶æœºä¸æ–‡æœ¬èŠå¤©ä¸€æ ·
* é€šè¿‡ js çš„ FileReader ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®
* ä»¥æ•°æ®å—ä¸ºå•ä½å‘é€æ•°æ®
* å‘é€æ•°æ®å…ˆè¦å°†æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ä»¥ä¿¡ä»¤æ–¹å¼é€šçŸ¥å¯¹æ–¹

(3)WebRTC Learnï¼šRTP-SRTPåè®®å¤´è®²è§£ RTP/SRTP - RTCP/SRTCP - DTLS

#### 2021å¹´04æœˆ10æ—¥ å‘¨å…­ 15å‘¨

(1)WebRTC Learnï¼šåè®®è§„èŒƒ RTCPä¸­çš„SRä¸PRæŠ¥æ–‡

RTCPåŒ…ï¼š UDP header ; RTCP header ; RTCP Data

â‘ . RTCPçš„ç«¯å£ä¸º RTPç«¯å£(å¶æ•°) + 1ï¼›

â‘¡. ä¸€ä¸ª RTCP åŒ…ä¸­ä¸€èˆ¬åŒ…å«å¤šä¸ªæŠ¥å‘Šï¼›

RTCP Payload Type

| PT   | ç¼©å†™ | è¯´æ˜                       |
| ---- | ---- | -------------------------- |
| 200  | SR   | Send Report packet         |
| 201  | RR   | Receiver Report packet     |
| 202  | SDES | Source Description packet  |
| 203  | BYE  | Goodbye packet             |
| 204  | APP  | Application-defined packet |

Sender Info è¯´æ˜

| å­—æ®µ          | è¯´æ˜                                   |
| ------------- | -------------------------------------- |
| NTP           | 64ä½ï¼Œç½‘ç»œæ—¶é—´æˆ³ï¼Œç”¨äºä¸åŒæºä¹‹é—´çš„åŒæ­¥ |
| RTP timestamp | 32ä½ï¼Œç›¸å¯¹æ—¶é—´æˆ³ï¼Œä¸RTPåŒ…æ—¶é—´æˆ³ä¸€è‡´    |
| packet count  | 32ä½ï¼Œæ€»å‘åŒ…æ•°ï¼ŒSSRCå˜åŒ–æ—¶è¢«é‡ç½®       |
| octet count   | 32ä½ï¼Œæ€»å…±å‘é€çš„å­—èŠ‚æ•°                 |

(2)WebRTC Learnï¼šã€åè®®è§„èŒƒã€‘DTSL

(3)WebRTC Learnï¼šwireshark åˆ†æ rtp-rtcp åŒ…

#### 2021å¹´04æœˆ11æ—¥ å‘¨æ—¥ 15å‘¨

(1)WebRTC Learnï¼šAndroid ä¸ æµè§ˆå™¨äº’é€šåŸºæœ¬çŸ¥è¯†

* è·å–æƒé™ï¼šCameraæƒé™ - å½•åˆ¶ Audio æƒé™ - Internet æƒé™
* å¼•å…¥åº“(WebRTCã€socket.io)
* ä¿¡ä»¤å¤„ç†
* WebRTCå¤„ç†æµç¨‹

Android æƒé™ç”³è¯·

```java
//ç”³è¯·é™æ€æƒé™
<uses-permissionandroid:name="android.permission.CAMERA" />
//ç”³è¯·åŠ¨æ€æƒé™
void requestPermissions(String[] permissions,intrequestCode)
```

å¼•å…¥åº“

```java
// WebRTC
implementation 'org.webrtc:google-webrtc:1.0.+'
// socket.io
implementation 'socket:socket.io-client:1.0.0'
// easypermission
implementation 'pub.devrel:easypermission:1.1.3'
```

ä¿¡ä»¤å¤„ç†

å®¢æˆ·ç«¯æ¶ˆæ¯ï¼šjoinã€leaveã€messageï¼ˆofferã€answerã€candidateï¼‰

æœåŠ¡ç«¯æ¶ˆæ¯ï¼šjoinedã€leavedã€other_joinedã€byeã€full

Andoid socket.io

å‘æ¶ˆæ¯: `socket.emit("join",argrs);` æ”¶æ¶ˆæ¯ï¼š `socket.on("join", Listener); `

(2)WebRTC Learnï¼šWebRTCNativeå¼€å‘é€»è¾‘

WebRTCå¤„ç†æµç¨‹ï¼šVideoCapture => Source => Track => Sink Render

#### 2021å¹´04æœˆ12æ—¥ å‘¨ä¸€ 16å‘¨

(1) WebRTC Learnï¼šæƒé™ç”³è¯·-åº“çš„å¼•å…¥ä¸ç•Œé¢

(2) WebRTC Learnï¼šé€šè¿‡socket.ioå®ç°ä¿¡ä»¤æ”¶å‘

(3) WebRTC Learnï¼šAndoridä¸æµè§ˆå™¨äº’é€š

#### 2021å¹´04æœˆ13æ—¥ å‘¨äºŒ 16å‘¨

(1) WebRTC Learnï¼šiOSæƒé™è·å–

(2) WebRTC Learnï¼šiOSå¼•å…¥WebRTCåº“

* é€šè¿‡ Pod æ–¹å¼å¼•å…¥
* ç¼–è¯‘ WebRTC æºç ï¼Œæ‰‹åŠ¨å¼•å…¥

å¼•å…¥ WebRTC åº“

* ç¼–å†™ Podfile
* pod install
* open ${project}.xcworkspace

(3) WebRTC Learnï¼šiOSç«¯SocketIOçš„ä½¿ç”¨

* é€šè¿‡ socket.io è¿æ¥æœåŠ¡ç«¯
* å‘é€æ¶ˆæ¯
* æ³¨å†Œä¾¦å¬çš„æ¶ˆæ¯

#### 2021å¹´04æœˆ14æ—¥ å‘¨ä¸‰ 16å‘¨

(1) WebRTC Learnï¼šiOSç•Œé¢å¸ƒå±€

(2) WebRTC Learnï¼šiOSç«¯RTCPeerConnection

(3) WebRTC Learnï¼šiOSåª’ä½“åå•†

(4) WebRTC Learnï¼šiOSè¿œç«¯è§†é¢‘æ¸²æŸ“

RTCPeerConnection å§”æ‰˜

* didGenerateIceCandidate
* didAddReceiver
* didOpenDataChannel

#### 2021å¹´04æœˆ15æ—¥ å‘¨å›› 16å‘¨

##### 2-1 ä»€ä¹ˆæ˜¯æ•°æ®å¯è§†åŒ–

æ•°æ®å¯è§†åŒ–æ˜¯ä¸€é—¨å­¦ç§‘ï¼›ä¸æ•°æ®å’Œè§†è§‰æœ‰å…³ã€‚æ•°æ®å¯è§†åŒ–ç®€å•ç†è§£å°±æ˜¯å°†æ•°æ®è½¬æ¢æˆæ˜“äºäººä»¬è¾¨è¯†å’Œç†è§£çš„è§†è§‰è¡¨è¾¾å½¢å¼ï¼Œå¦‚å„ç§2Då›¾è¡¨ã€3Då›¾è¡¨ã€åœ°å›¾ã€çŸ¢é‡å›¾ç­‰ç­‰ã€‚

#### 2021å¹´04æœˆ16æ—¥ å‘¨äº” 16å‘¨

##### 2-2 æ•°æ®å¯è§†åŒ–å‘å±•å†å²

æ•°æ®å¯è§†åŒ–èµ·æºäº20ä¸–çºª60å¹´ä»£è¯ç”Ÿçš„è®¡ç®—æœºå›¾å½¢å­¦ï¼ˆCGï¼‰ï¼Œä¸€ç§ä½¿ç”¨æ•°å­¦ç®—æ³•å°†äºŒç»´æˆ–ä¸‰ç»´å›¾å½¢è½¬åŒ–ä¸ºè®¡ç®—æœºæ˜¾ç¤ºå™¨çš„æ …æ ¼å½¢å¼çš„ç§‘å­¦ã€‚è®¡ç®—æœºå›¾å½¢å­¦å¹¿æ³›åº”ç”¨äºæ“ä½œç³»ç»Ÿã€å·¥ç¨‹åˆ¶å›¾ã€è®¡ç®—æœºåŠ¨ç”»ã€è®¡ç®—æœºæ¸¸æˆã€è™šæ‹Ÿç°å®ã€æ•°æ®å¯è§†åŒ–ã€‚

##### 2-3 æ•°æ®å¯è§†åŒ–çš„åº”ç”¨åœºæ™¯

ç®€å•åº”ç”¨ï¼šå•å‡»ç¦»çº¿ï¼›æ•°æ®é‡å°ã€ç»´åº¦å°‘ï¼›å…¸å‹åº”ç”¨ï¼šExcelã€Xmindã€Visioã€OminiGraffleï¼›å¤æ‚åº”ç”¨ï¼šäº’è”ç½‘åº”ç”¨ï¼›æ•°æ®é‡å¤§ï¼Œç»´åº¦å¤šï¼›å…¸å‹åº”ç”¨ï¼šæ•°æ®å¤§å±ã€æ•°æ®æŠ¥è¡¨ã€åœ°å›¾ã€

##### 2-4 æ•°æ®å¯è§†åŒ–çš„å‘å±•å‰æ™¯

æˆä¸ºå‰ç«¯å·¥ç¨‹å¸ˆçš„æ ‡å‡†æŠ€èƒ½ï¼›å¢é•¿è‡ªèº«ç«äº‰åŠ›ï¼›æ•°æ®å¯è§†åŒ–äº§å“åŒ–æˆ–æœåŠ¡åŒ–ï¼Œç±»ä¼¼é˜¿é‡Œäº‘datavã€è…¾è®¯äº‘å›¾ï¼›å¾€å…¶ä»–ç»˜å›¾é¢†åŸŸå‘å±•ã€å¦‚æµè§ˆå™¨æ¸¸æˆã€3Dç»˜å›¾ã€ç»˜å›¾å·¥å…·ç­‰ã€‚

#### 2021å¹´04æœˆ17æ—¥ å‘¨å…­ 16å‘¨

##### 3-1 å‰ç«¯å¯è§†åŒ–è§£å†³æ–¹æ¡ˆ

ç¬¬å››å±‚ï¼š `Highcharts` / `Echarts` / `AntV` ï¼›ç¬¬ä¸‰å±‚ï¼š `three.js` / `zrender` / `d3`

ç¬¬äºŒå±‚ï¼š `Canvas` / `Svg` / `WegGL` / `HTML` ï¼›ç¬¬ä¸€å±‚ï¼š `Chrome` ï¼›æœ€åº•å±‚ï¼š `Skia` / `OpenGL`

##### 3-2 Canvas

1. ç¼–å†™ `canvas` æ ‡ç­¾ï¼ˆæ³¨æ„æŒ‡å®šå®½é«˜ï¼‰ï¼›2. è·å– `canvas DOM` å¯¹è±¡ï¼›3. è·å– `Canvas ` å¯¹è±¡ï¼›4. è®¾ç½®ç»˜å›¾å±æ€§ï¼›5. è°ƒç”¨ç»˜å›¾ `API`

##### 3-3 SVG å…¥é—¨

SVG æ˜¯ä¸€ç§åŸºäº XML çš„å›¾åƒæ–‡ä»¶æ ¼å¼ï¼ŒScalable Vector Graphicsï¼Œæ„æ€ä¸ºå¯ç¼©æ”¾çš„çŸ¢é‡å›¾å½¢ã€‚

#### 2021å¹´04æœˆ19æ—¥ å‘¨ä¸€ 17å‘¨

##### 3-4 webglæŠ€æœ¯åˆ†äº«

`WebGL` ï¼ˆWeb Graphics Libraryï¼‰æ˜¯ä¸€ç§3Dç»˜å›¾åè®®ï¼ŒWebGL  å¯ä»¥ä¸º HTML5 Canvas æä¾›ç¡¬ä»¶ 3D åŠ é€Ÿæ¸²æŸ“ï¼Œè¿™æ · Web å¼€å‘äººå‘˜å°±å¯ä»¥å€ŸåŠ©ç³»ç»Ÿæ˜¾å¡æ¥åœ¨æµè§ˆå™¨é‡Œæ›´æµç•…åœ°å±•ç¤º 3D åœºæ™¯å’Œæ¨¡å‹äº†ï¼Œè¿˜èƒ½åˆ›å»ºå¤æ‚çš„å¯¼èˆªå’Œæ•°æ®è§†è§‰åŒ–ã€‚

##### 3-5 zrender å…¥é—¨

zrender æ˜¯äºŒç»´ç»˜å›¾å¼•æ“ï¼Œå®ƒæä¾› Canvasã€SVGã€VML ç­‰å¤šç§æ¸²æŸ“æ–¹å¼ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ Echarts çš„æ¸²æŸ“å™¨ã€‚

zrender ç»˜å›¾æµç¨‹ï¼š

> 1. å¼•å…¥ zrender åº“
>
> 2. ç¼–å†™ div å®¹å™¨
>
> 3. åˆå§‹åŒ– zrender å¯¹è±¡
>
> 4. åˆå§‹åŒ– zrender ç»˜å›¾å¯¹è±¡
>
> 5. è°ƒç”¨ zrender add æ–¹æ³•ç»˜å›¾

#### 2021å¹´04æœˆ21æ—¥ å‘¨ä¸‰ 17å‘¨

##### 3-6 d3 å…¥é—¨

D3 (Data-Driven Documents) æ˜¯ä¸€ä¸ª JavaScript å›¾å½¢åº“ï¼ŒåŸºäº Canvasã€SVGå’ŒHTMLã€‚

##### 3-7 three.js ä»‹ç»

Three.js æ˜¯ä¸€ä¸ªåŸºäº WebGL çš„ JavaScript 3D å›¾å½¢åº“ã€‚

#### 2021å¹´04æœˆ23æ—¥ å‘¨äº” 17å‘¨

##### 3-9 canvas é«˜çº§åº”ç”¨ï¼šå›¾ç‰‡å‹ç¼©ç®—æ³•å®ç°(ä¸Š)

##### 3-10 canvas é«˜çº§åº”ç”¨ï¼šå›¾ç‰‡å‹ç¼©ç®—æ³•å®ç°(ä¸Š) 

#### 2021å¹´04æœˆ24æ—¥ å‘¨å…­ 17å‘¨

##### 4-1 highcharts ä»‹ç»

Highcharts æ˜¯ä¸€ä¸ªç”¨çº¯ JavaScript ç¼–å†™çš„å›¾è¡¨åº“ï¼Œèƒ½å¤Ÿå¾ˆç®€å•ä¾¿æ·çš„åœ¨ web ç½‘ç«™æˆ–æ˜¯ web åº”ç”¨ç¨‹åºæ·»åŠ æœ‰äº¤äº’æ€§çš„å›¾è¡¨ï¼Œå¹¶ä¸”å…è´¹æä¾›ç»™ä¸ªäººå­¦ä¹ ã€ä¸ªäººç½‘ç«™å’Œéå•†ä¸šç”¨é€”ä½¿ç”¨ã€‚Highcharts åŒ…å« Highcharts JSï¼ŒHighstock JSï¼ŒHighmaps JS ä¸‰æ¬¾è½¯ä»¶ï¼Œå‡ä¸ºçº¯ JavaScript ç¼–å†™HTML5 çš„å›¾è¡¨ã€‚

##### 4-2 antv-g2 å…¥é—¨

Antv G2 çš„ç»˜å›¾æµç¨‹ï¼š

1. å¼•å…¥ js åº“
2. ç¼–å†™æ¸²æŸ“å®¹å™¨ DOM
3. å‡†å¤‡æ¸²æŸ“æ•°æ®
4. è·å–æ¸²æŸ“ DOM
5. åˆå§‹åŒ– G2 ç»˜å›¾å¯¹è±¡(å¦‚: G2Plot.Line)ï¼Œé…ç½®ç»˜å›¾å‚æ•°
6. è°ƒç”¨ render å®Œæˆæ¸²æŸ“

#### 2021å¹´04æœˆ25æ—¥ å‘¨æ—¥ 17å‘¨

##### 4-3 antv-g6 å…¥é—¨

Antv G6 çš„ç»˜å›¾æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ

> 1. å¼•å…¥jsåº“ 2. ç¼–å†™æ¸²æŸ“å®¹å™¨ DOM 3. å‡†å¤‡æ¸²æŸ“æ•°æ® 4. è·å–æ¸²æŸ“ DOM å¯¹è±¡ 
>
> 5. åˆå§‹åŒ– G6 ç»˜å›¾å¯¹è±¡(å¦‚ï¼šG6. Graph)ï¼Œé…ç½®ç»˜å›¾å‚æ•° 6. è°ƒç”¨ render å®Œæˆæ¸²æŸ“

##### 4-4 antv-l7 å…¥é—¨

Antv l7 çš„ç»˜å›¾æµç¨‹

> 1. å¼•å…¥ js åº“ï¼›2. ç¼–å†™æ¸²æŸ“å®¹å™¨ DOMï¼› 3. åˆå§‹åŒ–åœ°å›¾å¯¹è±¡ L7. Scene; 4. è¯·æ±‚æ•°æ®ï¼›5. æ•°æ®æ¸…æ´—ï¼›
>
> 6. åˆå§‹åŒ–ç»˜å›¾å¯¹è±¡(å¦‚ï¼šL7. PointLayer)ï¼›7. è°ƒç”¨ L7. Scene.addLayer æ–¹æ³•ç»˜å›¾

#### 2021å¹´04æœˆ26æ—¥ å‘¨ä¸€ 18å‘¨

##### 4-5 echarts å…¥é—¨

Echarts æ˜¯ä¸€ä¸ªä½¿ç”¨ JavaScript å®ç°çš„å¼€æºå¯è§†åº“ï¼Œå¯ä»¥æµç•…åœ°è¿è¡Œåœ¨PCå’Œç§»åŠ¨è®¾å¤‡ä¸Šï¼Œå…¼å®¹å½“å‰ç»å¤§éƒ¨åˆ†æµè§ˆå™¨(IE8/9/10/11ï¼ŒChromeï¼ŒFirefoxï¼ŒSafariç­‰ )ï¼Œåº•å±‚ä¾èµ–çŸ¢é‡å›¾å½¢åº“ ZRenderï¼Œæä¾›ç›´è§‚ï¼Œäº¤äº’ä¸°å¯Œï¼Œå¯é«˜åº¦ä¸ªæ€§åŒ–å®šåˆ¶çš„æ•°æ®å¯è§†åŒ–å›¾è¡¨ã€‚

##### 4-6 echarts è‡ªå®šä¹‰ä¸»é¢˜å’Œsvgæ¸²æŸ“

ç³»åˆ—(series)æ˜¯æŒ‡ï¼šä¸€ç»„æ•°å€¼æ˜ å°„æˆå¯¹åº”çš„å›¾ã€‚

#### 2021å¹´04æœˆ27æ—¥ å‘¨äºŒ 18å‘¨

##### 4-8 echarts æ–°ç‰¹æ€§ dataset

Echarts 4 å¼€å§‹æ”¯æŒäº†æ•°æ®é›†(dataset) ç»„ä»¶ç”¨äºå•ç‹¬çš„æ•°æ®é›†å£°æ˜ï¼Œä»è€Œæ•°æ®å¯ä»¥å•ç‹¬ç®¡ç†ï¼Œè¢«å¤šä¸ªç»„ä»¶å¤ç”¨ï¼Œå¹¶ä¸”å¯ä»¥è‡ªç”±æŒ‡å®šæ•°æ®åˆ°è§†è§‰çš„æ˜ å°„ã€‚è¿™ä¸€ç‰¹æ€§èƒ½å°†é€»è¾‘å’Œæ•°æ®åˆ†ç¦»ï¼Œå¸¦æ¥æ›´å¥½çš„å¤ç”¨ï¼Œå¹¶æ˜“äºç†è§£ã€‚

##### 4-9 echarts ç»„ä»¶

ECharts ä¸­é™¤äº†ç»˜å›¾ä¹‹å¤–å…¶ä»–éƒ¨åˆ†ï¼Œéƒ½å¯æŠ½è±¡ä¸ºã€Œç»„ä»¶ã€ã€‚ä¾‹å¦‚ï¼ŒECharts ä¸­è‡³å°‘æœ‰è¿™äº›ç»„ä»¶ï¼šxAxis componentã€yAxis componentã€grid componentã€angleAxis componentã€tootip  componentã€ legend  componentã€ visualMap  componentã€ dataZoom  componentã€‚

#### 2021å¹´04æœˆ30æ—¥ å‘¨äº” 18å‘¨

##### 4-10 echarts å®šä½

å¯ä»¥é‡‡ç”¨ç±»ä¼¼ CSS absolute çš„å®šä½å±æ€§æ¥æ§åˆ¶ç»„ä»¶çš„ä½ç½®ï¼Œechats ä¸­å¯ä»¥é€šè¿‡ä¿®æ”¹ grid ç»„ä»¶å®šä½æ¥æ§åˆ¶å›¾è¡¨çš„ä½ç½®ã€‚

```js
grid: {
    top: 100,
    left: '10%',
    right: '10%',
    bottom: 100,
},
```

#### 2021å¹´05æœˆ01æ—¥ å‘¨å…­ 18å‘¨

##### 4-11 echarts åæ ‡ç³»

Echarts åŸºæœ¬æ¦‚å¿µï¼šåæ ‡ç³»

----

å¾ˆå¤šç³»åˆ—ï¼Œä¾‹å¦‚ line(æŠ˜çº¿å›¾)ã€bar(æŸ±çŠ¶å›¾)ã€scatter(æ•£ç‚¹å›¾)ã€heatmap(çƒ­åŠ›å›¾)ç­‰ç­‰ï¼Œéœ€è¦è¿è¡Œåœ¨â€œåæ ‡ç³»â€ä¸Šã€‚åæ ‡ç³»ç”¨äºå¸ƒå±€è¿™äº›å›¾ï¼Œä»¥åŠæ˜¾ç¤ºæ•°æ®çš„åˆ»åº¦ç­‰ç­‰ã€‚ä¾‹å¦‚ Echarts ä¸­è‡³å°‘æ”¯æŒè¿™äº›åæ ‡ï¼šç›´è§’åæ ‡ç³»ã€æåæ ‡ç³»ã€åœ°ç†åæ ‡ç³»ã€å•è½´åæ ‡ç³»ã€æ—¥å†åæ ‡ç³»ç­‰ã€‚å…¶ä»–ç³»åˆ—ï¼Œä¾‹å¦‚ pie(é¥¼çŠ¶å›¾)ã€tree(æ ‘å›¾)ç­‰ç­‰ï¼Œå¹¶ä¸ä¾èµ–åæ ‡ç³»ï¼Œèƒ½ç‹¬ç«‹å­˜åœ¨ã€‚è¿˜æœ‰ä¸€äº›å›¾ï¼Œä¾‹å¦‚ graph(å…³ç³»å›¾)ç­‰ï¼Œæ—¢èƒ½ç‹¬ç«‹å­˜åœ¨ï¼Œä¹Ÿèƒ½å¸ƒå±€åœ¨åæ ‡ç³»ä¸­ï¼Œä¾æ®ç”¨æˆ·çš„è®¾å®šè€Œæ¥ã€‚

ä¸€ä¸ªåæ ‡ç³»ï¼Œå¯èƒ½ç”±å¤šä¸ªç»„ä»¶åä½œè€Œæˆã€‚æˆ‘ä»¬ä»¥æœ€å¸¸è§çš„ç›´è§’åæ ‡ç³»æ¥ä¸¾ä¾‹ã€‚ç›´è§’åæ ‡ç³»ä¸­ï¼ŒåŒ…æ‹¬æœ‰xAxis(ç›´è§’åæ ‡ç³»Xè½´)ã€yAxis(ç›´è§’åæ ‡ç³»Yè½´)ã€grid(ç›´è§’åæ ‡ç³»åº•æ¿)ä¸‰ç§ç»„ä»¶ã€‚xAxisã€yAxis è¢« grid è‡ªåŠ¨å¼•ç”¨å¹¶ç»„ç»‡èµ·æ¥ï¼Œå…±åŒå·¥ä½œã€‚

æ¡ˆä¾‹ï¼šæ•£ç‚¹å›¾

----

æœ€ç®€å•çš„ä½¿ç”¨ç›´è§’åæ ‡ç³»çš„æ–¹å¼ï¼šåªå£°æ˜äº† xAxis ã€yAxis å’Œ ä¸€ä¸ª scatter(æ•£ç‚¹å›¾æ ‡ç³»åˆ—)ï¼ŒEcharts ä¼šä¸ºå®ƒä»¬åˆ›å»º grid å¹¶è¿›è¡Œå…³è”ã€‚

#### 4-12 echarts åŒåæ ‡ç³»

å½“ä¸¤ä¸ª yAxisï¼Œå…±äº«äº†ä¸€ä¸ª xAxisã€‚ä¸¤ä¸ª seriesï¼Œä¹Ÿå…±äº«äº†è¿™ä¸ª xAxisï¼Œä½†æ˜¯åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„ yAxisï¼Œä½¿ç”¨ `yAxisIndex` æ¥æŒ‡å®šå®ƒè‡ªå·±ä½¿ç”¨çš„æ˜¯å“ªä¸ª yAxisã€‚

#### 4-13 echarts å¤šåæ ‡ç³»

ä¸€ä¸ª Echarts å®ä¾‹ä¸­ï¼Œæœ‰å¤šä¸ª gridï¼Œæ¯ä¸ª grid åˆ†åˆ«æœ‰ xAxisã€yAxisï¼Œä»–ä»¬ä½¿ç”¨ `xAxisIndex` ã€ `yAxisIndex` ã€ `gridIndex` æ¥æŒ‡å®šå¼•ç”¨å…³ç³»ã€‚

#### 4-14 ä¸‰ç§æŠ€æœ¯æ ˆå¯¹æ¯”

Echarts VS Highcharts

* Highcharts èƒ½å¤Ÿå…¼å®¹ IE6+ï¼ŒEcharts é€šè¿‡ VMLå…¼å®¹ä½ç«¯æµè§ˆå™¨
* Highcharts æ–‡æ¡£ä½“éªŒç•¥èƒœä¸€ç­¹
* Highcharts æ”¶è´¹ï¼ŒEcharts å…è´¹
* Highcharts åŸºäº svg å®ç°ï¼ŒEcharts é»˜è®¤é‡‡ç”¨ canvas æ¸²æŸ“ï¼Œ4.0 æ”¯æŒ svg æ¸²æŸ“
* Echarts å›½å†…çŸ¥ååº¦æ›´é«˜ï¼Œå›½å†…ä¼ä¸šè®¤å¯åº¦æ›´é«˜

Echarts VS Antv

* Antv æ–‡æ¡£é˜…è¯»ä½“éªŒæ›´ç¬¦åˆäº’è”ç½‘äº§å“ä½¿ç”¨ä¹ æƒ¯
* Antv  äº§å“ä½“ç³»æ‹†åˆ†æ›´åŠ æ¸…æ™°ï¼Œä½†ä¸€å®šç¨‹åº¦ä¸Šæå‡äº†å­¦ä¹ æˆæœ¬
* Echarts ç¤¾åŒºæ›´å¼ºå¤§ï¼Œä½¿ç”¨æ›´åŠ å¹¿æ³›

Echarts ä¼˜åŠ¿æ€»ç»“

ç®€å•æ˜“ç”¨ã€æ–‡æ¡£å…¨é¢ã€ç¤¾åŒºå¼ºå¤§ã€é«˜çŸ¥ååº¦

#### 2021å¹´05æœˆ04æ—¥ å‘¨äºŒ 19å‘¨

##### 5-2 æ•°æ®æŠ¥è¡¨é¡¹ç›®ç®€ä»‹

åˆ›å»ºé¡¹ç›®ï¼šå®‰è£… vue-cli / åˆå§‹åŒ–é¡¹ç›® / å®‰è£… vue-router / å®‰è£… element-ui

é™æ€é¡µé¢å¼€å‘é˜¶æ®µï¼šæ ¸å¿ƒæŒ‡æ ‡ / é”€å”®ä¸šç»© /  åŒºåŸŸæ’å / åˆ†ç±»æ’å / é”€å”®åˆ†å¸ƒ / è½¬åŒ–ç‡ /  çƒ­é—¨æœç´¢

API è”è°ƒï¼šè¯·æ±‚å°è£… / API ç¼–å†™ / API è”è°ƒ /  åŠŸèƒ½æµ‹è¯•

å‘å¸ƒä¸Šçº¿ï¼šåŸŸåç§Ÿèµ / æœåŠ¡å™¨ç§Ÿèµ / Nginx æœåŠ¡éƒ¨ç½² / è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ 

é›†æˆ vue-element-admin: vue-element-admin åˆå§‹åŒ– / ç™»å½• API è”è°ƒ / æ•°æ®æŠ¥è¡¨é¡µé¢é›†æˆ

##### 5-3 å…³äºæŠ€æœ¯é€‰å‹çš„è¯´æ˜

æœ¬é¡¹ç›®ä¸­ä½¿ç”¨ vue 2.6 çš„ç‰ˆæœ¬ï¼Œæ ¹æ®éœ€è¦åç»­å°†å‡çº§è‡³ 3.0 ç‰ˆæœ¬ã€‚

##### 5-4 é¡¹ç›®åˆå§‹åŒ–

å…¨å±€å®‰è£… vue/cliï¼š `npm i -g @vue/cli@4.3.1`

åˆ›å»ºé¡¹ç›® datav-report-dev: `vue create datav-report-dev`

å¦‚æœå®‰è£…è¾ƒæ…¢ï¼Œå»ºè®®ä½¿ç”¨å›½å†…çš„æ·˜å®é•œåƒï¼š

```shell
vue create datav-report-dev --registry=https://registry.npm.taobao.org
```

å¯åŠ¨é¡¹ç›®

```shell
npm run serve
```

#### 2021å¹´05æœˆ08æ—¥ å‘¨å…­ 19å‘¨

##### 5-5 Element-UI å’Œ Echarts å¼•å…¥

```shell
vue add element
npm i -S echarts@4.7.0
```

##### 5-6 å®¹å™¨ç»„ä»¶åˆå§‹åŒ–

#### 2021å¹´05æœˆ22æ—¥ å‘¨å…­ 21å‘¨

##### 4-12 åœ¨ Vue ä¸­ä½¿ç”¨æ’æ§½

ä½¿ç”¨åœºæ™¯ï¼šå½“å­ç»„ä»¶çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œæ˜¯æ ¹æ®çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ DOM å…ƒç´ è¿›è¡Œæ˜¾ç¤ºçš„æ—¶å€™ã€‚æ’æ§½åªæœ‰ä¸€ä¸ªï¼Œè€Œå…·åæ’æ§½å¯ä»¥æœ‰å¤šä¸ªï¼Œå…·åæ’æ§½ä¹Ÿå¯ä»¥è®¾ç½®é»˜è®¤å€¼ã€‚

```vue
<body>
  <div id="root">
    <body-content>
      <div class="header" slot="header">header</div>
      <div class="footer" slot="footer">footer</div>
    </body-content>
  </div>
  <script>
    Vue.component('body-content', {
      template: `<div>
        <slot name="header">
        <h1>default header</h1>
        </slot>
        <div class='content'>content</content>
        <slot name="footer"></slot>
      </div>`
    })
    var vm = new Vue({
      el: '#root'
    })
  </script>
</body>
```

#### 4-13 åœ¨ Vue ä¸­ä½¿ç”¨ä½œç”¨äºæ’æ§½

ä½œç”¨åŸŸæ’æ§½å¿…é¡»æ˜¯ template å¼€å¤´å’Œç»“å°¾ï¼Œ `slot-scope="props"` æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼ã€‚

```vue
<body>
  <div id="root">
    <child>
      <template slot-scope="props">
        <h1>{{props.item}} - jerry</h1>
      </template>
    </child>
  </div>
  <script>
    Vue.component('child', {
      data:function() {
        return {
          list:[1,2,3,4,5]
        }
      },
      template: `<div>
           <ul>
            <slot
              v-for = "item of list"
              :item = item
            >
              </slot>
            </ul>
        </div>
      `
    })
    var vm = new Vue({
      el: '#root'
    })
  </script>
</body>
```

#### 4-15 åŠ¨æ€ç»„ä»¶ä¸ v-once æŒ‡ä»¤

```vue
<body>
  <!--åŠ¨æ€ç»„ä»¶-->
  <div id="root">
    <component :is="type"></component>
    <!-- <child-one v-if="type==='child-one'"></child-one>
    <child-two v-if="type==='child-two'"></child-two> -->
    <button @click="handleBtnClick">change</button>
  </div>
  <script>
    Vue.component('child-one', {
      template: `<div>child-one</div>`
    })
    Vue.component('child-two', {
      template: `<div>child-two</div>`
    })
    var vm = new Vue({
      data: {
        type: 'child-one'
      },
      el: '#root',
      methods: {
        handleBtnClick() {
          this.type = this.type === 'child-one' ? "child-two" : "child-one"
        }
      },
    })
  </script>
</body>
```

v-once å†…éƒ¨çš„å†…å®¹åªæ¸²æŸ“ä¸€æ¬¡ã€‚

```vue
<body>
  <div id="root" v-once>
    <!-- <component :is="type"></component> -->
  </div>
  <script>
    Vue.component('child-one', {
      template: `<div>child-one</div>`
    })
    Vue.component('child-two', {
      template: `<div>child-two</div>`
    })
    var vm = new Vue({
      data: {
        type: 'child-one'
      },
      template:`
      <div v-once>
          <child-one v-if="type==='child-one'" />
          <child-two v-if="type==='child-two'" />
          <button @click="handleBtnClick">change</button>
      </div>
      `,
      el: '#root',
      methods: {
        handleBtnClick() {
          this.type = this.type === 'child-one' ? "child-two" : "child-one"
        }
      },
    })
  </script>
</body>
```

#### 2021å¹´05æœˆ23æ—¥ å‘¨æ—¥ 21å‘¨

##### 1-1 Vueé¡¹ç›®é¢„çƒ­ - ç¯å¢ƒé…ç½®

æ—§ç‰ˆ vue-cli åˆ›å»ºé¡¹ç›®ï¼ŒVue 2.x

```bash
# å…¨å±€å®‰è£…  vue-cli
npm i -g  vue-cli
# åˆ›å»ºä¸€ä¸ªåŸºäº webpack æ¨¡æ¿çš„æ–°é¡¹ç›®
vue  init webpack travel-project
# å®‰è£…ä¾èµ–
cd travel-projec
npm i
npm run dev
```

æ–°ç‰ˆ vue/cli åˆ›å»ºé¡¹ç›®ï¼ŒVue 3.x

```bash
# å…¨å±€å®‰è£…  vue-cli
npm install -g @vue/cli
npm uninstall -g @vue/cli
# åˆ›å»ºä¸€ä¸ªåŸºäº webpack æ¨¡æ¿çš„æ–°é¡¹ç›®
vue create project-travel
# å®‰è£…ä¾èµ–
cd my-project
npm run serve
```

##### 1-2 Vueé¡¹ç›®é¢„çƒ­ - é¡¹ç›®ç¯å¢ƒå‡†å¤‡ï¼ˆç­”ç–‘ï¼‰

æœ¬æ¬¡é¡¹ç›®ä¸­ä½¿ç”¨ vue 2.xï¼Œvue/cli æ˜¯ vue 3.x ï¼Œéœ€è¦å…ˆå¸è½½æ–°ç‰ˆ vue/cli ï¼Œå®‰è£…æ—§ç‰ˆ vue-cli

```bash
npm i -g vue-cli
```

##### 1-3 Vueé¡¹ç›®é¢„çƒ­ - é¡¹ç›®ä»£ç ç»“æ„

##### 1-4 Vueé¡¹ç›®é¢„çƒ­ - å•æ–‡ä»¶ç»„ä»¶ä¸Vueä¸­çš„è·¯ç”±ï¼ˆ1ï¼‰

è·¯ç”±å°±æ˜¯æ ¹æ®ç½‘å€çš„ä¸åŒï¼Œè¿”å›ä¸åŒçš„å†…å®¹ç»™ç”¨æˆ·ã€‚router-view æ˜¾ç¤ºçš„æ˜¯å½“å‰è·¯ç”±åœ°å€æ‰€å¯¹åº”çš„å†…å®¹ã€‚

##### 1-5 Vueé¡¹ç›®é¢„çƒ­ - å•æ–‡ä»¶ç»„ä»¶ä¸Vueä¸­çš„è·¯ç”±ï¼ˆ2ï¼‰

åˆ›å»º vue æ¨¡æ¿æ–‡ä»¶å¿«æ·é”® vbase

##### 1-6 Vueé¡¹ç›®é¢„çƒ­ - å•é¡µåº”ç”¨VSå¤šé¡µåº”

å¤šé¡µåº”ç”¨ï¼šé¡µé¢è·³è½¬è¿”å› HTML ï¼Œä¼˜ç‚¹ï¼šé¦–å±æ—¶é—´å¿«ï¼ŒSEO æ•ˆæœå¥½ï¼›ç¼ºç‚¹ï¼šé¡µé¢åˆ‡æ¢æ…¢ã€‚

å¤šé¡µé¢æŒ‡æ¯è®¿é—®ä¸€ä¸ªé¡µé¢ï¼ŒæœåŠ¡å™¨å¯¹åº”è¿”å›ä¸€ä¸ªæ–°çš„htmlæ–‡ä»¶ã€‚

å•é¡µåº”ç”¨ï¼šé¡µé¢è·³è½¬ JS æ¸²æŸ“ï¼Œä¼˜ç‚¹ï¼šé¡µé¢åˆ‡æ¢å¿«ï¼›ç¼ºç‚¹ï¼šé¦–å±æ—¶é—´ç¨æ…¢ï¼ŒSEO å·®ã€‚

å•é¡µé¢åº”ç”¨çš„åŸç†æ˜¯åˆ©ç”¨jsæ„ŸçŸ¥åˆ°urlçš„å˜åŒ–, é€šè¿‡jsåŠ¨æ€çš„å°†å½“å‰é¡µé¢å†…å®¹æ¸…é™¤æ‰, æ¥ç€å°†ä¸‹ä¸€ä¸ªé¡µé¢å†…å®¹æŒ‚è½½åˆ°å½“å‰é¡µé¢ä¸Šã€‚

##### 1-9  Vueé¡¹ç›®é¢„çƒ­ - é¡¹ç›®ä»£ç åˆå§‹åŒ–

å¼•å…¥ reset.cssï¼ˆå¤„ç†å…¬å…±æ ·å¼é—®é¢˜ï¼‰, border.css ï¼ˆå¤„ç†ç§»åŠ¨ç«¯1åƒç´ é—®é¢˜ï¼‰ã€‚å®‰è£… fastclick è§£å†³ç§»åŠ¨ç«¯ç‚¹å‡»300ms å»¶è¿Ÿçš„é—®é¢˜ã€‚

```bash
npm i --save fastclick@1.0.6
```

##### 2-1 Vueé¡¹ç›®é¦–é¡µ - headeråŒºåŸŸå¼€å‘

```bash
npm i --save stylus@0.54.5 stylus-loader@3.0.1
```

##### 2-2 Stylusçš„åŸºç¡€è¯­æ³•ä¸ä½¿ç”¨

Stylusæ˜¯ä¸€ä¸ªCSSé¢„å¤„ç†å™¨ï¼ˆç®€å•ç†è§£å°±æ˜¯ä½¿ç”¨Stylusä¹¦å†™æ ·å¼ï¼Œæœ€åè½¬ æ¢ä¸ºCSSï¼‰ã€‚

ä¸€ã€Stylus è¯­æ³•ç‰¹ç‚¹ï¼š

1ã€æ‹¬å·å¯ç”±å¯æ— 

```stylus
.hello
	color: red;
```

2ã€åˆ†å·å¯æœ‰å¯æ— 

```stylus
.hello
	color: red;
```

3ã€å†’å·å¯æœ‰å¯æ— ï¼ˆæ³¨æ„éœ€è¦åœ¨å±æ€§å’Œå±æ€§å€¼ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼‰

```stylus
.hello
	color red
```

äºŒã€ä¹¦å†™é€‰æ‹©å™¨è¦æ³¨æ„çš„å†…å®¹

1ã€ç¼©æ’ï¼šStylus çš„è¯­æ³•åŸºäºç¼©è¿›ï¼Œç©ºæ ¼ä¹Ÿæœ‰é‡è¦çš„æ„ä¹‰ã€‚å¦‚ä¸‹ï¼š

(1) Stylus æ–‡ä»¶

```stylus
.box
	p
		background blue
```

(2) ç¼–è¯‘å

```css
.box p {
    background: blue;
}
```

è¯´æ˜ï¼šåœ¨å¦‚ä¸Šä»£ç ä¸­ï¼Œ.box ä¸ p æ ‡ç­¾æ˜¯çˆ¶å­çº§å…³ç³»ï¼Œæ‰€ä»¥ p æ ‡ç­¾çš„ä¹¦å†™è¦åœ¨ box çš„ä¸‹ä¸€è¡Œæ·»åŠ ç©ºæ ¼ã€‚

2ã€è§„åˆ™ï¼šStyluså°±è·ŸCSSä¸€æ ·ï¼Œå…è®¸ä½ ä½¿ç”¨é€—å·ä¸ºå¤šä¸ªé€‰æ‹©å™¨åŒæ—¶å®šä¹‰å±æ€§ï¼Œå¦‚ä¸‹ï¼š

ï¼ˆ1ï¼‰Stylusæ–‡ä»¶

```stylus
textarea,input
	background blue
```

ï¼ˆ2ï¼‰ç¼–è¯‘å

```css
textarea,
input {
    background: blue;
}
```

3ã€çˆ¶çº§å¼•ç”¨ï¼šå­—ç¬¦&æŒ‡å‘çˆ¶é€‰æ‹©å™¨ã€‚

å¦‚ä¸‹è¿™ä¸ªä¾‹å­ï¼Œä¸¤ä¸ªé€‰æ‹©å™¨(textareaå’Œinput) åœ¨:hoverä¼ªç±»é€‰æ‹©å™¨ä¸Šéƒ½æ”¹å˜äº†colorå€¼ï¼š

ï¼ˆ1ï¼‰Stylusæ–‡ä»¶

```stylus
textarea,input
 	background blue
  &:hover
    	color green
```

ï¼ˆ2ï¼‰ç¼–è¯‘å

```css
textarea,
input {
    background: blue;
}
textarea:hover,input:hover {
  color: green;
}
```

ä¸‰ã€å˜é‡

æˆ‘ä»¬å¯ä»¥æŒ‡å®šè¡¨è¾¾å¼ä¸ºå˜é‡ï¼Œåœ¨å¤§é‡ä½¿ç”¨è¯¥æ ·å¼çš„æ—¶å€™è°ƒç”¨è¯¥å˜é‡

ï¼ˆ1ï¼‰Stylusæ–‡ä»¶

```stylus
font-size = 50
div
  font font-size 'å®‹ä½“'
```

ï¼ˆ2ï¼‰ç¼–è¯‘å

```css
div {
    font: 50px 'å®‹ä½“';
}
```

å˜é‡ç”šè‡³å¯ä»¥ç»„æˆä¸€ä¸ªè¡¨è¾¾å¼åˆ—è¡¨ï¼š

ï¼ˆ1ï¼‰Stylusæ–‡ä»¶

```stylus
font-size = 50px
font-style = font-size 'éš¶ä¹¦'
div
  font font-style
```

ï¼ˆ2ï¼‰ç¼–è¯‘å

```css
div {
    font: 50px 'éš¶ä¹¦';
}
```

æ³¨æ„ï¼šæ ‡è¯†ç¬¦ï¼ˆå˜é‡åï¼Œå‡½æ•°ç­‰ï¼‰ï¼Œä¹Ÿå¯èƒ½åŒ…æ‹¬$å­—ç¬¦ã€‚ä¾‹å¦‚ï¼š

```stylus
$font-size = 50px
div
  font $font-size   'éš¶ä¹¦'
```

å››ã€æ–¹æ³•

Stylusè¿˜å¯ä»¥ä½¿ç”¨ä¸€äº›è‡ªå·±å®šä¹‰çš„æ–¹æ³•ï¼ˆæ‰©å±•ï¼‰ã€‚

ï¼ˆ1ï¼‰Stylusæ–‡ä»¶

```stylus
/*å®šä¹‰æ–¹æ³•*/
add(a,b)
  a+b
div 
  /*è°ƒç”¨æ–¹æ³•*/
padding add(20px,30px)
```

ï¼ˆ2ï¼‰ç¼–è¯‘å

```css
div {
    padding: 50px;
}
```

äº”ã€æ··åˆä¹¦å†™ï¼š
æ··åˆä¹¦å†™å’Œå‡½æ•°å®šä¹‰æ–¹æ³•ä¸€è‡´ï¼Œä½†æ˜¯åº”ç”¨ä¸Šè¿˜æ˜¯ä¸åŒçš„ã€‚å¯å‚è€ƒå¦‚ä¸‹ï¼š

ï¼ˆ1ï¼‰Stylusæ–‡ä»¶

```stylus
/*å®šä¹‰æ–¹æ³•*/
error(borderWidth=2px) {
  border borderWidth solid #F00
  color #F00
}
div
  /*ä¸ä¼ é€’å‚æ•°è°ƒç”¨æ–¹æ³•*/
	error()
  p
    /*ä¼ é€’å‚æ•°è°ƒç”¨æ–¹æ³•*/
	error(10px)
```

è¯´æ˜ï¼šè¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªåå«errorçš„æ–¹æ³•ï¼Œè¿™ä¸ªerrorè®¾ç½®äº†ä¸€ä¸ªå‚æ•°â€œ$borderWidthâ€, åœ¨æ²¡ç‰¹åˆ«å®šä¹‰å¤–ï¼Œè¿™ä¸ªå‚æ•°çš„å€¼æ˜¯é»˜è®¤å€¼2pxã€‚

ï¼ˆ2ï¼‰ç¼–è¯‘å

```css
div {
    border: 2px solid #F00;
    color: #F00;
}

div p {
    border: 10px solid #F00;
    color: #F00;
}
```

##### 2-3 Vueé¡¹ç›®é¦–é¡µ - iconfontçš„ä½¿ç”¨å’Œä»£ç ä¼˜åŒ–ï¼ˆ1ï¼‰

##### 2-4 Vueé¡¹ç›®é¦–é¡µ - iconfontçš„ä½¿ç”¨å’Œä»£ç ä¼˜åŒ–ï¼ˆ2ï¼‰

#### 2021å¹´05æœˆ26æ—¥ å‘¨ä¸‰ 22å‘¨

##### 2-5 Vueé¡¹ç›®é¦–é¡µ - é¦–é¡µè½®æ’­å›¾ï¼ˆ1ï¼‰

```bash
npm install  vue-awesome-swiper@2.6.7 --save
```

```javascript
import Vue from 'vue'
import VueAwesomeSwiper from 'vue-awesome-swiper'
// import style (>= Swiper 6.x)
import 'swiper/swiper-bundle.css'
// import style (<= Swiper 5.x)
import 'swiper/css/swiper.css'
Vue.use(VueAwesomeSwiper, /* { default options with global component } */ )
```

##### 2-6 Vueé¡¹ç›®é¦–é¡µ - é¦–é¡µè½®æ’­å›¾ï¼ˆ2ï¼‰

```stylus
<style lang="stylus" scoped>
# >>> è¡¨ç¤ºæ ·å¼ç©¿é€
.wrapper >>> .swiper-pagination-bullet-active
    background: #fff
.wrapper
    width 100%
    overflow hidden
    height 0
    padding-bottom 55%
    bacground #eee
    .swiper-img
        width 100%
</style>
```

##### 2-7 Vueé¡¹ç›®é¦–é¡µ - å›¾æ ‡åŒºåŸŸé¡µé¢å¸ƒå±€

å°† height è®¾ç½®ä¸º0ï¼Œpadding-bottom 50%ï¼Œoverflow hidden å³å¯è®¾ç½®é«˜å®½æ¯”ä¸º50%

```stylus
<style lang="stylus" scoped>
.icons
  overflow hidden
  height 0
  padding-bottom 50%
  background green
  .icon
    width 25%
    float left
    padding-bottom 25%
    background red
</style>
```

#### 2021å¹´05æœˆ27æ—¥ å‘¨å›› 22å‘¨

##### 2-8 Vueé¡¹ç›®é¦–é¡µ - å›¾æ ‡åŒºåŸŸé€»è¾‘å®ç°

```javascript
 computed: {
     pages() {
         const pages = []
         this.iconList.forEach((item, index) => {
             const page = Math.floor(index / 8)
             if (!pages[page]) {
                 pages[page] = []
             }
             pages[page].push(item)
         })
         return pages
     }
 }
```

```stylus
// mixin.styl
ellipsis() {
    overflow hidden
    white-space nowrap
    text-overflow ellipsis
}
```

#### 2021å¹´05æœˆ29æ—¥ å‘¨å…­ 22å‘¨

##### 2-9 Vueé¡¹ç›®é¦–é¡µ - çƒ­é”€æ¨èç»„ä»¶å¼€å‘

##### 2-10 Vueé¡¹ç›®é¦–é¡µ - å¼€å‘å‘¨æœ«æ¸¸ç»„ä»¶

å¯ä»¥å¤ç”¨ Recommand.vue è¿›è¡Œ Weekend.vue çš„å¼€å‘

##### 2-11 Vueé¡¹ç›®é¦–é¡µ - ä½¿ç”¨axioså‘é€ajaxè¯·æ±‚

```bash
npm i axios@0.17.1 --save
```

webpack-dev-server é…ç½®æœ¬åœ° mock æ¥å£æ•°æ®

```js
// vue/travel-project/config/index.js
// Paths wepack-dev-server
assetsSubDirectory: 'static',
    assetsPublicPath: '/',
    proxyTable: {
        '/api': {
            target: 'http://localhost:8080',
            pathRewrite: {
                '^/api': '/static/mock/' // http://localhost:8080/api/index.json ä»£ç†åˆ° /static/mock/index.json
            }
        }
    },
```

##### 2-12 Vueé¡¹ç›®é¦–é¡µ - é¦–é¡µçˆ¶å­ç»„ç»„ä»¶é—´ä¼ å€¼

##### 1-1 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - è·¯ç”±é…ç½®

```js
export default new Router({
    routes: [{
        path: "/",
        name: "Home",
        component: Home
    }, {
        path: "/list",
        name: "List",
        component: List
    }, {
        path: "/city",
        name: "City",
        component: City
    }]
})
```

##### 1-2 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - æœç´¢æ¡†å¸ƒå±€

##### 1-3 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - åˆ—è¡¨å¸ƒå±€

å­å…ƒç´ æµ®åŠ¨ï¼Œä¼šå¯¼è‡´çˆ¶çº§é«˜åº¦å¡Œé™·ï¼Œåœ¨çˆ¶çº§ä¸­åŠ å…¥ overflow: hiddenï¼Œå¯ä»¥æ¸…é™¤æµ®åŠ¨

#### 2021å¹´05æœˆ31æ—¥ å‘¨ä¸€ 23å‘¨

##### 1-4 Better-scroll çš„ä½¿ç”¨åŠå­—æ¯è¡¨å¸ƒå±€

```bash
npm i better-scroll@1.8.1 --save
```

##### 1-5 better-scrollæ— æ³•æ»šåŠ¨çš„è§£å†³æ–¹å¼

åœ¨ä½¿ç”¨ better-scroll æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°é¡µé¢ä¸èƒ½æ­£å¸¸æ»šåŠ¨çš„æƒ…å†µï¼Œè¿™ç§ç°è±¡æœ‰ä»¥ä¸‹ä¸¤ç§åŸå› ï¼š

(1) æ’ä»¶ç‰ˆæœ¬ä¸åŒï¼Œæ¯”å¦‚ 2.x ç‰ˆæœ¬ï¼Œæ¯”è¾ƒå®¹æ˜“å‡ºç°è¯¥é—®é¢˜ã€‚è§£å†³æ–¹æ¡ˆï¼šå®‰è£…æŒ‡å®šçš„ better-scroll ç‰ˆæœ¬

```bash
npm i better-scroll@1.15.2 --save
```

(2) æ’ä»¶å®ä¾‹åŒ–å®Œæˆåï¼Œæ’ä»¶å†…çš„ HTML ç»“æ„å‘ç”Ÿäº†å˜åŒ–ï¼Œå¯¼è‡´æ’ä»¶å®ä¾‹åŒ–æ—¶çš„ç›¸å…³è®¡ç®—ä¸å†å‡†ç¡®ï¼Œå› æ­¤æ— æ³•æ»šåŠ¨ã€‚è§£å†³æ–¹æ¡ˆï¼šåœ¨ better-scroll çš„ api ä¸­ï¼Œæä¾›äº† `refresh` æ–¹æ³•ï¼Œå³æ›´æ–°æ’ä»¶ï¼Œä½œç”¨å°±æ˜¯è§£å†³è¯¥æ’ä»¶æ— æ³•æ»šåŠ¨çš„é—®é¢˜ï¼›å› æ­¤å¯ä»¥åœ¨æ•°æ®æ›´æ–°å®Œæˆåï¼Œè°ƒç”¨ `refresh` æ–¹æ³•ã€‚

```vue
export default {
	name:'CityList',
	props:{
		hot: Array,
		cities: Object,
		letter: String
	},
	mouted () {
	this.scroll = new  Bscroll(this.$refs.wrapper)
 	},
	updated () {
	this.scroll.refresh()
	}
}
```

#### 2021å¹´06æœˆ01æ—¥ å‘¨äºŒ 23å‘¨

##### 1-6 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - é¡µé¢çš„åŠ¨æ€æ•°æ®æ¸²æŸ“

v-for å¾ªç¯å¯¹è±¡æ—¶ï¼Œ(item, key) of Objectï¼Œkeyæ˜¯å±æ€§

#### 2021å¹´06æœˆ02æ—¥ å‘¨ä¸‰ 23å‘¨

##### 1-7 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - å…„å¼Ÿç»„ä»¶æ•°æ®ä¼ é€’ï¼ˆ1ï¼‰

å…ˆå°†å­ç»„ä»¶Alphabet.vueçš„å€¼ä¼ é€’ç»™çˆ¶ç»„ä»¶ City.vue, å†é€šè¿‡çˆ¶ç»„ä»¶City.vue ä¼ é€’ç»™å­ç»„ä»¶List.vueã€‚

å¦å¤–ï¼Œå®ç°ç‚¹å‡»å­—æ¯è¾¾åˆ°ç›¸åº”åŒºåŸŸï¼Œå¯ä»¥ä½¿ç”¨ `this.scroll.scrollToElement(element)` æ–¹æ³•

```js
watch: {
    letter() {
        if (this.letter) {
            const element = this.$refs[this.letter][0]
            this.scroll.scrollToElement(element)
        }
    }
}
```

##### 1-8 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - å…„å¼Ÿç»„ä»¶æ•°æ®ä¼ é€’ï¼ˆ2ï¼‰

```js
computed: {
    letters() {
        const letters = []
        for (let i in this.cities) {
            letters.push(i)
        }
        // æ„é€ æ•°ç»„ ["A","B","C",...]
        return letters
    }
}
```

##### 1-9 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–

```js
methods: {
    handleLetterClick(e) {
        this.$emit("change", e.target.innerText)
    },
    handleTouchStart() {
        this.touchStatus = true
    },
    handleTouchMove(e) {
        if (this.touchStatus) {
            // å‡½æ•°èŠ‚æµ
            if (this.timer) {
                clearTimeout(this.timer)
            }
            this.timer = setTimeout(() => {
                const touchY = e.touches[0].clientY - 79
                const index = Math.floor((touchY - this.startY) / 20)
                if (index >= 0 && index < this.letters.length) {
                    this.$emit("change", this.letters[index])
                }
            }, 16)
        }
    },
    handleTouchEnd() {
        this.touchStatus = false
    }
}
```

##### 1-10 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - æœç´¢é€»è¾‘å®ç°

```stylus
.search-content
    z-index 1
    overflow hidden
    position absolute
    top 1.58rem
    left 0
    right 0
    // bottom 0 fix:æœç´¢ç»“æœæ— æ³•æ»‘åŠ¨
```

##### 1-11 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - Vuexå®ç°æ•°æ®å…±äº«ï¼ˆ1ï¼‰

```bash
npm i vuex@3.0.1 --save
```

```js
import Vue from "vue"
import Vuex from "vuex"

Vue.use(Vuex)

export default new Vuex.Store({
    state: {
        city: "ä¸Šæµ·"
    }
})
// åœ¨main.js å…¨å±€å¼•å…¥ï¼Œä½¿ç”¨ store é‡Œçš„æ•°æ® this.$store.state.city
```

#### 2021å¹´06æœˆ03æ—¥ å‘¨å›› 23å‘¨

##### 1-12 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - Vuexå®ç°æ•°æ®å…±äº«ï¼ˆ2ï¼‰

åŒæ­¥æ“ä½œå¯é€šè¿‡ commit è°ƒç”¨ mutations é‡Œçš„æ–¹æ³•ç›´æ¥å®Œæˆï¼Œä¸éœ€è¦é€šè¿‡ actionsï¼›è€Œå¼‚æ­¥æ“ä½œ stateï¼Œéœ€è¦é€šè¿‡ è°ƒç”¨ actions é‡Œçš„ dispatch æ–¹æ³•å®Œæˆã€‚

ç¼–ç¨‹å¼å¯¼èˆªï¼š `this.$router.push("/")` è·³è½¬åˆ°é¦–é¡µ

##### 1-13 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - Vuexçš„é«˜çº§ä½¿ç”¨åŠlocalStorage

```js
import {
    mapState,
    mapGetters,
    mapMutations
} from "vuex"
computed: {
        ...mapState(["city"]),
        ...mapGetters(["doubleCity"])
    },
    methods: {
        handleCityClick(city) {
            // this.$store.commit("changeCity", city)
            this.changeCity(city)
            this.$router.push("/")
        },
        ...mapMutations(["changeCity"])
    },
```

##### 1-14 Vueé¡¹ç›®åŸå¸‚é€‰æ‹©é¡µ - ä½¿ç”¨keep-aliveä¼˜åŒ–ç½‘é¡µæ€§èƒ½

keep-live ä½œç”¨ï¼šè·¯ç”±è¢«åŠ è½½è¿‡ä¸€æ¬¡åï¼Œå°±æŠŠåŠ è½½åçš„å†…å®¹æ”¾åœ¨å†…å­˜ä¸­ï¼Œä¸‹ä¸€æ¬¡åŠ è½½è·¯ç”±ä¸­çš„ç»„ä»¶æ—¶ï¼Œä¸éœ€è¦å†æ‰§è¡Œé’©å­å‡½æ•°ã€‚

##### 1-15 ç»†èŠ‚ä¼˜åŒ–

```css
/*æµè§ˆå™¨è‡ªå¸¦åŸç”Ÿ css å¤„ç† 300ms å»¶è¿Ÿé—®é¢˜*/
html {
    touch-action: manipulation
}
```

#### 2021å¹´06æœˆ04æ—¥ å‘¨äº” 23å‘¨

##### 1-1 Vueé¡¹ç›®è¯¦æƒ…é¡µ - åŠ¨æ€è·¯ç”±å’Œbannerå¸ƒå±€

```css
/*çº¿æ€§æ¸å˜è‰²*/
background-image linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, .8))
```

##### 1-2 Vueé¡¹ç›®è¯¦æƒ…é¡µ - å…¬ç”¨å›¾ç‰‡ç”»å»Šç»„ä»¶æ‹†åˆ†ï¼ˆ1ï¼‰

#### 2021å¹´06æœˆ07æ—¥ å‘¨ä¸€ 24å‘¨

##### 1-3 Vueé¡¹ç›®è¯¦æƒ…é¡µ - å…¬ç”¨å›¾ç‰‡ç”»å»Šç»„ä»¶æ‹†åˆ†ï¼ˆ2ï¼‰

```js
// ç›‘å¬åˆ°çˆ¶çº§å…ƒç´ å‘ç”ŸDOMç»“æ„çš„å˜åŒ–ï¼Œè‡ªåŠ¨åˆ·æ–°é¡µé¢ï¼Œè§£å†³swiperå®½åº¦è®¡ç®—é—®é¢˜
data() {
    return {
        swiperOptions: {
            pagination: ".swiper-pagination",
            paginationType: "fraction",
            observeParents: true,
            observe: true
        }
    }
},
```

##### 1-4 Vueé¡¹ç›®è¯¦æƒ…é¡µ - å®ç°Headeræ¸éšæ¸æ˜¾æ•ˆæœ

```js
activated() {
        window.addEventListener("scroll", this.handleScroll)
    },
    methods: {
        handleScroll() {
            const top = document.documentElement.scrollTop
            if (top > 60) {
                let opacity = top / 140
                opacity = opacity > 1 ? 1 : opacity
                this.opacityStyle = {
                    opacity
                }
                this.showAbas = false
            } else {
                this.showAbas = true
            }
        }
    }
```

#### 2021å¹´06æœˆ09æ—¥ å‘¨ä¸‰ 24å‘¨

##### 1-5 Vueé¡¹ç›®è¯¦æƒ…é¡µ - å¯¹å…¨å±€äº‹ä»¶çš„è§£ç»‘

```js
activated() {
        window.addEventListener("scroll", this.handleScroll)
    },
    deactivated() {
        // å¯¹å…¨å±€äº‹ä»¶çš„è§£ç»‘
        window.removeEventListener("scroll", this.handleScroll)
    },
```

##### 1-6 Vueé¡¹ç›®è¯¦æƒ…é¡µ - ä½¿ç”¨é€’å½’ç»„ä»¶å®ç°è¯¦æƒ…é¡µåˆ—è¡¨

é€’å½’ç»„ä»¶å°±æ˜¯ç»„ä»¶è°ƒç”¨è‡ªèº«çš„ç»„ä»¶

```vue
<template>
  <div>
      <div v-for="(item, index) of list" :key="index" class="item">
        <div class="item-title border-bottom">
          <span class="item-title-icon"></span>{{item.title}}
        </div>
        <div class="item-children" v-if="item.children">
          <detail-list :list="item.children"></detail-list>
        </div>
      </div>
  </div>
</template>
```

#### 2021å¹´06æœˆ10æ—¥ å‘¨å›› 24å‘¨

##### 1-7 Vueé¡¹ç›®è¯¦æƒ…é¡µ - åŠ¨æ€è·å–è¯¦æƒ…é¡µé¢æ•°æ®

ç»„ä»¶ä¸­ name æœ‰3ç§åœºæ™¯å¯ä»¥ç”¨åˆ°ï¼š(1) åšé€’å½’ç»„ä»¶æ—¶å¯ä»¥ç”¨åˆ°ï¼›(2) è·¯ç”±åŒ¹é…ï¼Œexclude å–æ¶ˆç¼“å­˜æ—¶ï¼›(3) Vuex å¼€å‘å·¥å…·ä¸­å¯ä»¥ç”¨åˆ°ã€‚

```js
// å¤„ç†æ»šåŠ¨è¡Œä¸º
scrollBehavior(to, from, savedPosition) {
    return {
        x: 0,
        y: 0
    }
}
```

#### 2021å¹´06æœˆ15æ—¥ å‘¨äºŒ 25å‘¨

##### 1-8 transition

ä¸€ã€å®šä¹‰ï¼švue ä¸­çš„ transition æ˜¯ä¸€ä¸ªåŠ¨ç”»è¿‡æ¸¡å°è£…ç»„ä»¶ï¼Œå¸¸è§çš„æƒ…æ™¯ä½¿ç”¨ transition æ ‡ç­¾åŒ…è£¹çš„ DOM å«æœ‰åŠ¨ç”»æ•ˆæœã€‚ transition ç»„ä»¶çš„åŠ¨ç”»æ•ˆæœè¿‡æ¸¡è®¾ç½®åŸºäº css çš„ transiton å±æ€§è®¾ç½®ã€‚

äºŒã€ä½¿ç”¨ï¼šå½“é¡µé¢ä¸­çš„ DOM å…ƒç´ éœ€è¦æ›´æ–°ï¼Œç§»é™¤å’Œæ’å…¥æ—¶ï¼Œå¯ä½¿ç”¨ transition å°è£…ç»„ä»¶è¿›è¡ŒåŠ¨ç”»çš„è¿‡æ¸¡ã€‚åŒæ—¶ï¼Œtransiton ç»„ä»¶å¯é…åˆ CSS ç±»åï¼Œç¬¬ä¸‰æ–¹ CSS åŠ¨ç”»åº“ï¼Œè¿‡æ¸¡ç»„ä»¶çš„é’©å­å‡½æ•°ä»¥åŠç¬¬ä¸‰æ–¹ JavaScript åŠ¨ç”»åº“ä½¿ç”¨ã€‚

```vue
<style>
  .fade-enter-active, .fade-leave-active {transition: opacity .5s;}
  .fade-enter, .fade-leave-to {opacity: 0;}
</style>
<body>
  <div id = "demo">
    <button v-on:click="show = !show">
      Toggle
    </button>
    <transition>
    	<p v-if="show"> hello </p>
    </transition>
  </div>
  <script>
  	new Vue ({
      	el: '#demo',
          data: {
            show: true
          }
    });
  </script>
</body>
```

æ³¨æ„ï¼švue æä¾›çš„ wrapper åŒ…è£…çš„ç»„ä»¶ -- transitionï¼Œåœ¨åŒ…è£¹çš„å…ƒç´ ä¸­ï¼Œæœ‰æ¶‰åŠåˆ° v-ifï¼Œv-showï¼ŒåŠ¨æ€ç»„ä»¶ï¼Œç»„ä»¶æ ¹èŠ‚ç‚¹ï¼Œéƒ½ä¼šç»™å®ƒä»¬æ·»åŠ è¿›å…¥/ç¦»å¼€çš„è¿‡æ»¤æ•ˆæœã€‚

ä¸‰ã€è¿‡æ¸¡çš„ç±»å

è¿›å…¥è¿‡æ¸¡è¿‡ç¨‹ï¼šv-enter, v-enter-active, v-enter-to; ç¦»å¼€è¿‡æ¸¡è¿‡ç¨‹ï¼šv-leave, v-leave-active, v-leave-to

1.v-enter: å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åçš„ä¸‹ä¸€å¸§ç§»é™¤ã€‚

2.v-enter-active: å®šä¹‰è¿›å…¥è¿‡æ»¤ç”Ÿæ•ˆæ—¶çŠ¶æ€ã€‚åœ¨æ•´ä¸ªè¿›å…¥è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨å…ƒç´ è¢«æ’å…¥ä¹‹å‰ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰è¿›å…¥è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚

3.v-enter-to: 2.1.8 ç‰ˆåŠä»¥ä¸Šå®šä¹‰è¿›å…¥è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨å…ƒç´ è¢«æ’å…¥ä¹‹åä¸‹ä¸€å¸§ç”Ÿæ•ˆ(ä¸æ­¤åŒæ—¶ v-enter è¢«ç§»é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚

4.v-leave: å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„å¼€å§‹çŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œä¸‹ä¸€å¸§è¢«ç§»é™¤ã€‚

5.v-leave-active: å®šä¹‰ç¦»å¼€è¿‡æ¸¡ç”Ÿæ•ˆæ—¶çš„çŠ¶æ€ã€‚åœ¨æ•´ä¸ªç¦»å¼€è¿‡æ¸¡çš„é˜¶æ®µä¸­åº”ç”¨ï¼Œåœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘æ—¶ç«‹åˆ»ç”Ÿæ•ˆï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚è¿™ä¸ªç±»å¯ä»¥è¢«ç”¨æ¥å®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„è¿‡ç¨‹æ—¶é—´ï¼Œå»¶è¿Ÿå’Œæ›²çº¿å‡½æ•°ã€‚

6.v-leave-to:  2.1.8 ç‰ˆåŠä»¥ä¸Šå®šä¹‰ç¦»å¼€è¿‡æ¸¡çš„ç»“æŸçŠ¶æ€ã€‚åœ¨ç¦»å¼€è¿‡æ¸¡è¢«è§¦å‘åä¸‹ä¸€å¸§ç”Ÿæ•ˆ(ä¸æ­¤åŒæ—¶ v-leave è¢«ç§»é™¤)ï¼Œåœ¨è¿‡æ¸¡/åŠ¨ç”»å®Œæˆä¹‹åç§»é™¤ã€‚

æ³¨æ„ï¼šé»˜è®¤ç±»åæ˜¯ä»¥ä¸Š6ä¸ª(transition æ²¡æœ‰è®¾ç½® name å±æ€§çš„æ—¶å€™ï¼Œåˆ™ v- æ˜¯è¿™äº›ç±»åçš„é»˜è®¤å‰ç¼€)ï¼Œå¦‚æœåœ¨ transition æ ‡ç­¾ä¸­æŒ‡å®šäº† "name=xxx"ï¼Œé‚£ä¹ˆ6ä¸ªç±»åå°†ä¼šå˜æˆ xxx å¼€å¤´ï¼Œä¾‹å¦‚ï¼š `<transition name="my-transition">` , é‚£ä¹ˆ v-enter ä¼šæ›¿æ¢ä¸º my-transition-enterã€‚

#### 2021å¹´06æœˆ16æ—¥ å‘¨ä¸‰ 25å‘¨

##### 1-9 Vueé¡¹ç›®è¯¦æƒ…é¡µ - åœ¨é¡¹ç›®ä¸­åŠ å…¥åŸºç¡€åŠ¨ç”»

ä½¿ç”¨æ’æ§½è¯­æ³•

```vue
<template name="component-name">
    <transition>
        <slot></slot>
    </transition>
</template>
<script>
export default {
  name: "FadeAnimation"
}
</script>
<style lang="stylus" scoped>
    .v-enter, .v-leave-to
      opacity 0
    .v-enter-active, .v-leave-active
      transition opacity .5s
</style>
```

##### 2-1 CLI 4 å‡çº§é¡¹ç›®

å…¨å±€åˆ é™¤æ—§ vue-cli `npm uninstall vue-cli -g`

å®‰è£…æ–°ç‰ˆæœ¬ vue-cli `npm install @vue/cli@4.3.1 -g`

```bash
vue create travel
```

##### 2-2 å…¥å£æ–‡ä»¶è¿ç§»åŠ webpack é…ç½®å˜æ›´æ–¹å¼

##### 2-3 é¦–é¡µä»£ç è¿ç§»åŠä»£ç†é…ç½®å˜æ›´

```js
// vue.config.js
const path = require("path")

module.exports = {
    devServer: {
        proxy: {
            '/api': {
                target: 'http://localhost:8080',
                pathRewrite: {
                    '^/api': '/mock/'
                }
            }
        }
    },
    chainWebpack: (config) => {
        config.resolve.alias
            .set("styles", path.join(__dirname, "./src/assets/styles/"))
            .set("@", path.join(__dirname, "./src/"))
    }
}
```

#### 2-4 åˆ—è¡¨åŠè¯¦æƒ…é¡µé¢è¿ç§»

#### 2021å¹´06æœˆ19æ—¥ å‘¨å…­ 25å‘¨

##### 6.1 completeUnitWork æ•´ä½“æµç¨‹å’Œæ„ä¹‰

æ ¹æ®æ˜¯å¦ä¸­æ–­è°ƒç”¨ä¸åŒçš„å¤„ç†æ–¹æ³•ï¼›åˆ¤æ–­æ˜¯å¦æœ‰å…„å¼ŸèŠ‚ç‚¹æ¥æ‰§è¡Œä¸åŒçš„æ“ä½œï¼›å®ŒæˆèŠ‚ç‚¹ä¹‹åèµ‹å€¼ effect é“¾ã€‚

##### 6-2 é‡è®¾childExpirationTime

##### 6-3 completWorkå…·ä½“åšäº†ä»€ä¹ˆ

pop å„ç§ context ç›¸å…³çš„å†…å®¹ï¼›å¯¹äº HostComponent æ‰§è¡Œåˆå§‹åŒ–ï¼›åˆå§‹åŒ–ç›‘å¬äº‹ä»¶

##### 6-4 åˆæ¬¡æ¸²æŸ“ä¸­completeWorkå¯¹äºDOMèŠ‚ç‚¹çš„åˆ›å»ºå’ŒappendAllChildç®—æ³•

updateHostComponent 

diffProperties è®¡ç®—éœ€è¦æ›´æ–°çš„å†…å®¹ï¼›ä¸åŒçš„ dom property å¤„ç†æ–¹å¼ä¸åŒï¼›

##### 6-5 åˆæ¬¡æ¸²æŸ“ä¸­å¦‚ä½•è¿›è¡ŒDOMèŠ‚ç‚¹å±æ€§åˆå§‹åŒ–æ“ä½œ

##### 2-3 ES6åŸºç¡€ï¼ˆ1ï¼‰

#### 2021å¹´06æœˆ20æ—¥ å‘¨ä¸€ 26å‘¨

##### 2-4 ES6åŸºç¡€ï¼ˆ2ï¼‰

* åŸºç¡€æŒ‡ä»¤ï¼šlet/const
* ç®­å¤´å‡½æ•°ï¼švalue => return value + 1
* æ¨¡æ¿å­—ç¬¦ä¸²:

```javascript
`Hello ${name} !`
```

* promise: Promise, resolveï¼Œrejectï¼Œ then
* é¢å‘å¯¹è±¡ï¼šclassï¼Œextendsï¼Œsuperï¼Œconstructor
* æ¨¡å—åŒ–ï¼šexportï¼Œimportï¼Œasï¼Œdefault

#### 2-5 æœ¬åœ°å­˜å‚¨

cookie: ç”¨æˆ·ç«¯ä¿å­˜è¯·æ±‚ä¿¡æ¯çš„æœºåˆ¶ï¼›åˆ†å·åˆ†éš”çš„å¤šä¸ª key-value å­—æ®µï¼›å­˜å‚¨åœ¨æœ¬åœ°çš„åŠ å¯†æ–‡ä»¶é‡Œï¼›åŸŸåå’Œè·¯å¾„é™åˆ¶

session: æœåŠ¡ç«¯ä¿å­˜è¯·æ±‚ä¿¡æ¯çš„æœºåˆ¶ï¼›sessionId é€šå¸¸å­˜æ”¾åœ¨ cookie é‡Œï¼›ä¼šè¯ç”±æµè§ˆå™¨æ§åˆ¶ï¼Œä¼šè¯ç»“æŸï¼Œsession å¤±æ•ˆ

| name     | cookie åç§°       |
| -------- | ----------------- |
| domain   | cookie ç”Ÿæ•ˆçš„åŸŸå |
| path     | cookie ç”Ÿæ•ˆçš„è·¯å¾„ |
| expires  | cookie è¿‡æœŸæ—¶é—´   |
| HttpOnly | ç”¨æˆ·ç«¯ä¸å¯æ›´æ”¹    |

```javascript
document.cookie; // æŸ¥çœ‹ cookie
document.cookie = 'name=aaaaa;domain=happymmall.com;path=/index.html;expires=Mon, 21 Jun 2022 13:57:32 GMT'; // å¢åŠ  cookie
document.cookie = 'name=bbbbb;domain=happymmall.com;path=/index.html;'; // ä¿®æ”¹ cookie
document.cookie = 'name=bbbbb;domain=happymmall.com;path=/index.html;expires=Mon, 21 Jun 2020 13:57:32 GMT'; // å°†è¿‡æœŸæ—¶é—´è®¾ç½®ä¸ºè¿‡å»çš„æ—¶é—´æˆ–0
```

localStorage: H5 æ–°ç‰¹æ€§ï¼›æœ‰åŸŸåé™åˆ¶ï¼Œä¸å­˜åœ¨ä½œç”¨åŸŸæ¦‚å¿µï¼›åªæœ‰ key-valueï¼› æ²¡æœ‰è¿‡æœŸæ—¶é—´ï¼›æµè§ˆå™¨å…³é—­åä¸æ¶ˆå¤±

sessionStorage: å’Œ localStorage æå…¶ç›¸ä¼¼ï¼›æµè§ˆå™¨å…³é—­åæ¶ˆå¤±

```javascript
// æ·»åŠ  localStorage
window.localStorage.setItem('name', 'Rosen');
window.localStorage.setItem('aaa', JSON.stringify({
    name: "Rosen"
}))
// æŸ¥çœ‹ localStorage
window.localStorage.getItem('name');
// åˆ é™¤ localStorage
window.localStorage.removeItem('name')

// æ·»åŠ  sessionStorage
window.sessionStorage.setItem('name', 'Rosen');
window.sessionStorage.setItem('aaa', JSON.stringify({
    name: "Rosen"
}))
// æŸ¥çœ‹ sessionStorage
window.sessionStorage.getItem('name');
// åˆ é™¤ sessionStorage
window.sessionStorage.removeItem('name')
```

##### 3-1 å‰ç«¯æ¡†æ¶åˆ†æ

##### 3-2 å‰ç«¯æ¡†æ¶è¦è§£å†³çš„é—®é¢˜

|          | åŸç”Ÿå¼€å‘             | æ¡†æ¶å¼€å‘             |
| -------- | -------------------- | -------------------- |
| ä»£ç å±‚é¢ | ç¼ºå°‘è§„åˆ’ï¼Œä»£ç æ··ä¹±   | ç»“æ„åŒ–å¼€å‘           |
| ä»£ç å±‚é¢ | ç¼ºå°‘é™åˆ¶ï¼Œå®¹æ˜“å†²çª   | å¯¹ç«‹æ–‡ä»¶ï¼Œå¯¹ç«‹ä½œç”¨åŸŸ |
| ä»£ç å±‚é¢ | ç¼ºå°‘æ”¯æ’‘ï¼Œèƒ½åŠ›è¦æ±‚é«˜ | æä¾›æ”¯æŒï¼Œåªå…³æ³¨ä¸šåŠ¡ |
| æ•ˆç‡é—®é¢˜ | å…³æ³¨æ‰€æœ‰æµç¨‹         | å…³æ³¨ä¸šåŠ¡             |
| æ•ˆç‡é—®é¢˜ | å›¢é˜Ÿæ•ˆç‡ä½           | å¹¶è¡Œå¼€å‘             |
| æ•ˆç‡é—®é¢˜ | æµ‹è¯•æ•ˆç‡ä½           | æ¨¡å—æµ‹è¯•ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯• |
| å¤šé¡µåº”ç”¨ | è·¯ç”±ä½“éªŒé—®é¢˜         | ä½¿ç”¨å•é¡µè·¯ç”±         |
| å¤šé¡µåº”ç”¨ | æ— é¡µé¢åˆ‡æ¢æ•ˆæœ       | å¯ä»¥æ·»åŠ è¿‡åœºåŠ¨ç”»     |
| å¤šé¡µåº”ç”¨ | æµªè´¹æœåŠ¡å™¨èµ„æº       | å‡å°‘æœåŠ¡å™¨èµ„æº       |

##### 3-3 ä¸‰å¤§æ¡†æ¶å¯¹æ¯”

Angular: 2009å¹´å‘å¸ƒï¼ŒGoogle æ”¶è´­ï¼›ä¸»è¦ç‰ˆæœ¬ï¼š1.xï¼Œ2.xï¼Œ3.xï¼Œ4.xï¼Œ5.x ï¼› åŸºäº html çš„å¤§è€Œå…¨çš„ MVC æ¡†æ¶

React: 2013å¹´5æœˆå¼€æºï¼ŒFacebookï¼›ä¸»è¦ç‰ˆæœ¬ï¼š16.xï¼›åŸºäº JS çš„è§†å›¾å±‚æ¡†æ¶ï¼›

Vue.js: 2014å¹´2æœˆå¼€æºï¼Œå°¤é›¨æºªï¼Œå…ˆåŠ å…¥é˜¿é‡Œ Weex å›¢é˜Ÿï¼›ä¸»è¦ç‰ˆæœ¬ï¼š0.1xï¼Œ1.xï¼Œ 2.xï¼›åŸºäº html  çš„è§†å›¾å±‚æ¡†æ¶ï¼›

|          | Angular  | React    | Vue      |
| -------- | -------- | -------- | -------- |
| ç»„ç»‡æ–¹å¼ | MVC      | æ¨¡å—åŒ–   | æ¨¡å—åŒ–   |
| æ•°æ®ç»‘å®š | åŒå‘ç»‘å®š | å•å‘ç»‘å®š | åŒå‘ç»‘å®š |
| æ¨¡æ¿èƒ½åŠ› | å¼ºå¤§     | è‡ªç”±     | ç®€æ´     |
| è·¯ç”±     | é™æ€è·¯ç”± | åŠ¨æ€è·¯ç”± | åŠ¨æ€è·¯ç”± |

#### 2021å¹´08æœˆ09æ—¥ å‘¨ä¸€ 32å‘¨

ä»Šæ—¥èµ·å›å½’ imooc è¯¾ç¨‹æ—¥å¸¸å­¦ä¹ ï¼Œå¢åŠ å®è·µæ“ä½œã€‚

##### è¯¾ç¨‹1: Reactæºç æ·±åº¦è§£æ é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½

###### 6-7 completeWorké˜¶æ®µå¯¹äºHostTextçš„æ›´æ–°

###### 6-8 renderRoot ä¸­å¯¹é”™è¯¯çš„å¤„ç†

##### è¯¾ç¨‹2: React16+React-Router4 ä»é›¶æ‰“é€ ä¼ä¸šçº§ç”µå•†åå°ç®¡ç†ç³»ç»Ÿ

###### 4-1 å¼€å‘ç¯å¢ƒçš„æ­å»º

git => gitee.com webpack => yarn nodejs node-sass

* webpack çš„å®‰è£…å’Œé…ç½®
* ç³»ç»Ÿé‡Œå¤šä¸ªç‰ˆæœ¬ webpack é¡¹ç›®å…±å­˜çš„å¤„ç†
* webpack å¯¹å„ç§ç±»å‹æ–‡ä»¶çš„å¤„ç†æ–¹å¼
* webpack-dev-server çš„å®‰è£…å’Œé…ç½®

##### 4-2 git çš„å®‰è£…å’Œé¡¹ç›®çš„å»ºç«‹

.gitconfig çš„é…ç½®ï¼Œæ³¨æ„ `=` ä¸¤è¾¹å°½é‡ä¸è¦åŠ ç©ºæ ¼ï¼ŒæŸ¥çœ‹ git ç‰ˆæœ¬ `git --version`

```bash
vim ~/.gitconfig
[user] 
	name = jerrychane
	email = jerrychane@126.com
[alias]
	co  = checkout
	cm = commit
	st=status
	pl =pull
	ps = push
	dt = difftool
	ca = commit -am
	br = branch
```

* ç”Ÿæˆ ssh å…¬é’¥ï¼š`ssh-keygen -t rsa -C 'jerrychane@126.com'`

* gitee.com åˆ›å»º git é¡¹ç›®ï¼Œæ·»åŠ ä¸ªäººå…¬é’¥ï¼Œgit clone é¡¹ç›®åˆ°æœ¬åœ°
* é…ç½®æœ¬åœ°é¡¹ç›® .gitignore

#### 2021.08.11 WED 32WEEK BJ

##### è¯¾ç¨‹1: Reactæºç æ·±åº¦è§£æ é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½

###### 6-9 unwindWorkä»¥åŠReactä¸­çš„é”™è¯¯å¤„ç†

* ç±»ä¼¼ completeWork å¯¹ä¸åŒç±»å‹ç»„ä»¶è¿›è¡Œå¤„ç†
* å¯¹äº ShouldCapture ç»„ä»¶è®¾ç½® DidCapture å‰¯ä½œç”¨

###### 7-1 commitRootçš„æ€»ä½“å·¥ä½œå†…å®¹

###### 7-2 invokeGuardedCallbackå¼€å‘æ—¶çš„å¸®åŠ©æ–¹æ³•

##### è¯¾ç¨‹2: React16+React-Router4 ä»é›¶æ‰“é€ ä¼ä¸šçº§ç”µå•†åå°ç®¡ç†ç³»ç»Ÿ

###### 4-3 nodejs å’Œ yarn çš„å®‰è£…

yarn : åŒ…ç®¡ç†å·¥å…·ï¼Œæ›¿ä»£ npm ; å®‰è£…é€Ÿåº¦å¿«ï¼Œç‰ˆæœ¬é”å®šï¼Œç¼“å­˜æœºåˆ¶

å®‰è£…å‘½ä»¤ï¼š `npm install yarn -g`

| Yarn                      | Npm                              |
| :------------------------ | :------------------------------- |
| yarn init                 | npm init                         |
| yarn                      | npm install                      |
| yarn global add xxx@x.x.x | npm install xxx@x.x.x -g         |
| yarn add xxx@x.x.x        | npm install xxx@x.x.x --save     |
| yarn add xxx@x.x.x --dev  | npm install xxx@x.x.x --save-dev |
| yarn remove xxx           | npm uninstall xxx --save(-dev)   |
| yarn run xxx              | npm run xxx                      |

##### 4-4  webpack é…ç½®(1)

* ä¸€ä¸ªå‰ç«¯èµ„æºåŠ è½½/æ‰“åŒ…å·¥å…·ï¼›
* ä½¿ç”¨ç‰ˆæœ¬ä¸º 3.10.0 ï¼Œ`yarn add webpack@3.10.0 -dev` ; 
* å¤šç‰ˆæœ¬ webpack å…±å­˜è§£å†³æ–¹æ¡ˆ

éœ€è¦å¤„ç†çš„æ–‡ä»¶ç±»å‹ï¼š

| HTML      | html-webpack-plugin        |
| --------- | -------------------------- |
| è„šæœ¬      | babel + babel-preset-react |
| æ ·å¼      | css-loader + sass-loader   |
| å›¾ç‰‡/å­—ä½“ | url-loader + file-loader   |

webpack å¸¸ç”¨æ¨¡å—

* html-webpack-plugin, html å•ç‹¬æ‰“åŒ…æˆæ–‡ä»¶
* extract-text-webpack-plugin, æ ·å¼æ‰“åŒ…æˆå•ç‹¬æ–‡ä»¶
* CommonsChunkPlugin, æå–é€šç”¨æ¨¡å—

webpack-dev-server  æ›´æ”¹ä»£ç è‡ªåŠ¨åˆ·æ–° + è·¯å¾„è½¬å‘

```bash
yarn add webpack-dev-server@2.9.7 --dev
```

```
yarn add webpack@3.10.0 --dev
yarn add html-webpack-plugin@2.30.1 --dev
yarn add babel-core@6.26.0 babel-preset-env@1.6.1 babel-loader@7.1.2 --dev
yarn add babel-preset-react@6.24.1 --dev
yarn add react@16.2.0 react-dom@16.2.0
# å¤„ç† css
yarn add style-loader@0.19.1 css-loader@0.28.8 --dev
yarn add extract-text-webpack-plugin@3.0.2 --dev
# å¤„ç† scss
yarn add sass-loader@6.0.6 --dev
yarn add node-sass@^4.7.2 --dev
```

å…¨å±€æ²¡æœ‰å®‰è£… webpack æ—¶ï¼Œå¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ‰“åŒ… `node_modules/.bin/webpack`

#### 2021.08.16 MON 33WEEK BJ

##### è¯¾ç¨‹1: Reactæºç æ·±åº¦è§£æ é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½

###### 7-2 invokeGuardedCallbackå¼€å‘æ—¶çš„å¸®åŠ©æ–¹æ³•

###### 7-3 commitRootç¬¬ä¸€ä¸ªæ“ä½œ-è·å–å¿«ç…§

##### è¯¾ç¨‹2: React16+React-Router4 ä»é›¶æ‰“é€ ä¼ä¸šçº§ç”µå•†åå°ç®¡ç†ç³»ç»Ÿ

###### 4-5  webpack é…ç½®(2)

```bash
# url-loader ä¾èµ– file-loader
yarn add file-loader@1.1.6 url-loader@0.6.2 --dev
# å¤„ç†å­—ä½“
yarn add font-awesome@4.7.0
# devServer
yarn add webpack-dev-server@2.9.7 --dev
# è®¿é—®url
http://localhost:8080/dist/index.html
```

```bash
yarn run dev
yarn run dist
```

###### 4-6 ä»£ç æäº¤

* ä» master åˆ‡æ¢åˆ°å¼€å‘åˆ†æ”¯ä¸Š
* git merge origin master, æ‹‰å–è¿œç¨‹ä»“åº“æœ€æ–°çš„ä»£ç 
* git add . ï¼Œ è¿½è¸ªæ–‡ä»¶çš„å˜åŒ–
* git commit -am "å¤‡æ³¨ä¿¡æ¯"ï¼Œå°†ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“
* git push, æœ¬åœ°ä»“åº“ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“
* æäº¤ pull requestï¼Œç®¡ç†å‘˜å®¡æ ¸

#### 2021.08.17 tue 33week bj

##### è¯¾ç¨‹1: Reactæºç æ·±åº¦è§£æ é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½

###### 7-4 commitAllHostEffects æ€»ä½“åšäº†å“ªäº›äº‹æƒ…

###### 7-5 commitPlacementæ’å…¥æ–°çš„å­èŠ‚ç‚¹çš„æ“ä½œ

###### 7-6 commitWorkæ›´æ–°èŠ‚ç‚¹å±æ€§çš„è¿‡ç¨‹

#### 2021.08.18 wed 33week bj

##### è¯¾ç¨‹1: Reactæºç æ·±åº¦è§£æ é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½

###### 7-7 commitWorkåˆ é™¤èŠ‚ç‚¹çš„æ“ä½œè¿‡ç¨‹

éå†å­æ ‘ & å¸è½½ ref & å¦‚æœæœ‰ç»„ä»¶åˆ™è°ƒç”¨ componentWillUnmount æ–¹æ³•

###### 7-8 commitLifecyclesè°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•

###### 8-1 context-stack

* æ›´æ–°èŠ‚ç‚¹æ—¶ç›¸å…³ä¿¡æ¯å…¥æ ˆ
* å®ŒæˆèŠ‚ç‚¹æ—¶ç›¸å…³ä¿¡æ¯å‡ºæ ˆ
* ç”¨ä¸åŒçš„ cursor è®°å½•ä¸åŒçš„ä¿¡æ¯

###### 8-2 é—ç•™context-apiçš„å®ç°è¿‡ç¨‹ï¼ˆ1ï¼‰

LegacyContext  react 17 ä¼šç§»é™¤ï¼ŒåŸå› ï¼š1. ä¼šå½±å“æ•´ä¸ªå­æ ‘ï¼›2. åµŒå¥—çš„ context æä¾›è€…éœ€è¦è¿›è¡Œåˆå¹¶ï¼›3. å¯¹æ€§èƒ½çš„å½±å“æ¯”è¾ƒå¤§

###### 8-3 é—ç•™context-apiçš„å®ç°è¿‡ç¨‹ï¼ˆ2ï¼‰

###### 8-4 æ–°contextçš„å®ç°

* ç»„ä»¶åŒ–çš„ä½¿ç”¨æ–¹å¼
* context çš„æä¾›æ–¹å’Œè®¢é˜…æ–¹éƒ½æ˜¯ç‹¬ç«‹çš„
* æ²¡ä»€ä¹ˆé™„å¸¦çš„æ€§èƒ½å½±å“

#### 2021.08.19 thu 33week bj

##### è¯¾ç¨‹1: Reactæºç æ·±åº¦è§£æ é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½

###### 8-5 ref çš„å®ç°è¿‡ç¨‹

* åˆ›å»º Fiber çš„æ—¶å€™å¤„ç† ref && commit å¼€å§‹å…ˆ detach

###### 8-6 hydrate-æ˜¯å¦éœ€è¦hydrateçš„åˆ¤æ–­

###### 8-7 hydrate-æ›´æ–°å¼€å§‹åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦å¯ä»¥hydrate

###### 8-8 hydrate-å†completeWorkä¸­å¤ç”¨å¯hydrateçš„èŠ‚ç‚¹

#### 2021.08.20 fri 33week bj

UML å›¾ä¸“ä¸šæœ¯è¯­
| EN                           | CN          | SCENE                                                      |
| ---------------------------- | ----------- | ---------------------------------------------------------- |
| Class Diagram                | ç±»å›¾        | ç±»å(Class)+å±æ€§(Attributes)+æ“ä½œ(Operations)              |
| Pakage Diagram               | åŒ…å›¾        | Packageå¯ä»¥ç†è§£ä¸ºæ–‡ä»¶å¤¹(folder)                            |
| Object Diagram               | å¯¹è±¡å›¾      | å¯¹è±¡çš„åç§°å’Œå¯¹è±¡çš„å±æ€§                                     |
| Composite Structure Diagram  | ç»„åˆç»“æ„å›¾  | æ˜¾ç¤ºç»„åˆç»“æ„æˆ–éƒ¨åˆ†ç³»ç»Ÿçš„å†…éƒ¨æ„é€                            |
| Component Diagram            | ç»„ä»¶å›¾      | æè¿°ä»¶ç»„ä»¶ä»¥åŠç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€‚                             |
| Deployment Diagram           | éƒ¨ç½²å›¾      | å®ä½“ï¼ˆArtifactï¼‰+ éƒ¨ç½²ç›®æ ‡ï¼ˆDeployment targetï¼‰            |
| Use Case Diagram             | ç”¨ä¾‹å›¾      | è¿°è§’è‰²ä»¥åŠè§’è‰²ä¸ç”¨ä¾‹ä¹‹é—´çš„è¿æ¥å…³ç³»                         |
| Sequence Diagram             | æ—¶åºå›¾      | æè¿°å¯¹è±¡ä¹‹é—´å‘é€æ¶ˆæ¯çš„æ—¶é—´é¡ºåº                             |
| Comunication Diagram         | åä½œå›¾      | å‚åŠ äº¤äº’çš„å„å¯¹è±¡ç»“æ„çš„ä¿¡æ¯                                 |
| Timing Diagram               | è®¡æ—¶å›¾      | æ²¿æ—¶é—´çº¿æ›´æ”¹çš„æ¶ˆæ¯æˆ–æ¡ä»¶çš„è®¡æ—¶æˆ–æŒç»­æ—¶é—´                   |
| Interaction Overview Diagram | äº¤äº’æ¦‚è¿°å›¾  | æ•´ä½“ä¸Šæ¦‚è§ˆäº¤äº’è¿‡ç¨‹ä¸­çš„æ§åˆ¶æµï¼ŒåŒ…æ‹¬äº¤äº’å›¾ä¹‹é—´çš„äº‹ä»¶æˆ–æ¶ˆæ¯æµ |
| Information Flow Diagram     | ä¿¡æ¯æµå›¾    | æè¿°é«˜åº¦æŠ½è±¡çš„ç³»ç»Ÿå®ä½“ä¹‹é—´çš„ä¿¡æ¯äº¤æ¢                       |
| Statechart Diagram           | çŠ¶æ€å›¾      | æè¿°ä¸€ä¸ªå®ä½“åŸºäºäº‹ä»¶ååº”çš„åŠ¨æ€è¡Œä¸º                         |
| Activity Diagram             | æ´»åŠ¨å›¾      | æŸä»¶äº‹æƒ…æ­£åœ¨è¿›è¡Œçš„çŠ¶æ€                                     |
| Profile Diagram              | æ€»åˆ™å›¾      | æè¿°ä¸“æœ‰å»ºæ¨¡çš„å…ƒç´ ï¼Œæè¿°æ‰©å±•æœºåˆ¶                           |
| Requirement Diagram          | éœ€æ±‚å›¾      | åˆ›å»ºéœ€æ±‚å’Œæè¿°éœ€æ±‚                                         |
| Block Definition Diagram     | æ¨¡å—å®šä¹‰å›¾  | å¯¹ç³»ç»Ÿçš„ç»“æ„ç»„æˆä»¥åŠç»„æˆå…ƒç´ é—´çš„å…³ç³»è¿›è¡Œæè¿°               |
| ER Diagram                   | å®ä½“-è”ç³»å›¾ | æè¿°ç°å®ä¸–ç•Œå…³ç³»æ¦‚å¿µæ¨¡å‹çš„æœ‰æ•ˆæ–¹æ³•                         |
| Flowchart Diagram            | æµç¨‹å›¾      | æè¿°å·¥ä½œæµå’Œè¿›ç¨‹çš„å›¾                                       |
| Data Flow Diagram            | æ•°æ®æµå›¾    | æç»˜æ•°æ®åœ¨ç³»ç»Ÿä¸­æµåŠ¨å’Œå¤„ç†çš„è¿‡ç¨‹                           |

#### 2021.08.23 mon 35week bj

##### è¯¾ç¨‹1: Reactæºç æ·±åº¦è§£æ é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½

###### 8-9 eventäº‹ä»¶ç³»ç»Ÿåˆå§‹åŒ–-æ³¨å…¥å¹³å°äº‹ä»¶æ’ä»¶

* ç¡®å®šæ’ä»¶æ³¨å…¥é¡ºåº -> æ³¨å…¥æ’å…¥æ¨¡å— -> è®¡ç®— registrationNameModules ç­‰å±æ€§

å…‹éš†ä¸€ä¸ªæ•°ç»„ï¼š

```js
const cloneArr = Array.prototype.slice.call(arr);
```

###### 8-10 event äº‹ä»¶ç›‘å¬çš„è¿‡ç¨‹

###### 8-11 event-äº‹ä»¶è§¦å‘çš„è¿‡ç¨‹

###### 8-12 event-äº‹ä»¶å¯¹è±¡çš„ç”Ÿäº§è¿‡ç¨‹

###### 8-12 eventæŸ¥æ¼è¡¥ç¼º

#### 2021.08.25 wed 35week bj

##### è¯¾ç¨‹1: Reactæºç æ·±åº¦è§£æ é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½

###### 9-1 ä¼˜å…ˆçº§å’Œä»»åŠ¡æŒ‚èµ·çš„å«ä¹‰(1)

ä»€ä¹ˆå« `Suspand` : å­—é¢æ„æ€æ˜¯æŒ‚èµ·ï¼ŒæŸæ¬¡æ›´æ–°çš„ä»»åŠ¡æš‚æ—¶ä¸æäº¤ï¼›è¿™ä¸ªæ›´æ–°å¯èƒ½åœ¨ä¸‹ä¸€æ¬¡æ›´æ–°ä¸­å†æ¬¡è¢«æ‰§è¡Œã€‚

###### 9-2 ä¼˜å…ˆçº§å’Œä»»åŠ¡æŒ‚èµ·çš„å«ä¹‰ï¼ˆ2ï¼‰

ä¸‰ç§ `Suspend` æ–¹å¼ï¼šæŠŠæäº¤æ”¾åˆ°ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡ä¸Šï¼›ç›´æ¥å‘èµ·ä¸€ä¸ªæ–°çš„åŒæ­¥æ›´æ–°ï¼›è®¾ç½® timeout ç„¶åæäº¤ã€‚

ç±»å‹ï¼š `pendingTime` / `suspendedTime` / `pendedTime`

###### 9-3 ä¸¤ä¸ªexpirationTimeçš„ä¸åŒä½œç”¨

`expirationTime` ä½œç”¨äºå†æ¸²æŸ“å‰ï¼› `nextExpirationTimeToWorkOn` ä½œç”¨å†æ¸²æŸ“æ—¶ã€‚

###### 9-4 Suspenseç»„ä»¶åŒæ­¥æ¨¡å¼ä¸‹çš„æ›´æ–°

åŒæ­¥æ¸²æŸ“: å…ˆç›´æ¥æ¸²æŸ“å­èŠ‚ç‚¹ä¸º `null` , `commit ` çš„æ—¶å€™è®¾ç½® `state` ï¼Œ å†å‘èµ·ä¸€æ¬¡åŒæ­¥æ›´æ–°æ¸²æŸ“ `fallback`

###### 9-5 Suspenseç»„ä»¶åŒæ­¥æ¸²æŸ“æ¨¡å¼è¡¥å……

#### 2021.08.26 thu 35week bj

##### è¯¾ç¨‹1: Reactæºç æ·±åº¦è§£æ é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½

###### 9-7 retrySuspendedWork æ‰€åšçš„äº‹æƒ…

###### 10-1 ä»€ä¹ˆæ˜¯ Hooks ä»¥åŠå…¶é€»è¾‘

èµ‹äºˆå‡½æ•°ç»„ä»¶ç±»ç»„ä»¶çš„èƒ½åŠ›ï¼Œä¸»è¦ç”¨åˆ°çš„ `hook` æ–¹æ³•æœ‰ `useState` / `useEffect` / `useContext` / `useReducer` / `useLayoutEffect` / `useCallBack` / `useMemo` / `useRef` / `useImperativeHandle`

###### 10-3 useState çš„å®ç°åŸç†å’Œæ³¨æ„äº‹é¡¹ï¼ˆ1ï¼‰

###### 10-4 useState çš„å®ç°åŸç†å’Œæ³¨æ„äº‹é¡¹ï¼ˆ2ï¼‰

###### 10-5 useEffectå’ŒuseLayoutEffectçš„å®ç°åŸç†å’ŒåŒºåˆ«

è¯¾ç¨‹æ€»ç»“ï¼š`React` çš„å­˜ç²¹

- ä¸€åˆ‡åŸºäº `State`

#### 2021.08.27 fri 35week bj

##### è¯¾ç¨‹1: æ”¯ä»˜å®å°ç¨‹åºå…¥é—¨ä¸å®æˆ˜ å¼€å‘é«˜é¢œå€¼ç”µå•†é¡¹ç›®

###### 1-2 è¯¾ç¨‹å¯¼å­¦

æŠ€æœ¯å­¦ä¹ ï¼šæŒæ¡èš‚èšå¼€å‘è€…å·¥å…·åŸºæœ¬æ“ä½œï¼›ç†Ÿæ‚‰åŸºç¡€ç»„ä»¶ä¸`api`; æŒæ¡ `flex` å¸ƒå±€ä¸`rpx` è‡ªé€‚åº”ï¼› æŒæ¡æ¨¡æ¿ä¸è‡ªå®šä¹‰ç»„ä»¶ã€‚

ï¼ˆåŸºç¡€è¯­æ³• => å£°æ˜å‘¨æœŸ => æ¨¡æ¿ä¸ç»„ä»¶ => åŠ¨ç”»å®ç°ï¼‰

å®æˆ˜éƒ¨åˆ†ï¼šåœ¨çº¿æ¥å£æ–‡æ¡£ã€éšå ‚ç¬”è®°ï¼›å­¦ä¹ å°ç¨‹åºç¼–ç¨‹æ€è·¯ï¼›è´­ç‰©ä¸šåŠ¡ã€è®¢å•ä¸šåŠ¡ã€æ”¯ä»˜ä¸šåŠ¡ï¼›æŒæ¡å‰åç«¯è”è°ƒï¼›çœŸæœºè°ƒè¯•ã€æˆæƒç™»å½•/æ”¶é“¶å°æ”¯ä»˜ï¼Œè®²è§£å‘å¸ƒä¸Šçº¿ã€‚

ï¼ˆé¡¹ç›®æ­å»º => ç»Ÿä¸€æ ·å¼é£æ ¼ => ç»Ÿä¸€æ¥å£è§„èŒƒ=> æœ¬åœ°å¼€å‘=> çº¿ä¸Šæ¥å£çº¿ä¸‹æœ¬åœ°è”è°ƒ=> æ”¯ä»˜å®æˆæƒç™»å½•ã€æ”¯ä»˜å®æ”¶é“¶å°ç™»å½•=> çœŸæœºæµ‹è¯•=> å‘å¸ƒä¸Šçº¿ï¼‰

#### 2021.08.28 sat 35week bj

###### 2-1 åˆ›å»ºå°ç¨‹åºï¼Œç”³è¯·appIdï¼Œè®¾ç½®å›¢é˜Ÿå¼€å‘è€…

- æ³¨å†Œæµç¨‹ï¼ŒappId è·å–ï¼Œè®¾ç½®å›¢é˜Ÿå¼€å‘è€…
- åˆå§‹èš‚èšå¼€å‘è€…å·¥å…·
- æ„å»ºä½ çš„ç¬¬ä¸€æ¬¾ç”µå•†å°ç¨‹åº
- å››ç§åŸºæœ¬ç±»å‹æ–‡ä»¶

æ”¯ä»˜å®å°ç¨‹åºå®˜æ–¹ç½‘ç«™ï¼šhttps://mini.open.alipay.com/

##### 2-2 å¼€å‘ç¯å¢ƒæ­å»º&å¼€å‘è€…å·¥å…·ä»‹ç»

å°ç¨‹åºå¼€å‘è€…å·¥å…·ï¼š https://render.alipay.com/p/f/fd-jwq8nu2a/pages/home/index.html

- é¡¹ç›®æ–°å»ºã€æ‰“å¼€ï¼›å¸ƒå±€è°ƒæ•´å’Œé»˜è®¤è®¾ç½®ï¼›
- è‡ªå®šä¹‰å¸ƒå±€ï¼šæ–‡ä»¶ç›®å½•æ ‘ã€æ¨¡æ‹Ÿå™¨ã€è°ƒå¼å™¨
- å¼€å‘è€…ç•Œé¢ï¼šç¼–ç ã€çœŸæœºè°ƒè¯•ã€æµ‹è¯•æŠ¥å‘Šã€ä¸Šä¼ å®¡æ ¸

##### 2-3 å¼€å‘ç¬¬ä¸€ä¸ªæ”¯ä»˜å®å°ç¨‹åºhello world

åœ¨å°ç¨‹åºä¸­æ²¡æœ‰ `<div>` æ ‡ç­¾ï¼Œä»£æ›¿çš„æ˜¯`<view>` æ ‡ç­¾

##### 2-4 å››ç§åŸºæœ¬æ–‡ä»¶ç±»å‹ä¸pageæ ·å¼

- html -> axml
- css -> acss
- js
- json(é…ç½®æ–‡ä»¶)

##### 3-1 appçš„ä¸‰ç§æ–‡ä»¶ç±»å‹ä¸è·¯å¾„é…ç½®ç®¡ç†

- app.js(å¿…) å…¨å±€è„šæœ¬ã€å…¨å±€å¸¸é‡
- app.acss(é€‰) å…¨å±€æ ·å¼
- app.json(å¿…) é¡¹ç›®é…ç½®

é¡µé¢è·¯å¾„é…ç½®

- å¯¹è±¡ç»“æ„

```json
{
  "pages" :[
    "pages/index/index",
    "pages/hello/hello"
  ]
}
```

#### 2021.08.29 sun 35week bj

##### 3-2 ç»“åˆç”Ÿæ´»å®ä¾‹è®²è§£ä¸æ¼”ç¤ºappç”Ÿå‘½å‘¨æœŸ

- `onLauch` é¡¹ç›®åˆå§‹åŒ–å®Œæˆæ—¶è§¦å‘ï¼Œåªè§¦å‘ä¸€æ¬¡
- `onShow` é¡µé¢å±•ç¤ºçš„æ—¶å€™è§¦å‘
- `onHide` é¡µé¢éšè—çš„æ—¶å€™è§¦å‘
- `onError` é¡µé¢å‡ºç°é”™è¯¯çš„æ—¶å€™è§¦å‘

##### 3-3 é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ - ä¸Š

- `onLoad` é¡µé¢åŠ è½½æ—¶æ‰§è¡Œï¼Œæ¯ä¸ªé¡µé¢åªæ‰§è¡Œä¸€æ¬¡
- `onReady` é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆæ—¶æ‰§è¡Œï¼Œæ¯ä¸ªé¡µé¢åªæ‰§è¡Œä¸€æ¬¡
- `onShow` é¡µé¢æ˜¾ç¤ºåæ‰§è¡Œä¸€æ¬¡ï¼Œå¯æ‰§è¡Œå¤šæ¬¡
- `onHide` é¡µé¢æ¯æ¬¡éšè—æ—¶æ‰§è¡Œä¸€æ¬¡
- `onUnload` é¡µé¢å¸è½½æ‰§è¡Œä¸€æ¬¡

##### 3-4 é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ - ä¸‹

- `onTitleClick` æ ‡é¢˜è¢«ç‚¹å‡»åæ‰§è¡Œï¼Œå¯æ‰§è¡Œå¤šæ¬¡
- `onReachBottom` é¡µé¢è§¦åº•æ—¶æ‰§è¡Œï¼Œå¯æ‰§è¡Œå¤šæ¬¡
- `onPullDownRefresh`  ä¸‹æ‹‰åˆ·æ–°ï¼Œæ³¨æ„è¦åœ¨å¯¹åº” `json` æ–‡ä»¶ä¸­å¼€å¯ä¸‹æ‹‰åˆ·æ–° `"pullRefresh": true`
- `onShareAppMessage` ç‚¹å‡»åˆ†äº«æŒ‰é’®æ—¶æ‰§è¡Œï¼Œéœ€è¦å†™æˆä¸€ä¸ªå¯¹è±¡

```js
onShareAppMessage() {
    console.log("Page onShareAppMessage");
    return {
      title: "hello world",
      desc: "this is a describe content",
      path: "pages/hello/hello"
    }
  }
```

##### 3-5 å…¨å±€å¸¸é‡ã€å¯¹è±¡ã€è‡ªå®šä¹‰å‡½æ•°çš„ä½¿ç”¨

- `getApp()` `app` å¯¹è±¡ï¼Œå¤–éƒ¨è„šæœ¬æ“ä½œ`app` ä¸­çš„å¯¹è±¡ã€æ–¹æ³•ã€å¸¸é‡

#### 2021.08.30 mon 36week bj

##### 3-6 å…¨å±€æ ·å¼çš„ä½¿ç”¨å’Œé‡å†™

- `app.acss`  è‡ªå®šä¹‰æ ·å¼ï¼Œpage.acss è‡ªåŠ¨å¼•å…¥ï¼Œå¯ä»¥è¢«é‡å†™; å½“æ²¡æœ‰ç§æœ‰æ ·å¼æ—¶ï¼Œä¼šå»å…¨å±€å¯»æ‰¾å¯¹åº”çš„æ ·å¼ï¼Œå…¨å±€å’Œç§æœ‰ç›¸å½“äºçˆ¶å­ç»§æ‰¿å…³ç³»ã€‚

##### 3-7 å…¨å±€ä¸ç§æœ‰æ ‡é¢˜æ çš„é…ç½® `App.json`

```json
{
  "pages": [
    "pages/hello/hello",
    "pages/index/index"
  ],
  "window": {
    "defaultTitle": "æ…•è¯¾è´­ç‰©",
    "titleBarColor": "#ffbfc7"
  }
}
```

##### 3-8 tabé€‰é¡¹å¡ä»‹ç»ä¸æ¨¡å—é¡µé¢çš„åˆ›å»º

å¯¼èˆªæ  - items tab é¡¹æ•°ç»„é…ç½®ï¼š é¦–é¡µ - åˆ†ç±» - è´­ç‰©è½¦ - æˆ‘çš„

##### 3-9 tab é€‰é¡¹å¡çš„é…ç½®ä¸æ˜¾ç¤º

- `textColor`  æ–‡å­—é¢œè‰²
- `selectedColor`  æ–‡å­—é€‰ä¸­åé¢œè‰²
- `backgroundColor`  èƒŒæ™¯é¢œè‰²
- `items`  æ¯ä¸ªå•ç‹¬ tab é¡¹(æ•°ç»„)

æ¯ä¸ª item é¡¹çš„é…ç½®å¦‚ä¸‹ï¼š

* `pagePath`  é¡µé¢è·¯å¾„
* `name`  æ–‡å­—
* `icon`  æœªé€‰ä¸­çš„å›¾æ ‡
* `activeIcon`  é€‰ä¸­åçš„å›¾æ ‡

```json
"tabBar":{
  "textColor":"å­—ä½“é¢œè‰²",
  "selectedColor":"é€‰ä¸­é¢œè‰²",
  "backgroundColor":"åº•è‰²",
  "items":[{
    "pagePath":"pages/index/index",
    "name":"é¦–é¡µ",
    "icon":"æœªé€‰ä¸­çš„å›¾æ ‡",
    "activeIcon":"é€‰ä¸­åçš„å›¾æ ‡"
  }]
}
```

#### 2021.08.31tue 36week bj

##### 3-10 å¯¼èˆªç»„ä»¶é¡µé¢è·³è½¬ `<navigator></navigator>`

- `hover-class `ç‚¹å‡»æ—¶æ”¹å˜çš„æ ·å¼
- `hover-start-time`æŒ‰ä½å¤šå°‘ ms åå‡ºç°ç‚¹å‡»çŠ¶æ€
- `hover-stay-time ` æ‰‹æŒ‡é‡Šæ”¾å¤šå°‘ ms åä¿ç•™çš„çŠ¶æ€
- `url ` è·³è½¬åœ°å€
- `open-type ` è·³è½¬ç±»å‹ï¼Œé»˜è®¤å€¼æ˜¯ `navigate` ä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬æ–°é¡µé¢ï¼›`redirect` é”€æ¯å½“å‰é¡µé¢ï¼Œè·³è½¬æ–°é¡µé¢ï¼›`navigateBack`  è¿”å›åˆ°ä¸Šä¸€çº§é¡µé¢ï¼Œåªä½œç”¨äº `navigate` å±æ€§ä¸‹ï¼›`switchTab`  è·³è½¬åˆ° tabBar é¡µé¢

##### 3-11 å¯¼èˆª api ä¸ç« èŠ‚å›é¡¾

- `my.navigateTo()`
- `my.redirectTo()`
- `my.navigateBack()`
- `my.switchTab()`

##### 4-1 flex å¸ƒå±€çš„æ¦‚å¿µä¸æ¨¡å‹

* ç†è§£`flex` å¸ƒå±€çš„æ¦‚å¿µã€ä¼˜åŠ¿ã€æœ¯è¯­ã€æ¨¡å‹
* å®¹å™¨çš„å…­å¤§å±æ€§å’Œå¸ƒå±€è®¾ç½®
* å…ƒç´ çš„å…­å¤§å±æ€§
* `flex` å¸ƒå±€ç»ƒä¹ 

##### 4-2 flex-direction æ°´å¹³è½´ä¸äº¤å‰è½´çš„æ’åˆ—æ–¹å‘

Flex å®¹å™¨çš„å±æ€§

- `flex-direction` : å®¹å™¨å†…å…ƒç´ çš„æ’åˆ—æ–¹å‘ï¼Œ`row(é»˜è®¤å€¼)/row-reverse/column/column-reverse`

#### 2021.09.01 wed 36week bj

##### 4-3 flex-warp æ¢è¡Œå±æ€§ä»¥åŠflex-flowçš„ç»“åˆ

- `flex-wrap` : å…ƒç´ æ¢è¡Œï¼Œ`nowrap(é»˜è®¤å€¼)/wrap/wrap-reverse`

`nowrap` ä¼šå‹ç¼©å…ƒç´ çš„å®½åº¦ï¼Œè€Œ`wrap/wrap-reverse` åˆ™ä¸ä¼š

- `flex-flow:flex-direction` å’Œ `flex-wrap` çš„ç»“åˆ

  `flex-flow:[flex-direction] [flex-wrap]`

##### 4-4 justify-contentåœ¨æ°´å¹³è½´ä¸äº¤å‰è½´çš„å¯¹é½æ–¹å¼

`justify-content:flex-start/flex-end/center/space-between/space-around/space-evenly`

`space-between` : å…ƒç´ ä¸å…ƒç´ ä¹‹é—´çš„é—´éš™ç›¸åŒ

`space-around` :  å…ƒç´ ä¸å®¹å™¨çš„é—´éš™ç›¸åŒ

`space-evenly` : å…ƒç´ ä¸å…ƒç´ ä¹‹é—´ï¼Œå…ƒç´ ä¸å®¹å™¨çš„é—´éš™ç›¸åŒ

##### 4-5 align-itemså…ƒç´ åœ¨äº¤å‰è½´çš„å¯¹é½æ–¹å¼

`align-items` : æ¯ä¸ªå…ƒç´ åœ¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œ`flex-start/flex-end/center/baseline/stretch(é»˜è®¤å€¼)`

`baseline` : å…ƒç´ å†…çš„æ–‡å­—åœ¨åŒä¸€æ¡åŸºçº¿ä¸Šå¯¹é½ï¼›`stretch` : å½“å…ƒç´ æœ¬èº«æ²¡æœ‰è®¾ç½®é«˜åº¦ï¼Œåˆ™æ‹‰ä¼¸åˆ°æ•´ä¸ªå®¹å™¨

##### 4-6 align-contentåŸºäºå¤šè½´çº¿çš„å¯¹å…¶æ–¹å¼

`align-content` : å¤šè½´çº¿çš„å¯¹é½æ–¹å¼ï¼ˆæŠŠæ¯ä¸ªè½´çº¿è§†ä¸ºå…ƒç´ ï¼Œè‡³å°‘è¦æœ‰ä¸¤è¡Œï¼‰ï¼Œ`flex-start/flex-end/center/stretch/space-between/space-around`

#### 2021.09.02 thu 36week bj

##### 4-7 flexè®¾ç½®å…ƒç´ çš„æ’åºã€æ‹‰ä¼¸ä¸ç¼©æ”¾

- `order`: å…ƒç´ çš„é¡ºåºï¼Œé»˜è®¤å€¼æ˜¯ 0ï¼Œæ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰
- `flex-grow`: å…ƒç´ çš„æ‰€å æ¯”ä¾‹å¤§å°ï¼Œæ‰©å……
- `flex-shrink`: ç¼©å°æ¯”ä¾‹

##### 4-8 flexè®¾ç½®å…ƒç´ çš„å›ºå®šå æ¯”ä¸é‡å†™å¯¹é½æ–¹å¼

- `flex-basis` : å›ºå®šæˆ–è‡ªåŠ¨ç©ºé—´çš„å æ¯”ï¼Œä¼˜å…ˆçº§æ¯” `width` é«˜ï¼Œä¼šè¦†ç›– `width`
- `flex:[flex-grow] [flex-shrink][flex-basis] ` åˆå¹¶å†™æ³•
- `align-self`: å¯é‡å†™ `align-items` çˆ¶å…ƒç´ çš„å±æ€§

#### 4-9 æ¨¡æ‹Ÿéª°å­1ç‚¹æ•°è¿›è¡Œflexå¸ƒå±€æ¼”ç»ƒ

- `flex`  å®ç°éª°å­(è‰²)å­

##### 4-10 æ¨¡æ‹Ÿéª°å­2ç‚¹æ•°è¿›è¡Œflexå¸ƒå±€æ¼”ç»ƒ

##### 4-11 æ¨¡æ‹Ÿéª°å­3ç‚¹æ•°è¿›è¡Œflexå¸ƒå±€æ¼”ç»ƒ

##### 4-12 æ¨¡æ‹Ÿéª°å­4-6ç‚¹æ•°è¿›è¡Œflexå¸ƒå±€æ¼”ç»ƒ

```css
page {
  display: flex;
  justify-content: center;
  align-items: center;
}
.container {
  width: 300px;
  height: 300px;
  background-color: #c9394a;
  border-radius: 20px;
  display: flex;
  flex-wrap: wrap;
  align-content: space-between;
  padding: 30px;
}
.row1 {
  width: 50%;
  display: flex;
  justify-content: flex-start;
}
.row2 {
  width: 50%;
  display: flex;
  justify-content: flex-end;
}
.row3 {
  width: 50%;
  display: flex;
  justify-content: flex-start;
}
.row4 {
  width: 50%;
  display: flex;
  justify-content: flex-end;
}
.point {
  width: 100px;
  height: 100px;
  background-color: #fff;
  border-radius: 50px;
}
```

##### 5-1 æ•°æ®ç»‘å®šä¸æ¸²æŸ“

- æ•°æ®ç»‘å®šï¼šæ¡ä»¶åˆ¤æ–­ã€åˆ—è¡¨æ¸²æŸ“
- äº‹ä»¶ï¼šäº‹ä»¶ç±»å‹ä¸`dataset` è‡ªå®šä¹‰æ•°æ®
- æ ·å¼ï¼šå›ºå®šåƒç´ `px` ä¸è‡ªé€‚åº”åƒç´  `rpx`

æ•°æ®ç»‘å®šï¼šé€šè¿‡ `{{value}}` è¡¨è¾¾å¼æ¥åŠ¨æ€çš„æ¸²æŸ“é¡µé¢çš„å†…å®¹; æ•°æ®éœ€è¦å†™å…¥æ¯ä¸€ä¸ª `page` ä¸­çš„ `data` å¯¹è±¡

```js
<view>hello {{username}}</view>
data: {
  username: "jerrychane"
}
```

##### 5-2 ifelseæ¡ä»¶æ¸²æŸ“

- é€šè¿‡æ•°æ®ç»‘å®šä¼ å…¥`true` æˆ–è€… `false`

```js
<view a:if="{{flag}}"></view>
```

- è¿™ä¸ªå¸ƒå°”å€¼å¯ä»¥å†™è¿› `data`

```js
data: {
  flag: true
}
```

- å¯é€šè¿‡è¿ç®—ç»“æœåè¿›è¡Œåˆ¤æ–­

```js
<view a:if="{{age<18}}"> æœªæˆå¹´ </view>
<view a:elif="{{age>=18 && age <60}}"> æˆå¹´</view>
<view a:else> è€å¹´ </view>


<view hidden="{{true}}" class="demo-words">
  éšè—
</view>

<view hidden="{{false}}" class="demo-words">
  æ˜¾ç¤º
</view>

<view hidden="{{student.score >=60 ? true : false }}" class="demo-words">
  ä¸åˆæ ¼
</view>
```

#### 2021.09.03 fri 36week bj

##### 5-3 forå¾ªç¯åˆ—è¡¨æ¸²æŸ“

- é€šè¿‡`data` ä¸­çš„æ•°ç»„ç»‘å®šååœ¨é¡µé¢ä¸­è¿›è¡Œå¾ªç¯å±•ç¤º

```xml
data: {
  stu: ['Tom', 'Json', 'Jack',]
}
// è‡ªå®šä¹‰åˆ—è¡¨æ˜¾ç¤º
<view a:for='{{stu}}' a:for-item='item' a:for-index='index'>{{index}}:{{item}}</view>
```

##### 5-4 viewä¸blockçš„åŒºåˆ«

æ¡ä»¶åˆ¤æ–­: `view` æ ‡ç­¾å¯è§ï¼Œ`block` æ ‡ç­¾ä¸å¯è§

```xml
<view a:if="{{flag}}"></view>
<block a:if="{{flag}}"></block> 
```

åˆ—è¡¨å¾ªç¯ï¼š

```xml
<view a:for='{{stu}}'>{{index}}:{{item}}</view>
<block a:for='{{stu}}'>{{index}}:{{item}}</block>
```

`block` æ ‡ç­¾åªä¼šæ˜¾ç¤º `block` æ ‡ç­¾ä½“å†…å…·ä½“çš„å†…å®¹ï¼Œå¤–å±‚æ‰€åŒ…çš„ä½œç”¨ä½“ä¸ä¼šæ˜¾ç¤º

##### 5-5 6ç§ä¸åŒçš„äº‹ä»¶ç±»å‹

- `tap` ä¸ `longTap` è§¦æ‘¸ï¼Œç±»ä¼¼ PC ç«¯çš„`click`
- `touchStart` ä¸ `touchMove`
- `touchEnd` ä¸ `touchCancel`

#### 2021.09.04 sat 36week bj

##### 5-6 datasetè‡ªå®šä¹‰æ•°æ®çš„ä½¿ç”¨

```xml
<view data-name="1" data-age="2" onTap="tap">æµ‹è¯• dataset</view>
```

```js
tap: function(e) {
  console.log(e.target.dataset.name);
  console.log(e.target.dataset.age);
}
```

##### 5-7 ä½¿ç”¨rpxå“åº”å¼åƒç´ å®ç°è‡ªé€‚åº”æ‹‰ä¼¸

- `*.acss `å³ `web` ä¸­çš„ `*.css`
- `web` å¼€å‘ä¸­æ€ä¹ˆç”¨ï¼Œå°ç¨‹åºé‡Œä¹Ÿæ€ä¹ˆç”¨
- å…¨å±€æ ·å¼ - é¡µé¢(å±€éƒ¨)æ ·å¼ - ç»„ä»¶æ ·å¼
- ä¸å¾—å†™ `.a- `ä¸ `.am- `å¼€å¤´çš„ `class`,å·²è¢«ç³»ç»Ÿå ç”¨

- `rpx`: è‡ªé€‚åº”(å“åº”å¼)åƒç´ 

| è®¾å¤‡     | æ¢ç®—(å±å¹•å®½åº¦/750) | æ¢ç®—(750/å±å¹•å®½åº¦) |
| -------- | ------------------ | ------------------ |
| iPhone5  | 1rpx = 0.42px      | 1px = 2.34rpx      |
| iPhone6  | 1rpx = 0.5px       | 1px = 2rpx         |
| iPhone6P | 1rpx = 0.552px     | 1px = 1.81px       |

```css
.block {
  /* ä»¥ iPhone6 ä¸ºä¾‹ï¼ŒiPhone6 çš„å›ºå®šå®½åº¦æœª 375px */
  /* width: 375px;
  height: 375px; */
  /* è‡ªé€‚åº”ï¼Œè‡ªåŠ¨æ‹‰ä¼¸æˆ–è€…æ‰©å±•ï¼Œå½¢æˆä¸€ä¸ªè‡ªé€‚åº”çš„æ­£æ–¹å½¢ */
  width: 750rpx;
  height: 750rpx;
  background-color: #c9394a;
}
```

##### 6-1 å›¾ç‰‡ç»„ä»¶çš„ä½¿ç”¨

- ä½¿ç”¨æ ‡ç­¾

  ```xml
  <image src="" class="" style="" mode="" lazyLoad="" onError="" onLoad="" />
  ```

##### 6-2 å›¾ç‰‡çš„4ç§ç¼©æ”¾æ¨¡å¼ä¸9ç§è£å‰ªæ¨¡å¼è®²è§£

- `mode` å›¾ç‰‡ç¼©æ”¾æ¨¡å¼
  - `scaleToFill`  å›¾ç‰‡çš„å®½é«˜å®Œå…¨æ‹‰ä¼¸è‡³å¡«æ»¡ `image` å…ƒç´ 
  - `aspectFit` ä¿æŒå®½é«˜çºµæ¨ªæ¯”ç¼©æ”¾ï¼Œä¿è¯å›¾ç‰‡é•¿çš„ä¸€è¾¹å®Œå…¨æ˜¾ç¤º
  - `aspectFill` ä¿æŒå®½é«˜çºµæ¨ªæ¯”ç¼©æ”¾ï¼Œä¿è¯å›¾ç‰‡çŸ­çš„ä¸€è¾¹å®Œå…¨æ˜¾ç¤º
  - `widthFix` å®½åº¦ä¸å˜ï¼Œé«˜åº¦è‡ªåŠ¨å˜åŒ–ï¼Œä¿æŒåŸå›¾å®½é«˜æ¯”ä¸å˜
- `mode` å›¾ç‰‡è£å‰ªæ¨¡å¼

  - `top`  ä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºé¡¶éƒ¨åŒºåŸŸ
  - `bottom` ä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºåº•éƒ¨åŒºåŸŸ
  - `center`ä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºä¸­é—´åŒºåŸŸ
  - `left` ä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå·¦è¾¹åŒºåŸŸ
  - `right `ä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå³è¾¹åŒºåŸŸ
  - `top left`  ä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå·¦ä¸Šè¾¹åŒºåŸŸ
  - `top right` ä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå³ä¸Šè¾¹åŒºåŸŸ
  - `bottom left`ä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå·¦ä¸‹è¾¹åŒºåŸŸ
  - `bottom right` ä¸ç¼©æ”¾å›¾ç‰‡ï¼Œåªæ˜¾ç¤ºå³ä¸‹è¾¹åŒºåŸŸ

##### 6-3 è½®æ’­å›¾ç»„ä»¶çš„ä½¿ç”¨ä¸å±æ€§è®²è§£

```xml
<swiper
        indicator-dots = ""   // æ˜¯å¦æ˜¾ç¤ºæŒ‡ç¤ºç‚¹
        indicator-color=""  // æŒ‡ç¤ºç‚¹é¢œè‰²
        indicator-active-color=""  // å½“å‰é€‰ä¸­æŒ‡ç¤ºç‚¹é¢œè‰²
        style=""
        autoplay="{{false}}" // è‡ªåŠ¨æ’­æ”¾
        current="0"  // è®¾ç½®å½“å‰é¡µé¢çš„ index
        duration="500" // æ»‘åŠ¨è¿‡ç¨‹åŠ¨ç”»æ—¶é•¿
        interval="5000" // è‡ªåŠ¨åˆ‡æ¢é—´éš”æ—¶é•¿
        circular="{{false}}"  // æ˜¯å¦å¯ç”¨æ— é™æ»‘åŠ¨
        vertical="{{false}}" // æ»‘åŠ¨æ–¹å‘æ˜¯å¦ä¸ºçºµå‘
        onChange=""  // current æ”¹å˜æ—¶è§¦å‘
        >
	<swiper-item><image/></swiper-item>
</swiper>
```

Demo

```xml
<swiper indicator-dots="{{true}}" 
  indicator-color="yellow"  
  indicator-active-color="red"  
  style="" 
  autoplay="{{true}}" 
  current="1"    
  duration="500" 
  interval="5000" 
  circular="{{false}}"  
  vertical="{{false}}" 
  onChange="" 
  >
  <swiper-item >
    <image class="img" src="//img1.mukewang.com/61302fff0001e3d217920764.jpg" />
  </swiper-item>
  <swiper-item >
    <image class="img" src="//img1.mukewang.com/612d869300019d4217920764.jpg" />
  </swiper-item>
  <swiper-item >
    <image class="img" src="//img1.mukewang.com/612d8acc0001e48017920764.jpg" />
  </swiper-item>
</swiper>
```

#### 2021.09.05 sun 36week bj

##### 6-4 scroll-viewç»„ä»¶çš„ä½¿ç”¨

- `scroll-view` ç»„ä»¶

  ```xml
  <scroll-view scroll-x="" scroll-y=""></scroll-view>
  ```

##### 6-5 å¼€å‘é¦–é¡µè½®æ’­å›¾

- è½®æ’­å›¾-æ¨ªå‘æ»‘åŠ¨æ¨èå•†å“-çºµå‘æ–°å“åˆ—è¡¨

```xml
<!-- è½®æ’­å›¾ -->
<swiper indicator-dots="{{true}}" indicator-active-color="#ff6699" autoplay="{{true}}">
    <swiper-item >
        <image mode="scaleToFill" src="/resources/img/1.png" class="swiper-item-img"/>
    </swiper-item>
     <swiper-item >
        <image mode="scaleToFill" src="/resources/img/4.png" class="swiper-item-img"/>
    </swiper-item>
</swiper>
```

##### 6-6 flexäºŒçº§åµŒå¥—å¼€å‘å•†åŸç‰¹è‰²ä¸€æ 

```xml
<!-- å•†åŸç‰¹è‰² -->
<view class="feature">
  <view>
    <image mode="scaleToFill" src="/resources/icon/smallIco/fang.png" class="feature-ico" />
    å…¨åœºåŒ…é‚®
  </view>
  <view>
    <image mode="scaleToFill" src="/resources/icon/smallIco/flash.png" class="feature-ico" />
    å…ˆè¡Œèµ”ä»˜
  </view>
  <view>
    <image mode="scaleToFill" src="/resources/icon/smallIco/yuan.png" class="feature-ico" />
    7å¤©æ— ç†ç”±é€€æ¬¾
  </view>
  <view>
    <image mode="scaleToFill" src="/resources/icon/smallIco/ling.png" class="feature-ico" />
    ä¼˜å…ˆé€€æ¬¾
  </view>
</view>
```

##### 6-7 å¯æ»šåŠ¨è§†å›¾ç»„ä»¶å¼€å‘æ¨èå•†å“

```xml
<!-- æ¨èå•†å“ -->
<view class="title-item-list">
  <view class="title-tag">
    <image mode="scaleToFill" src="/resources/icon/smallIco/rec.png" class="title-ico" />
    æ¨èå•†å“
  </view>
</view>
<!-- æ¨èå•†å“åˆ—è¡¨ -->
<scroll-view class="scroll-rec-items" scroll-x="{{true}}">
  <image mode="scaleToFill" src="/resources/items/1001.png" class="items-cover" />
  <image mode="scaleToFill" src="/resources/items/1002.png" class="items-cover" />
  <image mode="scaleToFill" src="/resources/items/1001.png" class="items-cover" />
  <image mode="scaleToFill" src="/resources/items/1002.png" class="items-cover" />
  <image mode="scaleToFill" src="/resources/items/1001.png" class="items-cover" />
  <image mode="scaleToFill" src="/resources/items/1002.png" class="items-cover" />
  <image mode="scaleToFill" src="/resources/items/1001.png" class="items-cover" />
  <image mode="scaleToFill" src="/resources/items/1002.png" class="items-cover" />
</scroll-view>
```

##### 6-8 å®Œæˆçºµå‘æ–°å“åˆ—è¡¨

```xml
<!-- å•†å“ä¸Šæ–°åˆ—è¡¨ -->
<view class="title-item-list">
  <view class="title-tag">
    <image mode="scaleToFill" src="/resources/icon/smallIco/diamond.png" class="title-ico" />
    å•†å“ä¸Šæ–°
  </view>
</view>
<view class="new-item-list">
  <view class="item-outer">
    <image mode="scaleToFill" src="/resources/items/1002.png" class="new-item-cover" />
    <view class="item-border">
      <view class="tags">
        è¡£æœ
      </view>
       <view class="tags">
        è£¤å­
      </view>
       <view class="tags">
        å¥¢ä¾ˆå“
      </view>
       <view class="tags">
        è¡£æœ
      </view>
       <view class="tags">
        è£¤å­
      </view>
       <view class="tags">
        å¥¢ä¾ˆå“
      </view>
    </view>
    <view class="price-border">
      <view class="price">
        ï¿¥100.00
      </view>
       <view class="like-counts">
         888
         <image mode="scaleToFill" src="/resources/icon/smallIco/likes.png" class="like-ico" />
      </view>
    </view>
  </view>
</view>
```

##### 6-9 å‘é€httpRequestè·å–è½®æ’­å›¾æ•°æ®

ç½‘ç»œè¯·æ±‚-API

```js
my.httpRequest({
  url: 'http://serverurl',
  method: 'POST',
  header: {'content-type': 'application/json'},
  data: {name:'jack', age: '18'},
  dataType: 'json',
  success: function(res) {},
  fail: function(res) {},
   complete: function(res) {}
})
```

```js
  onShow() {
    // é¡µé¢æ˜¾ç¤º
    // è¯·æ±‚è½®æ’­å›¾
    my.httpRequest({
      url: app.serverUrl + '/index/carousels',
      method: 'POST',
      header: { 'content-type': 'application/json' },
      // data: {name:'jack', age: '18'},
      dataType: 'json',
      success: function (res) {
        console.log(res);
      },
      fail: function (res) {
        console.log('å‘ç”Ÿé”™è¯¯' + res);
      },
      complete: function (res) {
        console.log('æœ€ç»ˆæ‰§è¡Œçš„ complete' + res);
      }
    })
  },
```

##### 6-10 é¦–é¡µè½®æ’­å›¾åŠ¨æ€æ¸²æŸ“

```js
const app = getApp();

Page({
  data: {
    carousels: []
  },
  onShow() {
    var self = this;
    // é¡µé¢æ˜¾ç¤º
    // è¯·æ±‚è½®æ’­å›¾
    my.httpRequest({
      url: app.serverUrl + '/index/carousels',
      method: 'POST',
      header: { 'content-type': 'application/json' },
      // data: {name:'jack', age: '18'},
      dataType: 'json',
      success: function (res) {
        console.log(res);
        // è·å–åç«¯è¿”å›çš„æ•°æ®
        var myData = res.data;
        if (myData.status === 200) {
          var carousels = myData.data;
          self.setData({
            carousels
          })
        }

      },
      fail: function (res) {
        console.log('å‘ç”Ÿé”™è¯¯' + res);
      },
      complete: function (res) {
        console.log('æœ€ç»ˆæ‰§è¡Œçš„ complete' + res);
      }
    })
  },
});

```

```xml
<!-- åŠ¨æ€è·å–è½®æ’­å›¾ -->
<swiper indicator-dots="{{true}}" indicator-active-color="#ff6699" autoplay="{{true}}" style="400rpx">
  <block a:for="{{carousels}}" a:for-item="pic">
    <swiper-item >
      <image mode="scaleToFill" src="{{pic.imageUrl}}" class="swiper-item-img" />
    </swiper-item>
  </block>
</swiper>
```

#### 2021.09.08 wed 37week bj

##### 6-11 ç½‘ç»œè¯·æ±‚è·å–æ¨èå•†å“ä»¥åŠæ–°å“åˆ—è¡¨æ•°æ®

```js
// index item 
    // è¯·æ±‚æ¨èå•†å“åˆ—è¡¨
    my.httpRequest({
      url: app.serverUrl + '/index/items/rec',
      method: 'POST',
      header: { 'content-type': 'application/json' },
      dataType: 'json',
      success: function (res) {
        // è·å–åç«¯è¿”å›çš„æ•°æ®
        console.log("rec:",res.data)
        var myData = res.data;
        if (myData.status === 200) {
          var featureList = myData.data;
          self.setData({
            featureList
          })
        }

      }
    })
    // è¯·æ±‚æ–°å“åˆ—è¡¨
    my.httpRequest({
      url: app.serverUrl + '/index/items/new',
      method: 'POST',
      header: { 'content-type': 'application/json' },
      dataType: 'json',
      success: function (res) {
        // è·å–åç«¯è¿”å›çš„æ•°æ®
        console.log("new:",res.data)
        var myData = res.data;
        if (myData.status === 200) {
          var newItemList = myData.data;
          self.setData({
            newItemList
          })
        }

      }
    })
```

##### 6-12 æ¨èå•†å“ä»¥åŠæ–°å“åˆ—è¡¨æ•°æ®æ¸²æŸ“å±•ç¤º

#### 2021.09.09 thu 37week bj

##### 6-13 ä¸‹æ‹‰å®ç°é¦–é¡µæ•°æ®åˆ·æ–°

- é¡µé¢é…ç½® `pullRefresh: true`
- ä½¿ç”¨é¡µé¢ç”Ÿå‘½å‘¨æœŸå‡½æ•° `onPullDownRefresh`

##### 7-1 å¼€å‘åˆ†ç±»é¡µé¢ - å›ºå®šæœç´¢æ 

- æœç´¢æ å¯ä»¥è¾“å…¥å…·ä½“çš„å•†å“åç§°ï¼Œè¿›è¡Œæœç´¢
- åˆ†ç±»å±•ç¤ºï¼Œç‚¹å‡»æŸä¸€ä¸ªåˆ†ç±»ï¼Œåˆ™æ˜¾ç¤ºè¯¥åˆ†ç±»ä¸‹çš„æ‰€æœ‰å•†å“åˆ—è¡¨
- ä»¥ä¸Šä¸¤ä¸ªåŠŸèƒ½ç‚¹çš„æœ€ç»ˆæŸ¥è¯¢ç»“æœè·³è½¬åˆ°å•†å“åˆ—è¡¨é¡µé¢

```xml
<!-- æœç´¢æ  -->
<view class="search">
    <form class="search-form">
        <image class="search-icon" mode="scaleToFill" src="/resources/icon/smallIco/search.png" />
        <input class="search-input" placeholder="è¯·è¾“å…¥æœç´¢å•†å“å..." type="text" auto-focus confirm-type="search" onConfirm="" />
    </form>
</view>
```

##### 7-2 å¼€å‘åˆ†ç±»é¡µé¢ - æ˜¾ç¤ºæ¯ä¸€ä¸ªåˆ†ç±»å…ƒç´ 

```xml
<view class="category">
    <view class="cat-item">
        <image mode="scaleToFill" src="/resources/category/0-luxury.png" class="cat-icon" />
        <view class="cat-name">
            å¥¢ä¾ˆå“
        </view>
    </view>
</view>
```

```js
//category.js
const app = getApp();
Page({
    data: {
        catImgList: [
            { id: 0, imgUrl: "/resources/category/0-luxury.png" },
            { id: 1, imgUrl: "/resources/category/1-new.png" },
            { id: 2, imgUrl: "/resources/category/2-skirt.png" },
            { id: 3, imgUrl: "/resources/category/3-trousers.png" },
            { id: 4, imgUrl: "/resources/category/4-shoes.png" },
            { id: 5, imgUrl: "/resources/category/5-boyfriend.png" },
            { id: 6, imgUrl: "/resources/category/6-suit.png" },
            { id: 7, imgUrl: "/resources/category/7-makeup.png" },
            { id: 8, imgUrl: "/resources/category/8-tshirt.png" },
            { id: 9, imgUrl: "/resources/category/9-acessories.png" },
            { id: 10, imgUrl: "/resources/category/10-bags.png" },
            { id: 11, imgUrl: "/resources/category/11-home.png" },
            { id: 12, imgUrl: "/resources/category/12-child.png" },
            { id: 13, imgUrl: "/resources/category/13-underwear.png" },
            { id: 14, imgUrl: "/resources/category/14-longuette.png" },
            { id: 15, imgUrl: "/resources/category/15-baby.png" },
        ],
        catList: [],
    },
    onLoad() {
        const self = this;
        // è¯·æ±‚æ–°å“åˆ†ç±»
        my.httpRequest({
            url: app.serverUrl + '/cats',
            method: 'POST',
            header: { 'content-type': 'application/json' },
            dataType: 'json',
            success: function (res) {
                // è·å–åç«¯è¿”å›çš„æ•°æ®
                console.log("catName:", res.data)
                var myData = res.data;
                if (myData.status === 200) {
                    var catList = myData.data;
                    catList.forEach((item, index) => {
                        item.imgUrl = self.data.catImgList[index].imgUrl
                    });
                    console.log("catList:", catList);
                    self.setData({
                        catList
                    })
                }

            }
        })
    },
});
```

#### 2021.09.10 fri 37week bj

##### 7-3 é”®ç›˜å›è½¦è§¦å‘confirmäº‹ä»¶è·å–æœç´¢æ¡†çš„å€¼

- é€šè¿‡ç½‘ç»œè¯·æ±‚æ‹¿åˆ°å•†å“åˆ—è¡¨ï¼Œè§£ææ•°æ®åœ¨é¡µé¢ä¸Šæ¸²æŸ“
- æ¯è¡Œæ˜¾ç¤ºä¸¤ä»¶å•†å“ï¼Œè‹¥å•è¡Œåªæœ‰ä¸€ä»¶å•†å“ï¼Œåˆ™å¸ƒå±€å·¦å¯¹é½
- é‡‡ç”¨æ¨¡æ¿å¤ç”¨é¦–é¡µæ–°å“åˆ—è¡¨

##### 7-4 é¡µé¢å¸¦å‚ä¸debuggerè°ƒè¯•

```js
Page({
    data: {},
    onLoad(params) { // params ç”¨äºæ¥æ”¶è·³è½¬ä¼ é€’çš„å‚æ•°
        let { searcType, itemName } = params;
        console.log(params);
    },
});
```

##### 7-5 ä½¿ç”¨å¯¼èˆªç»„ä»¶å¸¦å‚

```js
<navigator url="/pages/query/list/list?searchType=category&categoryId={{item.id}}&categoryName={{item.name}}">
      <image mode="scaleToFill" src="{{item.imgUrl}}" class="cat-icon" />
      <view class="cat-name">
          {{item.name}}
      </view>
  </navigator>
```

#### 2021.09.12 sun 37week bj

##### 7-6 æ ¹æ®ä¸åŒå‚æ•°å‘èµ·ç½‘ç»œè¯·æ±‚æŸ¥è¯¢å•†å“åˆ—è¡¨

```js
// pages/query/list/list.js
const app = getApp();
Page({
    data: {},
    onLoad(params) {
        let self = this;
        let { catId, catName, searchType, itemName } = params;
        console.log("catId:", catId);
        console.log("catName:", catName);
        // æ ¹æ®ç±»å‹æŸ¥è¯¢ç»“æœé›†
        if (searchType === 'cat') {
            my.httpRequest({
                url: app.serverUrl + '/items/searchByCat?catId=' + catId,
                method: 'POST',
                header: { 'content-type': 'application/json' },
                // data: {name:'jack', age: '18'},
                dataType: 'json',
                success: function (res) {
                    console.log(res);
                    // è·å–åç«¯è¿”å›çš„æ•°æ®
                    var myData = res.data;
                    if (myData.status === 200) {
                        var itemList = myData.data;
                        console.log("itemList:", itemList);
                        // self.setData({
                        //     itemList
                        // })
                    }

                },
                complete: function (res) {
                    // console.log('æœ€ç»ˆæ‰§è¡Œçš„ complete:', res);
                }
            })
        } else if (searchType === 'words') {
            my.httpRequest({
                url: app.serverUrl + '/items/search',
                method: 'POST',
                header: { 'content-type': 'application/json' },
                data: { itemName },
                dataType: 'json',
                success: function (res) {
                    console.log(res);
                    // è·å–åç«¯è¿”å›çš„æ•°æ®
                    var myData = res.data;
                    if (myData.status === 200) {
                        var itemList = myData.data;
                        console.log("itemList:", itemList);
                        // self.setData({
                        //     itemList
                        // })
                    }

                },
                complete: function (res) {
                    // console.log('æœ€ç»ˆæ‰§è¡Œçš„ complete:', res);
                }
            })
        }
    },
});
```

##### 7-7 ä½¿ç”¨äº¤äº’apiæé«˜ç”¨æˆ·ä½“éªŒ

```js
my.showNavigationBarLoading();
my.showLoading({
      content: 'ç–¯ç‹‚åŠ è½½ä¸­'
});
complete: function (res) {
        my.hideNavigationBarLoading();
        my.hideLoading();
}
```

##### 7-8 æŸ¥è¯¢ç»“æœæ–‡å­—åŠ¨æ€æ•°æ®ç»‘å®šä¸æ˜¾ç¤º

##### 7-9 ä½¿ç”¨æ¨¡æ¿å®ç°å•†å“åˆ—è¡¨ä»£ç å…¬ç”¨

```xml
<!-- å•†å“åˆ—è¡¨çš„ç»“æœæ–‡å­—æ˜¾ç¤º -->
<view class="item-desc-bar">
    <view class="item-desc-title">
        {{titleName}}
    </view>
</view>
<!-- å¯¼å…¥æ¨¡æ¿ -->
<import src="/pages/template/itemList/itemList" />
<!-- ä½¿ç”¨æ¨¡æ¿ is:æ¨¡æ¿å data: å¯ä»¥ä¼ å…¥å¤–éƒ¨å‚æ•°-->
<template is="itemList" data="{{newItemList:itemList}}"></template>
```

##### 7-10 httpRequestè¯·æ±‚å•†å“è¯¦æƒ…

- æŸ¥è¯¢å•†å“çš„å…·ä½“ä¿¡æ¯åï¼Œåœ¨é¡µé¢ä¸Šè¿›è¡Œæ¸²æŸ“
- å°é¢å›¾å¤šå¼ ï¼Œæ”¯æŒæ¨ªå‘å±•ç¤º
- è¯¦æƒ…å†…å®¹æ ¹æ®åå° `json` è¿›è¡Œè§£æï¼Œè§£æåæ¸²æŸ“æˆæ–‡å­—æˆ–å›¾ç‰‡

#### 2021.09.13 mon 38week bj

##### 7-11 å¼€å‘å•†å“è¯¦æƒ…é¡µ - å°é¢å›¾

```js
const app = getApp();

Page({
    data: {
        headerImagesArr: [],
    },
    onLoad(params) {
        let self = this;
        let { itemId } = params;
        // è·å–ä¸Šä¸€ä¸ªé¡µé¢ä¼ è¿‡æ¥çš„å•†å“ id ä¸»é”®
        // è¯·æ±‚æ¥å£ï¼ŒæŸ¥è¯¢å•†å“è¯¦æƒ…
        my.showNavigationBarLoading();
        my.showLoading({
            content: 'ç–¯ç‹‚åŠ è½½ä¸­'
        });
        my.httpRequest({
            url: app.serverUrl + '/items/searchById?itemId=' + itemId,
            method: 'POST',
            header: { 'content-type': 'application/json' },
            dataType: 'json',
            success: function (res) {
                // è·å–åç«¯è¿”å›çš„æ•°æ®
                var myData = res.data;
                // è·å–å°é¢å›¾çš„æ•°ç»„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”è½¬æ¢ä¸º json arr
                var headerImagesArr = JSON.parse(myData.data.headerImages);
                if (myData.status === 200) {
                    var item = myData.data;
                    console.log("item:", item);
                    self.setData({
                        headerImagesArr,
                    })
                }

            },
            complete: function (res) {
                my.hideNavigationBarLoading();
                my.hideLoading();
            }
        })
    },
});
```

##### 7-12 å¼€å‘å•†å“è¯¦æƒ…é¡µ - åŸºæœ¬ä¿¡æ¯æ¸²æŸ“ ä¸Š

##### 7-13 å¼€å‘å•†å“è¯¦æƒ…é¡µ - åŸºæœ¬ä¿¡æ¯æ¸²æŸ“ ä¸‹







































































































